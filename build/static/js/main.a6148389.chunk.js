(this.webpackJsonppubnubchatrtc=this.webpackJsonppubnubchatrtc||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(33),c=n.n(o),i=n(14),s=n(1);function u(){var e=Object(i.a)(["\n body {\n  font-family: ",";\n  font-weight: ",";\n  margin: ",";\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n* {\n  box-sizing: border-box;\n}\nbody,\nhtml,\n#root {\n  height: 100%;\n}\n"]);return u=function(){return e},e}var l=Object(s.c)(u(),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.space[0]}));function d(){var e=Object(i.a)(["\n\n//! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css\nhtml{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}\n//# sourceMappingURL=normalize.min.css.map\n      \n"]);return d=function(){return e},e}var f,m,p=Object(s.c)(d()),g=s.d.div.withConfig({displayName:"style__Wrapper",componentId:"ca4185-0"})(["text-align:left;display:flex;height:100%;flex-direction:column;"]),h=n(10),b=n(6),y=b.b,v=n(67),E=n.n(v),C=s.d.div.withConfig({displayName:"Loginstyle__Wrapper",componentId:"sc-1aqyl9-0"})(["display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;","{background:url(",");background-size:cover;background-position:center center;padding:10% 15%;}"],(function(e){return e.theme.mediaQueries.medium}),E.a),I=s.d.div.withConfig({displayName:"Loginstyle__Body",componentId:"sc-1aqyl9-1"})(["flex-grow:1;display:flex;flex-direction:row;"]),_=s.d.div.withConfig({displayName:"Loginstyle__Promo",componentId:"sc-1aqyl9-2"})(["display:flex;flex-direction:column;justify-content:flex-end;background:linear-gradient( 180deg,rgba(240,42,42,0.670214) 0%,rgba(138,42,225,0.55153) 100% );max-width:360px;border-top-left-radius:",";border-bottom-left-radius:",";display:none;","{display:flex;}"],(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.mediaQueries.large})),O=s.d.h1.withConfig({displayName:"Loginstyle__TagLine",componentId:"sc-1aqyl9-3"})(["color:",";font-size:24px;font-weight:",";margin:0px;text-align:center;padding:20px 50px;"],(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontWeights.light})),w=s.d.div.withConfig({displayName:"Loginstyle__Screenshot",componentId:"sc-1aqyl9-4"})(["display:flex;justify-content:center;"]),x=s.d.div.withConfig({displayName:"Loginstyle__Content",componentId:"sc-1aqyl9-5"})(["background:",";flex-grow:1;display:flex;align-items:center;justify-content:center;border-top-right-radius:",";border-bottom-right-radius:",";border-top-left-radius:",";border-bottom-left-radius:",";background:",";","{border-top-left-radius:",";border-bottom-left-radius:",";}"],(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.backgrounds.content}),(function(e){return e.theme.mediaQueries.large}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.radii.square})),j=s.d.div.withConfig({displayName:"Loginstyle__LoginForm",componentId:"sc-1aqyl9-6"})(["width:300px;display:flex;flex-direction:column;font-size:14px;font-family:",";"],(function(e){return e.theme.fonts.app})),N=s.d.img.withConfig({displayName:"Loginstyle__Logo",componentId:"sc-1aqyl9-7"})(["height:30px;"]),T=s.d.div.withConfig({displayName:"Loginstyle__Label",componentId:"sc-1aqyl9-8"})(["color:",";padding-bottom:",";padding-top:",";"],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.space[6]})),D=s.d.input.withConfig({displayName:"Loginstyle__Field",componentId:"sc-1aqyl9-9"})(["height:42px;color:",";border-radius:",";border:",";padding:",";background:",';&[type="password"]{letter-spacing:8px;font-size:24px;}:read-only:focus{outline:none;}'],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){var t=e.theme;return"0 ".concat(t.space[3])}),(function(e){return e.theme.backgrounds.content})),S=s.d.button.withConfig({displayName:"Loginstyle__Button",componentId:"sc-1aqyl9-10"})(["align-self:center;cursor:pointer;border-radius:",";border:",";margin-top:",";padding:",";width:100%;height:42px;color:",";background:linear-gradient(155deg,#e12a66 0%,#5c0ce1 100%);font-weight:",";&:focus{outline:none;}"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.borders.none}),(function(e){return e.theme.space[8]}),(function(e){var t=e.theme;return"".concat(t.space[3]," ").concat(t.space[0])}),(function(e){return e.theme.colors.activeText}),(function(e){return e.theme.fontWeights.regular})),k=n(68),z=n.n(k),A=n(4),L=n(7),R=n(12),M=n.n(R),W={isLoggingIn:!1},U=function(e){return e.authentication},V=Object(L.a)([U],(function(e){return M()(void 0!==e.loggedInUserId,"getLoggedInUserId should not be used in components of the application that are rendered while there is no logged in user"),e.loggedInUserId})),P=Object(L.a)(U,(function(e){return!!e.loggedInUserId})),H=Object(L.a)(U,(function(e){return e.isLoggingIn})),q=n(9),G=Object(L.a)([function(e){return e.joinedConversations}],(function(e){return e.byId})),B=Object(q.e)(),F=n(47),Q=n(69),Y=n.n(Q),J=Object(q.m)(),K=Object(L.a)([function(e){return e.users}],(function(e){return e.byId})),Z=function(){var e=y(),t=Object(b.c)(H),n=Object(b.c)(P),o=Object(r.useContext)(s.a),c=Object(b.c)(K),i=Object(r.useState)(""),u=Object(h.a)(i,2),l=u[0],d=u[1],f=c[l],m=function(){if(!t&&!n&&""===l){var r=F[Math.floor(Math.random()*F.length)];d(r),e(function(e){return function(t,n,r){t({type:"LOGGIN_IN"}),r.pubnub.api.setUUID(e);var a=t(Object(q.r)({userId:e})).then((function(){r.pubnub.api.subscribe({channels:[e],withPresence:!0})})).then((function(){return t(Object(q.p)({userId:e,include:{spaceFields:!0,customSpaceFields:!1,customFields:!1,totalCount:!1}}))})).then((function(){var t=G(n())[e].map((function(e){return e.id}));r.pubnub.api.subscribe({channels:t,withPresence:!0})}));return Promise.all([a]).then((function(){t({type:"LOGIN_SUCCEEDED",payload:{loggedInUserId:e}})}))}}(r))}};return n||t||m(),a.a.createElement(C,null,a.a.createElement(I,null,a.a.createElement(_,null,a.a.createElement(O,null,o.custom.tagLine),a.a.createElement(w,null,a.a.createElement("img",{alt:"pubnub chat screenshot",src:Y.a}))),a.a.createElement(x,null,a.a.createElement(j,null,a.a.createElement(N,{alt:"PubNub",src:z.a}),a.a.createElement(T,null,"Username"),a.a.createElement(D,{readOnly:!0,value:f?f.name.toLowerCase().replace(" ","."):""}),a.a.createElement(T,null,"Password"),a.a.createElement(D,{readOnly:!0,type:"password",value:"password123"}),a.a.createElement(S,{onClick:m},t?"Connecting":"Log In")))))},X=s.d.div.withConfig({displayName:"ChatUIstyle__Wrapper",componentId:"sc-1yeb6q1-0"})(["display:flex;height:100%;"]),$=n(15);!function(e){e.MENU_VIEW_DISPLAYED="pubnub/MENU_VIEW_DISPLAYED",e.MENU_VIEW_HIDDEN="pubnub/MENU_VIEW_HIDDEN",e.CURRENT_CONVERSATION_VIEW_DISPLAYED="pubnub/CURRENT_CONVERSATION_VIEW_DISPLAYED",e.CURRENT_CONVERSATION_VIEW_HIDDEN="pubnub/CURRENT_CONVERSATION_VIEW_HIDDEN",e.CONVERSATION_MEMBERS_VIEW_DISPLAYED="pubnub/CONVERSATION_MEMBERS_VIEW_DISPLAYED",e.CONVERSATION_MEMBERS_VIEW_HIDDEN="pubnub/CONVERSATION_MEMBERS_VIEW_HIDDEN",e.JOIN_CONVERSATION_VIEW_DISPLAYED="pubnub/JOIN_CONVERSATION_VIEW_DISPLAYED",e.JOIN_CONVERSATION_VIEW_HIDDEN="pubnub/JOIN_CONVERSATION_VIEW_HIDDEN",e.USER_DETAIL_VIEW_DISPLAYED="pubnub/USER_DETAIL_VIEW_DISPLAYED",e.USER_DETAIL_VIEW_HIDDEN="pubnub/USER_DETAIL_VIEW_HIDDEN",e.RTC_VIEW_DISPLAYED="pubnub/RTC_VIEW_DISPLAYED",e.RTC_VIEW_HIDDEN="pubnub/RTC_VIEW_HIDDEN"}(f||(f={})),function(e){e[e.Menu=0]="Menu",e[e.CurrentConversation=1]="CurrentConversation",e[e.ConversationMembers=2]="ConversationMembers",e[e.JoinConversation=3]="JoinConversation",e[e.UserDetail=4]="UserDetail",e[e.Rtc=5]="Rtc"}(m||(m={}));var ee={views:[m.CurrentConversation]},te=function(e,t){return Object(A.a)(Object(A.a)({},e),{},{views:[].concat(Object($.a)(e.views),[t])})},ne=function(e,t){return Object(A.a)(Object(A.a)({},e),{},{views:e.views.filter((function(e){return e!==t}))})},re=function(e){return e.layout},ae=(Object(L.a)([re],(function(e){return e.views[0]})),Object(L.a)([re],(function(e){return e.views}))),oe=Object(L.a)([ae],(function(e){return{Menu:e.includes(m.Menu),ConversationMembers:e.includes(m.ConversationMembers),JoinConversation:e.includes(m.JoinConversation),CurrentConversation:e.includes(m.CurrentConversation),UserDetail:e.includes(m.UserDetail),Rtc:e.includes(m.Rtc)}})),ce=n(70),ie=ce.conversationId,se=function(e){return{type:"FOCUS_ON_CONVERSATION",payload:e}},ue={currentConversationId:ie},le=Object(L.a)([function(e){return e.currentConversation}],(function(e){return e.currentConversationId})),de=n(11),fe=Object(de.c)({conversations:Object(q.l)(),allConversations:Object(q.k)()}),me=Object(L.a)([function(e){return e.conversations}],(function(e){return e.conversations.byId})),pe=Object(L.a)([function(e){return e.conversations.conversations},function(e){return e.conversations.allConversations}],(function(e,t){return t.spaceIds.map((function(t){return e.byId[t]}))})),ge=function(e){var t=e.title,n=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:20,height:20},a.a.createElement("title",null,t),a.a.createElement("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd"},a.a.createElement("circle",{stroke:n.colors.onPrimary,cx:9,cy:9,r:9}),a.a.createElement("path",{d:"M5 9h8M9 5v8",stroke:n.colors.onPrimary,strokeLinecap:"round",strokeLinejoin:"round"})))},he=s.d.div.withConfig({displayName:"ConversationItemstyle__Wrapper",componentId:"sc-1fzxd67-0"})(["cursor:pointer;display:flex;justify-content:space-between;height:",";padding:",";font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";background:",";:hover{background:",";}"],(function(e){return e.theme.sizes[2]}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.fonts.app}),(function(e){var t=e.theme;return e.emphasized?t.fontWeights.black:t.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){var t=e.theme;return e.selected?t.backgrounds.primaryActive:"transparent"}),(function(e){var t=e.theme;return e.selected?t.backgrounds.primaryActive:t.backgrounds.primaryHover})),be=s.d.div.withConfig({displayName:"ConversationItemstyle__Body",componentId:"sc-1fzxd67-1"})(["display:flex;"]),ye=s.d.div.withConfig({displayName:"ConversationItemstyle__Name",componentId:"sc-1fzxd67-2"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin:",";line-height:",";"],(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[6])}),(function(e){return e.theme.sizes[1]})),ve=s.d.span.withConfig({displayName:"ConversationItemstyle__MessageCount",componentId:"sc-1fzxd67-3"})(["margin:",";:hover{display:none;}"],(function(e){return e.theme.space[3]})),Ee=s.d.div.withConfig({displayName:"ConversationItemstyle__IconWrapper",componentId:"sc-1fzxd67-4"})(["display:flex;align-items:center;"]),Ce=s.d.div.withConfig({displayName:"ConversationItemstyle__ConversationIcon",componentId:"sc-1fzxd67-5"})(["border-radius:",";width:",";height:",";line-height:",";font-family:",";font-weight:",";font-size:",";color:",";text-align:center;background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.selectedText}),(function(e){return e.color})),Ie=function(e){var t=e.title,n=(e.selected,Object(r.useContext)(s.a));return a.a.createElement("svg",{width:20,height:16},a.a.createElement("title",null,t),a.a.createElement("g",{fill:n.colors.onPrimary,fillRule:"evenodd"},a.a.createElement("path",{d:"M10.647 4.854L12.793 7H.5a.499.499 0 100 1h12.293l-2.146 2.145a.5.5 0 00.707.707l3-3a.497.497 0 000-.708l-3-3a.5.5 0 10-.707.71z"}),a.a.createElement("path",{d:"M19.001 1.5v12c0 .827-.673 1.5-1.5 1.5h-10c-.827 0-1.5-.673-1.5-1.5v-4a.5.5 0 011 0v4a.5.5 0 00.5.5h10a.5.5 0 00.5-.5v-12a.5.5 0 00-.5-.5h-10a.5.5 0 00-.5.5v4a.5.5 0 01-1 0v-4c0-.827.673-1.5 1.5-1.5h10c.827 0 1.5.673 1.5 1.5"})))};var _e=function(e,t){var n=t.length;return t[(function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(e)%n+n)%n]};function Oe(e){var t=(e.match(/(\([\w\s-:]+\))/)||[])[1]||e,n=window.matchMedia(t),a=Object(r.useState)(n.matches),o=Object(h.a)(a,2),c=o[0],i=o[1];return Object(r.useEffect)((function(){var e=function(){return i(n.matches)};return n.addListener(e),function(){return n.removeListener(e)}}),[n]),c}var we=function(e){var t=e.selected,n=e.id,o=e.name,c=e.onClick,i=e.onLeave,u=e.unreadMessageCount,l=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.mouseEnterDelayMS,o=void 0===a?200:a,c=n.mouseLeaveDelayMS,i=void 0===c?0:c,s=Object(r.useState)(!1),u=Object(h.a)(s,2),l=u[0],d=u[1];return[l,{onMouseEnter:function(){clearTimeout(t),e=setTimeout((function(){return d(!0)}),o)},onMouseLeave:function(){clearTimeout(e),t=setTimeout((function(){return d(!1)}),i)}}]}({mouseEnterDelayMS:0}),d=Object(h.a)(l,2),f=d[0],m=d[1],p=Object(b.c)(V),g=n!==ie&&n!==p,y=Object(r.useContext)(s.a),v=Oe(y.mediaQueries.touch),E=_e(o,y.colors.avatars);return a.a.createElement(he,Object.assign({},m,{selected:t,emphasized:u>0,onClick:c}),a.a.createElement(be,null,a.a.createElement(Ce,{color:E},"#"),a.a.createElement(ye,null,o)),(f||v)&&g?a.a.createElement(Ee,{onClick:function(e){e.stopPropagation(),i()}},a.a.createElement(Ie,{title:"Leave Conversation",selected:t})):u>0&&a.a.createElement(ve,null,u))},xe=s.d.div.withConfig({displayName:"MyConversationsstyle__Wrapper",componentId:"sc-1yz4vv5-0"})(["display:flex;flex-direction:column;overflow:auto;margin:",";margin-top:",";"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[1]})),je=s.d.div.withConfig({displayName:"MyConversationsstyle__ConversationList",componentId:"sc-1yz4vv5-1"})(["overflow-y:auto;overflow-y:overlay;display:flex;flex-direction:column;"]),Ne=s.d.div.withConfig({displayName:"MyConversationsstyle__Title",componentId:"sc-1yz4vv5-2"})(["display:flex;justify-content:space-between;align-items:center;margin:",";font-size:",";font-weight:",";color:",";"],(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.colors.onPrimary})),Te=s.d.span.withConfig({displayName:"MyConversationsstyle__AddButton",componentId:"sc-1yz4vv5-3"})(["cursor:pointer;font-size:0px;align-self:center;cursor:pointer;"]),De=Object(L.a)([function(e){return e.conversationMembers}],(function(e){return e.byId})),Se=Object(q.d)(),ke=Object(q.h)(),ze=Object(L.a)([function(e){return e.memberPresence}],(function(e){return e.byId})),Ae=s.d.div.withConfig({displayName:"UserInitialsAvatar__Wrapper",componentId:"sc-1u1npiv-0"})(["vertical-align:middle;border-radius:",";width:","px;height:","px;line-height:","px;font-size:","px;font-family:",";font-weight:",";text-transform:uppercase;text-align:center;color:",";background-color:",";"],(function(e){return e.theme.radii.round}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return Math.round(e.size/3)}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.avatarText}),(function(e){return e.color})),Le=function(e){var t=e.name,n=e.userId,o=e.size,c=(e.muted,e.color),i=Object(r.useContext)(s.a),u=t.match(/\b\w/g)||[],l=_e(n,i.colors.avatars);return a.a.createElement(Ae,{size:o,color:c||l},u)},Re=function(e){return{type:"SELECT_USER",payload:{selectedUserId:e}}},Me={selectedUserId:""},We=Object(L.a)((function(e){return e.userDetail}),(function(e){return e.selectedUserId})),Ue=function(){return{type:f.USER_DETAIL_VIEW_DISPLAYED}},Ve=function(){return{type:f.RTC_VIEW_DISPLAYED}},Pe=function(){return{type:f.CURRENT_CONVERSATION_VIEW_DISPLAYED}},He=function(){return{type:f.MENU_VIEW_HIDDEN}},qe=function(){return{type:f.JOIN_CONVERSATION_VIEW_HIDDEN}},Ge=function(){return{type:f.CONVERSATION_MEMBERS_VIEW_HIDDEN}},Be=s.d.div.withConfig({displayName:"MemberDescriptionstyle__Wrapper",componentId:"sc-1vktazh-0"})(["display:flex;align-items:center;height:",";padding:",";:hover{background:",";}"],(function(e){return e.theme.sizes[2]}),(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[6])}),(function(e){return e.theme.backgrounds.panelHover})),Fe=s.d.div.withConfig({displayName:"MemberDescriptionstyle__PresenceDot",componentId:"sc-1vktazh-1"})(["border-radius:",";width:","px;height:","px;top:-","px;right:-","px;position:absolute;background-color:",";font-size:0px;"],(function(e){return e.theme.radii.round}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/2}),(function(e){return e.size/2}),(function(e){var t=e.theme;return e.presence?t.colors.success:t.colors.inactive})),Qe=s.d.div.withConfig({displayName:"MemberDescriptionstyle__Avatar",componentId:"sc-1vktazh-2"})(["width:",";height:",";position:relative;"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]})),Ye=s.d.div.withConfig({displayName:"MemberDescriptionstyle__About",componentId:"sc-1vktazh-3"})(["display:flex;flex-direction:column;justify-content:space-between;padding-left:",";height:",";"],(function(e){return e.theme.space[6]}),(function(e){return e.theme.sizes[1]})),Je=s.d.div.withConfig({displayName:"MemberDescriptionstyle__UserName",componentId:"sc-1vktazh-4"})(["font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";cursor:pointer;"],(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText})),Ke=s.d.div.withConfig({displayName:"MemberDescriptionstyle__UserTitle",componentId:"sc-1vktazh-5"})(["font-family:",";font-weight:",";font-size:",";color:",";"],(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.normalText})),Ze=function(e){var t=e.user,n=e.you,r=Object(b.b)();return a.a.createElement(Be,null,a.a.createElement(Qe,null,a.a.createElement(Le,{size:36,name:t.name,userId:t.id,muted:!t.presence}),t.presence&&a.a.createElement(Fe,{presence:t.presence,size:7})),a.a.createElement(Ye,null,a.a.createElement(Je,{muted:!t.presence,onClick:function(){r(Re(t.id)),r(Ue())}},t.name,n&&" (you)"),a.a.createElement(Ke,{muted:!t.presence},t.custom.title)))},Xe=function(e){var t=e.title,n=e.color;return a.a.createElement("svg",{width:16,height:16},a.a.createElement("title",null,t),a.a.createElement("g",{stroke:n,strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("path",{d:"M1 1l13.2 13.2M14.2 1L1 14.2"})))},$e=n(13),et=Object(s.d)($e.a.section).withConfig({displayName:"ConversationMembersstyle__Wrapper",componentId:"sc-14b0zjt-0"})(["display:none;flex-direction:column;position:fixed;z-index:100;margin-left:",";width:100%;max-width:none;height:100%;background:",";","{position:relative;min-width:",";max-width:",";}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.sizes[5]}),(function(e){return e.theme.sizes[5]})),tt=s.d.div.withConfig({displayName:"ConversationMembersstyle__Controls",componentId:"sc-14b0zjt-1"})(["display:flex;align-items:center;justify-content:flex-end;position:absolute;top:0;min-height:",";padding:",";width:100%;"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[6])})),nt=s.d.div.withConfig({displayName:"ConversationMembersstyle__Header",componentId:"sc-14b0zjt-2"})(["display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;min-height:",";padding:",";padding-bottom:0;color:",";font-size:",";font-weight:",";"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.space[6]}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fontWeights.medium})),rt=s.d.div.withConfig({displayName:"ConversationMembersstyle__IconWrapper",componentId:"sc-14b0zjt-3"})(["display:flex;align-items:center;"]),at=s.d.div.withConfig({displayName:"ConversationMembersstyle__ConversationIcon",componentId:"sc-14b0zjt-4"})(["border-radius:",";width:",";height:",";line-height:",";font-family:",";font-weight:",";font-size:",";color:",";text-align:center;background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.color})),ot=s.d.div.withConfig({displayName:"ConversationMembersstyle__Details",componentId:"sc-14b0zjt-5"})(["height:",";padding-left:",";display:flex;flex-direction:column;justify-content:center;"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.space[6]})),ct=s.d.div.withConfig({displayName:"ConversationMembersstyle__Channel",componentId:"sc-14b0zjt-6"})(["font-weight:",";font-size:",";color:",";"],(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText})),it=s.d.div.withConfig({displayName:"ConversationMembersstyle__Title",componentId:"sc-14b0zjt-7"})(["font-weight:",";font-size:",";color:",";padding:",";"],(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])})),st=s.d.span.withConfig({displayName:"ConversationMembersstyle__CloseIcon",componentId:"sc-14b0zjt-8"})(["cursor:pointer;"]),ut=s.d.span.withConfig({displayName:"ConversationMembersstyle__ScrollableView",componentId:"sc-14b0zjt-9"})(["overflow-y:scroll;"]),lt=(s.d.div.withConfig({displayName:"ConversationMembersstyle__BackIconWrapper",componentId:"sc-14b0zjt-10"})(["cursor:pointer;display:flex;margin-right:",";justify-self:flex-start;","{display:none;}"],(function(e){return e.theme.space[7]}),(function(e){return e.theme.mediaQueries.medium})),function(e,t){return{open:{x:e?"0px":"0%",display:"flex"},closed:{x:e?t:"-100%",transitionEnd:{display:"none"}}}}),dt=n(19),ft=function(e){var t=e.title,n=e.active,o=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:20,height:15},a.a.createElement("title",null,t),a.a.createElement("g",{fill:n?o.colors.active:o.colors.normalText,fillRule:"evenodd"},a.a.createElement("path",{d:"M7 13.503a.5.5 0 00.5.497h11a.5.5 0 00.5-.497c-.001-.035-.032-.895-.739-1.734C17.287 10.612 15.468 10 13 10s-4.287.612-5.261 1.768c-.707.84-.738 1.699-.739 1.734M18.5 15h-11c-.827 0-1.5-.673-1.5-1.5 0-.048.011-1.19.924-2.315.525-.646 1.241-1.158 2.128-1.522C10.123 9.223 11.452 9 13 9s2.876.223 3.948.662c.887.364 1.603.876 2.128 1.522.914 1.125.924 2.267.924 2.315 0 .827-.673 1.5-1.5 1.5M13 1c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 7c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4M4.5 15h-3C.673 15 0 14.327 0 13.5c0-.037.008-.927.663-1.8.378-.505.894-.904 1.533-1.188.764-.34 1.708-.512 2.805-.512.179 0 .356.005.527.014a.5.5 0 01-.053.999 9.1 9.1 0 00-.473-.012c-3.894 0-3.997 2.379-4 2.503a.5.5 0 00.5.497h3a.5.5 0 010 1L4.5 15zM5 4c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2m0 5C3.346 9 2 7.654 2 6s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3"})))},mt=s.d.div.withConfig({displayName:"ConversationOccupancystyle__Wrapper",componentId:"sc-1trbjq4-0"})(["display:flex;align-items:center;align-self:flex-start;cursor:pointer;flex-direction:column-reverse;margin-left:",";color:",";font-family:",";font-weight:",";font-size:",";","{flex-direction:row;}"],(function(e){return e.theme.space[6]}),(function(e){var t=e.theme;return e.highlighted?t.colors.active:t.colors.normalText}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.light}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.mediaQueries.medium})),pt=s.d.section.withConfig({displayName:"ConversationOccupancystyle__OccupancyNumber",componentId:"sc-1trbjq4-1"})(["cursor:pointer;margin-right:",";margin-top:",";","{margin-right:",";margin-top:",";}em{font-style:normal;font-family:",";font-weight:",";}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[3]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.black})),gt=s.d.span.withConfig({displayName:"ConversationOccupancystyle__IconWrapper",componentId:"sc-1trbjq4-2"})(["cursor:pointer;"]),ht=Object(L.a)([le,De,ze],(function(e,t,n){var r=t[e],a=n[e];return{joinedCount:r?r.length:0,presentCount:a?a.occupancy:0}})),bt=function(){var e=Object(b.c)(ht),t=e.joinedCount,n=e.presentCount,r=Object(b.c)(oe).ConversationMembers,o=Object(b.b)();return a.a.createElement(mt,{highlighted:r,onClick:function(){o(r?Ge():{type:f.CONVERSATION_MEMBERS_VIEW_DISPLAYED})}},a.a.createElement(pt,null,a.a.createElement("em",null,n)," | ",t),a.a.createElement(gt,null,a.a.createElement(ft,{title:r?"Hide members list":"Show convsersation members",active:r})))},yt=s.d.section.withConfig({displayName:"Headerstyle__Wrapper",componentId:"atjq96-0"})(["display:flex;flex-direction:column;width:100%;min-height:",";justify-content:space-between;background:",";padding:",";padding-bottom:0px;","{background:transparent;}"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.backgrounds.panel}),(function(e){var t=e.theme;return"".concat(t.space[7]," ").concat(t.space[6])}),(function(e){return e.theme.mediaQueries.medium})),vt=s.d.div.withConfig({displayName:"Headerstyle__BackIconWrapper",componentId:"atjq96-1"})(["cursor:pointer;display:flex;margin-right:",";","{display:none;}"],(function(e){return e.theme.space[7]}),(function(e){return e.theme.mediaQueries.medium})),Et=s.d.div.withConfig({displayName:"Headerstyle__Body",componentId:"atjq96-2"})(["display:flex;align-items:center;justify-content:space-between;height:",";width:100%;"],(function(e){return e.theme.sizes[1]})),Ct=s.d.div.withConfig({displayName:"Headerstyle__Border",componentId:"atjq96-3"})(["display:none;border-bottom:",";","{display:inherit;}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[2])}),(function(e){return e.theme.mediaQueries.medium})),It=s.d.div.withConfig({displayName:"Headerstyle__Information",componentId:"atjq96-4"})(["display:flex;flex-direction:column;height:100%;"]),_t=s.d.div.withConfig({displayName:"Headerstyle__Name",componentId:"atjq96-5"})(["flex-grow:1;color:",";font-size:",";font-family:",";font-weight:",";text-transform:capitalize;"],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Ot=s.d.div.withConfig({displayName:"Headerstyle__Description",componentId:"atjq96-6"})(["flex-grow:1;color:",";font-size:",";font-family:",";font-weight:",";text-transform:capitalize;"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular})),wt=function(e){var t=e.title,n=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:12,height:22},a.a.createElement("title",null,t),a.a.createElement("path",{d:"M3.621 11l7.94-7.94A1.5 1.5 0 009.439.94l-9 9a1.5 1.5 0 000 2.12l9 9a1.5 1.5 0 002.122-2.12L3.62 11z",fill:n.colors.active,fillRule:"nonzero"}))},xt=Object(L.a)([me,le],(function(e,t){return Object(A.a)({},e[t])})),jt=function(){var e=Object(b.c)(xt),t=Object(b.b)();return a.a.createElement(yt,null,a.a.createElement(Et,null,a.a.createElement(vt,{onClick:function(){t({type:f.MENU_VIEW_DISPLAYED})}},a.a.createElement(wt,{title:"back"})),a.a.createElement(It,null,a.a.createElement(_t,null,e.name),a.a.createElement(Ot,null,e.description)),a.a.createElement(bt,null)),a.a.createElement(Ct,null))},Nt=Object(L.a)([K,le,De,ze],(function(e,t,n,r){var a=r[t];return n[t]?n[t].map((function(t){return Object(A.a)(Object(A.a)({},e[t.id]),{},{presence:!!a&&a.occupants.filter((function(e){return e.uuid===t.id})).length>0})})):[]})),Tt=function(){var e=Object(b.c)(V),t=Object(b.c)(Nt),n=Object(b.c)(le),o=Object(b.b)(),c=Object(dt.b)(),i=Object(b.c)(oe),u=Object(r.useContext)(s.a),l=Oe(u.mediaQueries.medium),d=Object(b.c)(xt),f=_e(d.name||e,u.colors.avatars);return Object(r.useEffect)((function(){0===t.length&&(o(Object(q.o)({spaceId:n,include:{userFields:!0,customUserFields:!0,totalCount:!1}})),o(Object(q.n)({channels:[n]})))}),[t,n,c,o]),a.a.createElement(et,{animate:i.ConversationMembers?"open":"closed",variants:lt(l,u.sizes[4]),transition:{ease:"linear",duration:.15}},a.a.createElement(tt,null,a.a.createElement(st,{onClick:function(){o(Ge())}},a.a.createElement(Xe,{color:u.colors.normalText,title:"close members list"}))),a.a.createElement(nt,null,a.a.createElement(rt,null,a.a.createElement(at,{color:f},"#"),a.a.createElement(ot,null,a.a.createElement(ct,null,d.name)))),a.a.createElement(it,null,"Members"),a.a.createElement(ut,null,function(e){return e.sort((function(e,t){return e.presence===t.presence?0:e.presence?-1:1}))}(t).map((function(t){return a.a.createElement(Ze,{user:t,key:t.id,you:t.id===e})}))))},Dt=Object(L.a)([me,V,G],(function(e,t,n){return n[t]?n[t].map((function(t){return{id:t.id,name:e[t.id].name}})):[]})),St=function(){var e=Object(b.c)(V),t=Object(b.c)(me),n=Object(b.c)(Dt),r=Object(b.c)(le),o=Object(b.c)(Nt),c=Object(b.b)();return void 0===t?a.a.createElement("div",null,"Loading..."):a.a.createElement(xe,null,a.a.createElement(Ne,null,"Conversations",a.a.createElement(Te,{onClick:function(){c(Object(q.q)()),c({type:f.JOIN_CONVERSATION_VIEW_DISPLAYED})}},a.a.createElement(ge,{title:"Join conversation"}))),a.a.createElement(je,null,n.map((function(t){return a.a.createElement(we,{id:t.id,name:t.name,onLeave:function(){var n,r;c((n=e,r=t.id,function(e,t,a){return r===ie?Promise.resolve():e(Object(q.t)({userId:n,spaces:[{id:r}]})).then((function(){a.pubnub.api.unsubscribe({channels:[r]}),e(se(ie))}))}))},selected:t.id===r,key:t.id,unreadMessageCount:0,onClick:function(){c(se(t.id)),c(Pe()),c(He()),0===o.length&&c(Object(q.o)({spaceId:t.id,include:{userFields:!0,customUserFields:!0,totalCount:!1}}))}})})),a.a.createElement(we,{id:e,name:"Direct Messages",onLeave:function(){},selected:e===r,key:e,unreadMessageCount:0,onClick:function(){c(se(e)),c(Pe()),c(He())}})))},kt=Object(s.d)($e.a.section).withConfig({displayName:"Menustyle__Wrapper",componentId:"sc-165ibz1-0"})(["flex-direction:column;z-index:100;width:100%;max-width:none;background:",";","{min-width:",";max-width:",";}"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.sizes[4]}),(function(e){return e.theme.sizes[4]})),zt=s.d.div.withConfig({displayName:"Menustyle__Controls",componentId:"sc-165ibz1-1"})(["display:flex;align-items:center;justify-content:flex-end;position:absolute;top:0;min-height:",";padding:",";width:100%;"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[6])})),At=s.d.span.withConfig({displayName:"Menustyle__CloseIcon",componentId:"sc-165ibz1-2"})(["cursor:pointer;","{display:none;}"],(function(e){return e.theme.mediaQueries.medium})),Lt=(s.d.img.withConfig({displayName:"Menustyle__Img",componentId:"sc-165ibz1-3"})(["align-self:flex-end;margin-top:auto;max-width:100%;"]),function(e,t){return{open:{x:"0%",display:"flex"},closed:{x:e?"-".concat(t):"-100%",transitionEnd:{display:"none"}}}}),Rt=function(){return a.a.createElement("svg",{height:"100%",viewBox:"0 0 60 60"},a.a.createElement("g",{id:"Team-Chat",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.a.createElement("rect",{id:"Rectangle",fill:"#DE2440",x:0,y:0,width:60,height:60,rx:10}),a.a.createElement("path",{d:"M17.8154297,40 L17.8154297,31.0058594 L21.8730469,31.0058594 C23.9726562,31.0058594 25.6108398,30.5493164 26.7875977,29.6362305 C27.9643555,28.7231445 28.5527344,27.2265625 28.5527344,25.1464844 C28.5527344,23.2128906 28.003418,21.8041992 26.9047852,20.9204102 C25.8061523,20.0366211 24.0556641,19.5947266 21.6533203,19.5947266 L21.6533203,19.5947266 L14.6074219,19.5947266 L14.6074219,40 L17.8154297,40 Z M21.2431641,28.5742188 L17.8154297,28.5742188 L17.8154297,22.0263672 L21.2431641,22.0263672 C22.6591797,22.0263672 23.6821289,22.2558594 24.3120117,22.7148438 C24.9418945,23.1738281 25.2568359,23.984375 25.2568359,25.1464844 C25.2568359,26.4648438 24.9272461,27.3657227 24.2680664,27.8491211 C23.6088867,28.3325195 22.6005859,28.5742188 21.2431641,28.5742188 L21.2431641,28.5742188 Z M35.0859375,40 L35.0859375,27.2558594 C35.3691406,27.1484375 35.8671875,27.0043945 36.5800781,26.8237305 C37.2929688,26.6430664 38.0791016,26.5527344 38.9384766,26.5527344 C40.2763672,26.5527344 41.2260742,26.8798828 41.7875977,27.5341797 C42.3491211,28.1884766 42.6298828,29.2236328 42.6298828,30.6396484 L42.6298828,30.6396484 L42.6298828,40 L45.75,40 L45.75,29.3212891 C45.75,27.6025391 45.1689453,26.3330078 44.0068359,25.5126953 C42.8447266,24.6923828 41.1845703,24.2822266 39.0263672,24.2822266 C38.2451172,24.2822266 37.4736328,24.3359375 36.7119141,24.4433594 C35.9501953,24.5507812 35.2495117,24.675293 34.6098633,24.8168945 C33.9702148,24.9584961 33.4208984,25.0976562 32.9619141,25.234375 L32.9619141,25.234375 L31.9804688,25.5419922 L31.9804688,40 L35.0859375,40 Z",id:"Pn",fill:"#FFFFFF",fillRule:"nonzero"})))},Mt=function(e){var t=e.title,n=e.active,o=e.size,c=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:o,height:o},a.a.createElement("title",null,t),a.a.createElement("circle",{cx:o/2,cy:o/2,r:o/2,fill:n?c.colors.success:c.colors.inactive,fillRule:"evenodd"}))},Wt=s.d.span.withConfig({displayName:"NetworkStatusstyle__Wrapper",componentId:"sc-4dza69-0"})(["height:","px;width:","px;display:flex;"],(function(e){return e.size}),(function(e){return e.size})),Ut=function(e){var t=e.size,n=Object(b.c)((function(e){return e.networkStatus.isConnected}));return a.a.createElement(Wt,{size:t},a.a.createElement(Mt,{size:t,title:n?"connected":"not connected",active:n}))},Vt=s.d.div.withConfig({displayName:"MyUserDetailsstyle__Wrapper",componentId:"sc-9uhamr-0"})(["display:flex;align-items:center;padding-bottom:0px;text-transform:capitalize;"]),Pt=s.d.div.withConfig({displayName:"MyUserDetailsstyle__UserName",componentId:"sc-9uhamr-1"})(["font-size:",";font-family:",";font-weight:",";color:",";padding-right:",";"],(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.space[1]})),Ht=function(){var e=Object(b.c)(V),t=Object(b.c)(K)[e];return void 0===t?a.a.createElement("div",null,"Loading..."):a.a.createElement(Vt,null,a.a.createElement(Pt,null,t.name),a.a.createElement(Ut,{size:7}))};function qt(){var e=Object(i.a)(["\n  color: ",";\n  font-size: ",";\n  font-family: ",";\n  font-weight: ",";\n"]);return qt=function(){return e},e}function Gt(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: ",";\n  min-height: ",";\n  justify-content: space-between;\n"]);return Gt=function(){return e},e}function Bt(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  height: ",";\n  width: 100%;\n  padding: ",";\n  padding-bottom: 0px;\n"]);return Bt=function(){return e},e}var Ft,Qt=s.d.div(Bt(),(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.space[6]})),Yt=s.d.div(Gt(),(function(e){return e.theme.space[4]}),(function(e){return e.theme.sizes[1]})),Jt=s.d.span(qt(),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Kt=function(){var e=Object(r.useContext)(s.a);return a.a.createElement(Qt,null,a.a.createElement(Rt,null),a.a.createElement(Yt,null,a.a.createElement(Jt,null,e.custom.companyName),a.a.createElement(Ht,null)))},Zt=function(){var e=Object(r.useRef)(null),t=Object(b.c)(oe),n=Object(r.useContext)(s.a),o=Oe(n.mediaQueries.medium),c=Object(b.b)();return a.a.createElement(kt,{ref:e,animate:t.Menu||o?"open":"closed",variants:Lt(o,n.sizes[4])},a.a.createElement(zt,null,a.a.createElement(At,{onClick:function(){return c(He())}},a.a.createElement(Xe,{color:n.colors.onPrimary,title:"close conversations"}))),a.a.createElement(Kt,null),a.a.createElement(St,null))},Xt=Object(s.d)($e.a.section).withConfig({displayName:"CurrentConversationstyle__Wrapper",componentId:"sc-1a1khwv-0"})(["display:flex;flex-direction:column;position:fixed;z-index:0;margin:",";width:100%;height:100%;background:",";border:",";","{position:static;}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.content}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.mediaQueries.medium})),$t=(s.d.div.withConfig({displayName:"CurrentConversationstyle__Body",componentId:"sc-1a1khwv-1"})(["display:flex;flex-direction:column;margin:",";margin-top:",";height:100%;"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[0]})),{open:{display:"flex"},closed:{transitionEnd:{display:"none"}}}),en=n(18),tn=s.d.div.withConfig({displayName:"MessageListItemstyle__Wrapper",componentId:"ndpiy0-0"})(["display:flex;flex-direction:row;flex-shrink:0;padding:",";","{padding:",";}:hover{background-color:",";}:first-child{margin-top:auto;}:last-child{padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[5])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.backgrounds.contentHover}),(function(e){return e.theme.space[4]})),nn=s.d.div.withConfig({displayName:"MessageListItemstyle__Body",componentId:"ndpiy0-1"})(["display:flex;flex-direction:column;margin-left:",";"],(function(e){return e.theme.space[5]})),rn=s.d.div.withConfig({displayName:"MessageListItemstyle__Header",componentId:"ndpiy0-2"})(["margin:",";margin-bottom:",";"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[1]})),an=(s.d.div.withConfig({displayName:"MessageListItemstyle__Content",componentId:"ndpiy0-3"})(["white-space:pre-wrap;width:fit-content;padding:",";font-size:",";font-family:",";font-weight:",";border-radius:",";border-top-left-radius:",";text-align:left;background:",";color:",";","{font-size:",";}"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.backgrounds.message}),(function(e){return e.theme.colors.messageText}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.fontSizes.regular})),s.d.div.withConfig({displayName:"MessageListItemstyle__Avatar",componentId:"ndpiy0-4"})(["width:",";height:",";"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}))),on=s.d.span.withConfig({displayName:"MessageListItemstyle__SenderName",componentId:"ndpiy0-5"})(["font-size:",";font-family:",";font-weight:",";text-transform:capitalize;color:",";cursor:",";&:hover{text-decoration:",";}"],(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.colors.importantText}),(function(e){e.theme;return e.showDetails?"pointer":"default"}),(function(e){e.theme;return e.showDetails?"underline":"default"})),cn=s.d.span.withConfig({displayName:"MessageListItemstyle__TimeSent",componentId:"ndpiy0-6"})(["font-size:",";font-family:",";font-weight:",";margin-left:",";color:",";"],(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.light}),(function(e){return e.theme.space[3]}),(function(e){return e.theme.colors.importantText})),sn=s.d.div.withConfig({displayName:"TextMessageDisplaystyle__Content",componentId:"sc-1ljf31d-0"})(["white-space:pre-wrap;border-radius:",";border-top-left-radius:",";padding:",";width:fit-content;line-height:1.5;font-size:",";font-family:",";font-weight:",";text-align:left;background:",";box-shadow:",";color:",";"],(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.space[4]}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.backgrounds.message}),(function(e){return e.theme.shadows[0]}),(function(e){return e.theme.colors.messageText})),un=function(e){var t=e.message;return a.a.createElement(sn,null,t.text)},ln=s.d.div.withConfig({displayName:"RtcMessageDisplaystyle__Content",componentId:"avtxli-0"})(["white-space:pre-wrap;border-radius:",";border-top-left-radius:",";padding:",";width:fit-content;line-height:1.5;font-size:",";font-family:",";font-weight:",";text-align:left;background:",";box-shadow:",";color:",";"],(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.space[4]}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.backgrounds.message}),(function(e){return e.theme.shadows[0]}),(function(e){return e.theme.colors.messageText}));!function(e){e.Text="text",e.RtcCall="rtc-signal",e.RtcIce="rtc-ice"}(Ft||(Ft={}));var dn,fn,mn=Object(q.f)(),pn=Object(L.a)([function(e){return e.messages}],(function(e){return e.byId})),gn=function(e){var t=e.message;return t.type===Ft.RtcIce?a.a.createElement(ln,null,"Ice - ",t.iceSignalType," - ",JSON.stringify(t)):a.a.createElement(ln,null,"Signal - from: ",t.senderId," - ",t.callSignalType," - startTime: ",t.startTime)},hn=function(e){var t=e.message;switch(t.type){case Ft.Text:return a.a.createElement(un,{message:t});case Ft.RtcIce:case Ft.RtcCall:return a.a.createElement(gn,{message:t});default:M()(!1,'No component available for displaying message of type "'.concat(t.type,'"'))}},bn=function(e){var t=e.messageFragment,n=e.avatar,r=Object(b.b)(),o=t.sender,c=Object(b.c)(K),i=!1;if(t.sender&&t.sender.id){var s=c[t.sender.id];i=void 0!==s}return a.a.createElement(tn,null,a.a.createElement(an,null,n),a.a.createElement(nn,null,a.a.createElement(rn,null,a.a.createElement(on,{showDetails:i,onClick:function(){i&&(r(Re(t.sender.id)),r(Ue()))}},o.name),a.a.createElement(cn,null,function(e){var t=new Date(parseInt(e)/1e4),n=t.getMinutes();return"".concat(t.getHours(),":").concat(n>9?n:"0"+n)}(t.timetoken))),a.a.createElement(hn,{message:t.message})))},yn=s.d.div.withConfig({displayName:"MessageListstyle__Wrapper",componentId:"w5jskt-0"})(["display:flex;flex-grow:1;flex-direction:column;overflow-y:scroll;height:100%;"]),vn=function(){var e=Object(b.c)(V),t=function(e){return{sender:{id:"PUBNUB-BOT",name:"PubNub Bot"},timetoken:"15735897955841496",message:{type:Ft.Text,senderId:"PUBNUB-BOT",text:"Welcome to Team Chat. \ud83d\udc4b\ud83d\udc4b \nWe logged you in as ".concat((t=e,t.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),". \nSend a message now to start interacting with other users in the app. \u2b07\ufe0f")}};var t}(Object(b.c)(K)[e].name);return a.a.createElement(bn,{messageFragment:t,key:t.timetoken,avatar:a.a.createElement(Le,{size:36,name:"P N",userId:t.sender.id,color:"#DE2440"})})},En=Object(L.a)([pn,le,K],(function(e,t,n){return e[t]?Object.values(e[t]).filter((function(e){return e.channel===t})).map((function(e){return Object(A.a)(Object(A.a)({},e),{},{timetoken:String(e.timetoken),sender:n[e.message.senderId]||(e.message.senderId?{id:e.message.senderId,name:e.message.senderId}:{id:"unknown",name:"unknown"})})})):[]})),Cn=function(){var e=Object(b.c)(le),t=Object(r.useState)({}),n=Object(h.a)(t,2),o=n[0],c=n[1],i=Object(r.useCallback)((function(e){var t=o[e];t&&u.current.scrollTo(0,t)}),[e]),s=Object(b.c)(En),u=Object(r.useRef)(document.createElement("div")),l=u.current,d=Object(r.useCallback)((function(){return l.scrollTop=l.scrollHeight-l.clientHeight}),[l]),f=l.scrollHeight-l.clientHeight===l.scrollTop;return Object(r.useEffect)((function(){f&&d()}),[s.length,f,d]),Object(r.useEffect)((function(){i(e)}),[i,e]),a.a.createElement(yn,{ref:u,onScroll:function(t){var n=t.target.scrollTop;0!==n&&function(t){c(Object(A.a)(Object(A.a)({},o),{},Object(en.a)({},e,t)))}(n)}},a.a.createElement(vn,null),s.map((function(e){return a.a.createElement(bn,{messageFragment:e,key:e.timetoken,avatar:a.a.createElement(Le,{size:36,name:e.sender.name,userId:e.sender.id})})})))},In=n(76),_n=n(75),On={messageDraftById:{}},wn=Object(L.a)([function(e){return e.drafts}],(function(e){return e.messageDraftById})),xn=function(e){return function(t,n){var r=n();return t(Object(q.v)({channel:le(r),message:{type:e}}))}},jn=(n(50),function(e,t){return e&&e.current&&e.current.contains(t.target)}),Nn=function(e,t){var n=Object(r.useCallback)((function(n){if("length"in e){if(r=function(e){return jn(e,n)},e.reduce((function(e,t){return e||r(t)}),!1))return}else if(jn(e,n))return;var r;t()}),[t,e]);return Object(r.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[n]),e},Tn=n(22),Dn=function(e){var t=e.title,n=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:18,height:18},a.a.createElement("title",null,t),a.a.createElement("g",{fill:n.colors.importantText,fillRule:"evenodd"},a.a.createElement("path",{d:"M9 .947C4.56.947.947 4.56.947 9c0 4.441 3.613 8.053 8.053 8.053 4.44 0 8.053-3.612 8.053-8.053C17.053 4.56 13.44.947 9 .947M9 18a8.943 8.943 0 01-6.364-2.636A8.937 8.937 0 010 9.001c0-2.404.936-4.664 2.636-6.364A8.939 8.939 0 019 0a8.94 8.94 0 016.364 2.637A8.94 8.94 0 0118 9a8.94 8.94 0 01-2.636 6.363A8.942 8.942 0 019 18"}),a.a.createElement("path",{d:"M13.957 6.632h-3.282a1.877 1.877 0 01-.217-1.32l.003-.01c.04-.199.112-.389.215-.565h3.282c.167.287.253.61.253.947 0 .337-.087.66-.253.948zm-6.631 0H4.043a1.877 1.877 0 01-.253-.948c0-.336.087-.661.253-.947h3.283c.102.176.174.366.215.564l.003.012a1.886 1.886 0 01-.217 1.319h-.001zm7.263-2.654a.473.473 0 00-.379-.19h-3.789a.475.475 0 00-.379.19 2.833 2.833 0 00-.406.758h-1.27a2.841 2.841 0 00-.408-.759.473.473 0 00-.38-.19H3.79a.475.475 0 00-.379.19 2.817 2.817 0 00-.568 1.706c0 .622.197 1.211.568 1.706.09.12.23.19.38.19h3.789c.149 0 .289-.07.379-.19a2.816 2.816 0 00.568-1.705h.948c0 .62.197 1.21.568 1.706.09.12.23.19.379.19h3.79c.148 0 .288-.07.378-.19a2.816 2.816 0 00.569-1.705c0-.62-.197-1.21-.569-1.706v-.001zM9 15.158a6.162 6.162 0 01-6.074-5.133.474.474 0 01.935-.157 5.192 5.192 0 005.138 4.342c.916 0 1.817-.241 2.605-.698a.474.474 0 01.475.82A6.158 6.158 0 019 15.156v.002z"})))},Sn=s.d.div.withConfig({displayName:"EmojiInputstyle__Wrapper",componentId:"sc-2q6xsd-0"})(["align-self:flex-end;"]),kn=s.d.div.withConfig({displayName:"EmojiInputstyle__Dialog",componentId:"sc-2q6xsd-1"})(["position:absolute;bottom:0;right:0;"]),zn=s.d.div.withConfig({displayName:"EmojiInputstyle__EmojiButton",componentId:"sc-2q6xsd-2"})(["cursor:pointer;svg{vertical-align:top;}"]),An=function(e){var t=e.value,n=e.onSelection,o=Object(r.useState)(!1),c=Object(h.a)(o,2),i=c[0],u=c[1],l=Object(r.useRef)(null),d=Object(r.useContext)(s.a),f=Object(r.useCallback)((function(){u(!1)}),[u]);Nn([l],f);return a.a.createElement(Sn,{ref:l},a.a.createElement(kn,null,i&&a.a.createElement(Tn.a,{emoji:"",title:"",native:!0,onSelect:function(e){"native"in e&&(n("".concat(t).concat(e.native)),f())},darkMode:d.custom.dark,color:d.colors.active})),a.a.createElement(zn,{onClick:function(){u(!i)}},a.a.createElement(Dn,{title:"Open emoji selector"})))},Ln=s.d.div.withConfig({displayName:"EmojiSuggestionstyle__Popup",componentId:"sc-31hpud-0"})(["position:relative;"]),Rn=s.d.section.withConfig({displayName:"EmojiSuggestionstyle__Suggestions",componentId:"sc-31hpud-1"})(["position:absolute;bottom:0;overflow-y:scroll;z-index:100;max-height:",";border:",";border-radius:",";color:",";"],(function(e){return e.theme.sizes[4]}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.colors.importantText})),Mn=s.d.div.withConfig({displayName:"EmojiSuggestionstyle__Heading",componentId:"sc-31hpud-2"})(["border-top-left-radius:",";border-top-right-radius:",";border-bottom:",";padding:",";font-size:",";background:",";"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.backgrounds.panel})),Wn=s.d.span.withConfig({displayName:"EmojiSuggestionstyle__EmojiSearchTerm",componentId:"sc-31hpud-3"})(["font-weight:",";"],(function(e){return e.theme.fontWeights.bold})),Un=s.d.div.withConfig({displayName:"EmojiSuggestionstyle__Results",componentId:"sc-31hpud-4"})(["display:flex;flex-direction:row;flex-wrap:wrap;border-bottom-left-radius:",";border-bottom-right-radius:",";padding:",";background:",";","{flex-direction:column;flex-wrap:nowrap;}"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium})),Vn=s.d.span.withConfig({displayName:"EmojiSuggestionstyle__Result",componentId:"sc-31hpud-5"})(["cursor:pointer;flex-grow:0;border-radius:",";padding:",";font-size:",";&:hover{background-color:",";color:",";}","{padding:",";flex-grow:1;}"],(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[2])}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.active}),(function(e){return e.theme.colors.activeText}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[2]})),Pn=s.d.span.withConfig({displayName:"EmojiSuggestionstyle__Emoji",componentId:"sc-31hpud-6"})(["font-size:",";"],(function(e){return e.theme.fontSizes.regular})),Hn=s.d.span.withConfig({displayName:"EmojiSuggestionstyle__Colons",componentId:"sc-31hpud-7"})(["padding-right:0.5em;font-size:",";"],(function(e){return e.theme.fontSizes.small})),qn=function(e){var t=e.value,n=e.onSelection,o=Object(r.useRef)(null),c=Oe(Object(r.useContext)(s.a).mediaQueries.medium),i=!1,u=function(e){var t="",n=e.match(/:([a-z_]+)(:)?/);if(n)if(void 0!==n[2]){var r=Tn.b.emojis[n[1]];if(r&&"native"in r)e=e.replace(n[0],r.native),t="";else{var a=Tn.b.search(n[1]);a[0]&&"native"in a[0]&&(e=e.replace(n[0],a[0].native)),t=""}}else n[1].length>1?t=n[1]:n[1]&&(t="");return t}(t),l=function(e){return Tn.b.search(e)}(u);return i=""!==u&&l.length>0,Nn([o],(function(){i=!1})),a.a.createElement(Ln,null,i&&a.a.createElement(Rn,{ref:o},a.a.createElement(Mn,null,"Suggestions for ",a.a.createElement(Wn,null,u)),a.a.createElement(Un,null,l.slice(0,c?35:7).map((function(e){return a.a.createElement(Vn,{key:e.id,onClick:function(){return function(e,r){if("native"in r){var a=t.replace(":".concat(e),r.native);n(a)}}(u,e)}},a.a.createElement(Pn,null,"native"in e&&e.native),a.a.createElement(Hn,null,e.colons))})))))},Gn=s.d.div.withConfig({displayName:"TextMessageEditorstyle__Wrapper",componentId:"sc-1n194zj-0"})(["flex-grow:1;"]),Bn=s.d.div.withConfig({displayName:"TextMessageEditorstyle__Container",componentId:"sc-1n194zj-1"})(["display:flex;align-items:center;height:auto;"]),Fn=s.d.textarea.withConfig({displayName:"TextMessageEditorstyle__TextArea",componentId:"sc-1n194zj-2"})(["flex-grow:1;resize:none;overflow:auto;border:",";max-height:",";padding:",";font-size:",";font-family:",";font-weight:",";color:",";background:",";&::placeholder{color:",";}&:focus{outline:none;}"],(function(e){return e.theme.borders.none}),(function(e){return e.theme.sizes[4]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.fontSizes.messageTextInput}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.backgrounds.content}),(function(e){return e.theme.colors.normalText})),Qn=s.d.div.withConfig({displayName:"TextMessageEditorstyle__SendButton",componentId:"sc-1n194zj-3"})(["align-self:flex-end;display:none;padding:",";margin:",";margin-left:",";border-radius:",";background-color:",";","{display:flex;}"],(function(e){return e.theme.space[1]}),(function(e){var t=e.theme;return"-".concat(t.space[1])}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.colors.primary[0]}),(function(e){return e.theme.mediaQueries.touch})),Yn=function(e){switch(e.type){case Ft.Text:return""!==e.text;default:M()(!1,'Cannot determin if message of type "'.concat(e.type,'" has been modified.'))}},Jn=function(e){var t=e.title,n=Object(r.useContext)(s.a);return a.a.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18"},a.a.createElement("title",null,t),a.a.createElement("path",{fill:"none",stroke:n.colors.onPrimary,strokeMiterlimit:10,d:"M.53,13.46V11.31c0-.74.29-1.1,1-1.15,2.17-.17,4.33-.31,6.5-.46l1.16-.11a.68.68,0,0,0,.67-.67.63.63,0,0,0-.55-.73c-1-.1-2-.16-3-.24L1.45,7.59a.84.84,0,0,1-.88-.82,40.83,40.83,0,0,1,0-5.07,1.36,1.36,0,0,1,2.07-1c2.5,1.26,5,2.54,7.48,3.82l6.14,3.14c.52.26,1,.59,1,1.23s-.45,1-1,1.26Q9.53,13.57,2.8,17A1.46,1.46,0,0,1,.53,15.64C.52,14.91.53,14.19.53,13.46Z"}))},Kn=function(e){setTimeout((function(){e.style.cssText="height:auto; padding:0",e.style.cssText="height:"+e.scrollHeight+"px"}),0)},Zn=function(e,t){return e.text===t?e:{type:Ft.Text,senderId:e.senderId,text:t}},Xn=function(e){var t=e.message,n=e.sendDraft,o=e.updateDraft,c=Oe(Object(r.useContext)(s.a).mediaQueries.touch),i=t.text,u=Object(r.useRef)(document.createElement("textarea")),l=function(e){o(Zn(t,e)),u.current.focus()};return Object(r.useEffect)((function(){Kn(u.current)}),[u]),a.a.createElement(Gn,null,a.a.createElement(qn,{value:i,onSelection:l}),a.a.createElement(Bn,null,a.a.createElement(Fn,{ref:u,rows:1,value:i,onChange:function(e){o(Zn(t,e.target.value))},onKeyPress:function(e){if("Enter"===e.key&&!e.shiftKey&&!c){var r=Zn(t,i);Yn(r)&&n(r),e.preventDefault()}Kn(e.target)},placeholder:"Type Message"}),a.a.createElement(An,{value:i,onSelection:l}),a.a.createElement(Qn,{onClick:function(){return Yn(t)&&n(t)}},a.a.createElement(Jn,{title:"Send Message"}))))},$n=s.d.div.withConfig({displayName:"MessageEditorstyle__Wrapper",componentId:"zjr6z-0"})(["display:flex;align-items:flex-end;position:relative;bottom:0;border-radius:",";border:",";padding:",";"],(function(e){return e.theme.radii.messageEditor}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderDark)}),(function(e){return e.theme.space[2]})),er=function(e){var t=e.message,n=e.sendDraft,r=e.updateDraft;switch(t.type){case Ft.Text:return a.a.createElement($n,null,a.a.createElement(Xn,{message:t,sendDraft:n,updateDraft:r}));default:M()(!1,'No editor available for draft message of type "'.concat(t.type,'"'))}},tr=s.d.div.withConfig({displayName:"MessageInputstyle__Wrapper",componentId:"sc-18oi0lf-0"})(["left:",";right:",";bottom:",";margin:",";margin-top:",";margin-bottom:",";"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[6]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[3]}));!function(e){e.ShowTypingIndicator="ti_show",e.HideTypingIndicator="ti_hide"}(dn||(dn={})),function(e){e.REMOVE_TYPING_INDICATOR="REMOVE_TYPING_INDICATOR",e.REMOVE_TYPING_INDICATOR_ALL="REMOVE_TYPING_INDICATOR_ALL"}(fn||(fn={}));var nr,rr,ar=Object(q.j)(),or={byId:{}},cr=function(e,t,n,r){var a={byId:Object(A.a)({},e.byId)};return a.byId[t]&&(a.byId[t]=a.byId[t].filter((function(e){return r?!(e.publisher===n&&e.timetoken===r):!(e.publisher===n)}))),a},ir=Object(L.a)([function(e){return e.typingIndicators}],(function(e){return e.byId})),sr=function(e){return{type:fn.REMOVE_TYPING_INDICATOR_ALL,payload:e}},ur=function(e){return{signal:function(t){t.message.type===dn.ShowTypingIndicator?setTimeout((function(){e(function(e){return{type:fn.REMOVE_TYPING_INDICATOR,payload:e}}({userId:t.publisher,channel:t.channel,timetoken:t.timetoken}))}),1e4):t.message.type===dn.HideTypingIndicator&&e(sr({userId:t.publisher,channel:t.channel}))},presence:function(t){t.action!==q.b.LEAVE&&t.action!==q.b.TIMEOUT||e(sr({userId:t.uuid,channel:t.channel}))}}},lr={},dr=Object(L.a)([wn,le],(function(e,t){return e[t]})),fr=function(){var e=Object(b.c)(le),t=Object(b.c)(V),n=Object(b.c)(dr),r={type:Ft.Text,senderId:t,text:""},o=n||r,c=Object(b.b)();return a.a.createElement(tr,null,a.a.createElement(er,{message:o,sendDraft:function(t){c(function(e){return function(t,n){var r=n();return t(Object(q.u)({channel:le(r),message:e}))}}(t)),c(function(e){return function(t){return t({type:"MESSAGE_DRAFT_DISCARDED",payload:{conversationId:e}})}}(e)),lr[e]=!1},updateDraft:function(t){c(function(e,t){return function(n){return n({type:"MESSAGE_DRAFT_UPDATED",payload:{conversationId:e,value:t}})}}(e,t)),t.text.length>0?lr[e]||(lr[e]=!0,c(xn(dn.ShowTypingIndicator)),setTimeout((function(){lr[e]=!1}),9e3)):lr[e]&&(lr[e]=!1,c(xn(dn.HideTypingIndicator)))}}))},mr=s.d.div.withConfig({displayName:"TypingIndicatorDisplaystyle__Wrapper",componentId:"sc-1s4xbtn-0"})(["padding-left:",";padding-bottom:",";font-size:",";font-family:",";font-weight:",";color:",";"],(function(e){return e.theme.space[6]}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.importantText})),pr=Object(L.a)([ir,le,K,V],(function(e,t,n,r){return e[t]?Object.values(Object.values(e[t]||[]).filter((function(e){return e.channel===t&&e.publisher!==r})).reduce((function(e,t){return e[t.publisher]=t,e}),{})).filter((function(e){return Date.now()-e.timetoken/1e4<1e4})).map((function(e){return Object(A.a)(Object(A.a)({},e),{},{timetoken:String(e.timetoken),sender:n[e.publisher||""]||(e.publisher?{id:e.publisher,name:e.publisher}:{id:"unknown",name:"unknown"})})})):[]})),gr=function(){var e=Object(b.c)(pr);return 0===e.length?a.a.createElement(mr,null,"\xa0"):1===e.length?a.a.createElement(mr,null,e[0].sender.name," is typing ..."):a.a.createElement(mr,null,"Multiple users typing ...")},hr=function(){var e=Object(b.c)(oe);return a.a.createElement(Xt,{animate:e.CurrentConversation?"open":"closed",variants:$t},a.a.createElement(jt,null),a.a.createElement(Cn,null),a.a.createElement(fr,null),a.a.createElement(gr,null))},br=s.d.div.withConfig({displayName:"ConversationDescriptionstyle__Wrapper",componentId:"sc-1roh2qq-0"})(["cursor:pointer;display:flex;justify-content:center;flex-direction:column;min-height:",";font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";:hover{background:",";}"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.backgrounds.contentHover})),yr=s.d.div.withConfig({displayName:"ConversationDescriptionstyle__Body",componentId:"sc-1roh2qq-1"})(["display:flex;max-height:",";padding:",";"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[1])})),vr=s.d.div.withConfig({displayName:"ConversationDescriptionstyle__Name",componentId:"sc-1roh2qq-2"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),Er=s.d.div.withConfig({displayName:"ConversationDescriptionstyle__Description",componentId:"sc-1roh2qq-3"})(["color:",";"],(function(e){return e.theme.colors.normalText})),Cr=s.d.div.withConfig({displayName:"ConversationDescriptionstyle__Content",componentId:"sc-1roh2qq-4"})(["display:flex;flex-direction:column;padding-left:",";justify-content:space-between;"],(function(e){return e.theme.space[5]})),Ir=(s.d.div.withConfig({displayName:"ConversationDescriptionstyle__IconWrapper",componentId:"sc-1roh2qq-5"})(["padding:",";"],(function(e){var t=e.theme;return"".concat(t.space[4]," ").concat(t.space[0])})),s.d.div.withConfig({displayName:"ConversationDescriptionstyle__ConversationIcon",componentId:"sc-1roh2qq-6"})(["border-radius:",";width:",";height:",";line-height:",";text-align:center;font-family:",";font-weight:",";font-size:",";color:",";background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.color}))),_r=function(e){var t=e.conversation,n=e.onClick,o=Object(r.useContext)(s.a),c=_e(t.name,o.colors.avatars);return a.a.createElement(br,{onClick:n},a.a.createElement(yr,null,a.a.createElement(Ir,{color:c},"#"),a.a.createElement(Cr,null,a.a.createElement(vr,null,t.name),a.a.createElement(Er,null,t.description))))},Or=s.d.section.withConfig({displayName:"JoinConversationDialogstyle__ScrollView",componentId:"sc-1t63ow4-0"})(["text-align:left;overflow-y:scroll;> div{border-top:",";border-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])})),wr=s.d.div.withConfig({displayName:"JoinConversationDialogstyle__CloseButton",componentId:"sc-1t63ow4-1"})(["cursor:pointer;color:",";","{}"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.mediaQueries.medium})),xr=s.d.div.withConfig({displayName:"JoinConversationDialogstyle__Header",componentId:"sc-1t63ow4-2"})(["display:flex;justify-content:space-between;padding:",";","{padding:",";padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[8]," ").concat(t.space[3])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[8]})),jr=s.d.div.withConfig({displayName:"JoinConversationDialogstyle__Title",componentId:"sc-1t63ow4-3"})(["font-size:",";font-weight:",";text-align:left;color:",";"],(function(e){return e.theme.fontSizes.large}),(function(e){return e.theme.fontWeights.bold}),(function(e){return e.theme.colors.importantText})),Nr=s.d.div.withConfig({displayName:"Modal__Overlay",componentId:"j583yf-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;display:",";z-index:200;width:100%;height:100%;background:",";","{padding:10% 15%;background-color:rgba(0,0,0,0.5);}","{padding:10% 25%;}"],(function(e){return e.displayed?"flex":"none"}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.mediaQueries.large})),Tr=Object(s.d)($e.a.section).withConfig({displayName:"Modal",componentId:"j583yf-1"})(["z-index:300;box-shadow:",";border-radius:",";width:100%;height:100%;padding:",";text-align:center;flex-direction:column;overflow:auto;background:",";","{border-radius:",";padding:",";}"],(function(e){return e.theme.shadows[1]}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.space[8]})),Dr=function(e){return{open:{y:"0%",display:"flex"},closed:{y:e?"-200%":"50%",transitionEnd:{display:"none"}}}},Sr=Object(L.a)([pe,V,G],(function(e,t,n){return e.filter((function(e){return!n[t].map((function(e){return e.id})).includes(e.id)}))})),kr=function(){var e=Object(b.c)(Sr),t=Object(b.c)(oe),n=Object(b.c)(V),o=Object(b.b)(),c=Object(r.useContext)(s.a),i=Oe(c.mediaQueries.medium);return a.a.createElement(Nr,{displayed:t.JoinConversation},a.a.createElement(Tr,{animate:t.JoinConversation?"open":"closed",variants:Dr(i)},a.a.createElement(xr,null,a.a.createElement(jr,null,"Join a Conversation"),a.a.createElement(wr,{onClick:function(){o(qe())}},a.a.createElement(Xe,{color:c.colors.normalText,title:"close"}))),a.a.createElement(Or,null,e.map((function(e){return a.a.createElement(_r,{key:"conversationDescription-".concat(e.id),onClick:function(){var t=e.id;o(function(e,t){return function(n,r,a){return n(Object(q.s)({userId:e,spaces:[{id:t}]})).then((function(){a.pubnub.api.subscribe({channels:[t],withPresence:!0}),n(se(t))}))}}(n,t)),o(qe())},conversation:e})})))))},zr=s.d.span.withConfig({displayName:"UserDetailDialogstyle__UserName",componentId:"sc-1a556pd-0"})(["padding-right:",";"],(function(e){return e.theme.space[1]})),Ar=(s.d.section.withConfig({displayName:"UserDetailDialogstyle__ScrollView",componentId:"sc-1a556pd-1"})(["text-align:left;overflow-y:scroll;> div{border-top:",";border-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])})),s.d.div.withConfig({displayName:"UserDetailDialogstyle__CloseButton",componentId:"sc-1a556pd-2"})(["cursor:pointer;color:",";","{}"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.mediaQueries.medium}))),Lr=s.d.div.withConfig({displayName:"UserDetailDialogstyle__Header",componentId:"sc-1a556pd-3"})(["display:flex;justify-content:space-between;padding:",";","{padding:",";padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[8]," ").concat(t.space[3])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[8]})),Rr=s.d.div.withConfig({displayName:"UserDetailDialogstyle__Title",componentId:"sc-1a556pd-4"})(["padding:10px;display:flex;align-items:center;background:",";color:",";font-size:",";font-family:",";font-weight:",";text-align:left;"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Mr=s.d.div.withConfig({displayName:"UserDetailDialogstyle__Call",componentId:"sc-1a556pd-5"})(["cursor:pointer;color:",";background:",";border-radius:5px;border:1px solid #9b9b9b;padding:12px;"],(function(e){var t=e.theme;return e.isConnected?t.colors.primary[0]:t.colors.neutral[3]}),(function(e){var t=e.theme;return e.isConnected?t.colors.neutral[1]:t.colors.neutral[4]}));!function(e){e.NONE="NONE",e.INITIATED="INITIATED",e.RECEIVING="RECEIVING",e.ACCEPTED="ACCEPTED",e.NOT_ANSWERED="NOT_ANSWERED",e.DECLINED="DECLINED",e.CANCELED="CANCELED",e.CONNECTED="CONNECTED",e.COMPLETED="COMPLETED"}(nr||(nr={})),function(e){e.NONE="NONE",e.INCOMING="INCOMING",e.OUTGOING="OUTGOING"}(rr||(rr={}));var Wr,Ur,Vr={currentCall:{callType:rr.NONE,callState:nr.NONE,peerUserId:"",startTime:0},lastIncomingCall:{callType:rr.NONE,callState:nr.NONE,peerUserId:"",startTime:0},callLog:[]},Pr=function(e,t){return{type:"INCOMING_CALL_RECEIVED",payload:{userId:e,startTime:t}}},Hr=function(e,t){return{type:"OUTGOING_CALL_ACCEPTED",payload:{userId:e,startTime:t}}},qr=function(e,t,n){return{type:"CALL_DECLINED",payload:{userId:e,startTime:t,endTime:n}}},Gr=function(e,t,n){return{type:"CALL_CANCELED",payload:{userId:e,startTime:t,endTime:n}}},Br=function(e,t,n){return{type:"CALL_COMPLETED",payload:{userId:e,startTime:t,endTime:n}}},Fr=Object(L.a)((function(e){return e.rtc}),(function(e){return e.currentCall})),Qr=function(){var e=Object(b.b)(),t=Object(b.c)(oe),n=Object(r.useContext)(s.a),o=Oe(n.mediaQueries.medium),c=Object(b.c)(V),i=Object(b.c)(We),u=Object(b.c)(K),l=Object(b.c)(le),d=Object(b.c)(ze),m=u[i],p=m?m.name:"",g=d[l],h=g&&g.occupants.filter((function(e){return e.uuid===i})).length>0;return a.a.createElement(Nr,{displayed:t.UserDetail},a.a.createElement(Tr,{animate:t.UserDetail?"open":"closed",variants:Dr(o)},a.a.createElement(Lr,null,a.a.createElement(Rr,null,a.a.createElement(zr,null,p),h&&a.a.createElement(Mt,{size:7,title:h?"connected":"not connected",active:h})),a.a.createElement(Ar,{onClick:function(){e({type:f.USER_DETAIL_VIEW_HIDDEN})}},a.a.createElement(Xe,{color:n.colors.normalText,title:"close"}))),c!==i&&a.a.createElement(Mr,{isConnected:h,onClick:function(){var t,n;e((t=i,n=(new Date).getTime(),{type:"OUTGOING_CALL_INITIATED",payload:{userId:t,startTime:n}})),e(Ve())}},"Initiate a call",h||" ("+p+" may not be online)"),c===i&&a.a.createElement("div",null,"My Profile")))},Yr=n(5),Jr=n.n(Yr),Kr=n(8),Zr=s.d.div.withConfig({displayName:"RtcDisplaystyle__Wrapper",componentId:"wa7rhr-0"})(["resize:both;overflow:auto;z-index:1000;position:fixed;background:black;color:white;line-height:normal;display:",";flex-direction:column;"],(function(e){e.theme;return e.displayed?"flex":"none"})),Xr=s.d.div.withConfig({displayName:"RtcDisplaystyle__VideoWrapper",componentId:"wa7rhr-1"})([""]),$r=s.d.div.withConfig({displayName:"RtcDisplaystyle__CloseButton",componentId:"wa7rhr-2"})(["margin-top:2px;margin-right:2px;cursor:pointer;color:",";"],(function(e){return e.theme.colors.normalText})),ea=s.d.div.withConfig({displayName:"RtcDisplaystyle__Header",componentId:"wa7rhr-3"})(["display:flex;justify-content:space-between;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:",";"],(function(e){return e.theme.colors.neutral[3]})),ta=s.d.div.withConfig({displayName:"RtcDisplaystyle__Body",componentId:"wa7rhr-4"})([""]),na=s.d.div.withConfig({displayName:"RtcDisplaystyle__Title",componentId:"wa7rhr-5"})(["padding-left:10px;padding-right:10px;display:flex;align-items:center;background:",";color:",";font-size:",";font-family:",";font-weight:",";text-align:left;"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),ra=s.d.div.withConfig({displayName:"RtcDisplaystyle__LocalVideoWrapper",componentId:"wa7rhr-6"})(["padding-right:20px;padding-left:10px;float:right;display:inline-block;"]),aa=s.d.div.withConfig({displayName:"RtcDisplaystyle__RemoteVideoWrapper",componentId:"wa7rhr-7"})(["padding-left:20px;padding-right:10px;float:left;display:inline-block;"]),oa=s.d.video.withConfig({displayName:"RtcDisplaystyle__MyVideo",componentId:"wa7rhr-8"})(["object-fit:scale-down;width:160px;height:160px;"]),ca=s.d.video.withConfig({displayName:"RtcDisplaystyle__RemoteVideo",componentId:"wa7rhr-9"})(["object-fit:scale-down;width:320px;height:320px;"]),ia=s.d.div.withConfig({displayName:"RtcDisplaystyle__CallStatus",componentId:"wa7rhr-10"})(["padding:5px;margin-top:20px;border-top-style:solid;border-top-width:1px;border-top-color:",";"],(function(e){return e.theme.colors.neutral[3]})),sa=n(28),ua=sa.rtcIceConfig,la=sa.rtcVideoConstraints,da={peerConnection:new RTCPeerConnection,userMediaStream:void 0,userMediaClones:[],inboundStream:void 0,negotiatingOffer:!1,negotiatingAnswer:!1,iceCandidates:[],iceCandidateHandler:function(e){console.log("default ice candidate handler")},negotiationNeededHandler:function(e){console.log("default negotiation needed handler")},trackHandler:function(e){console.log("default track handler")},connectionStateHandler:function(e){console.log("default connection state handler: ",e)},iceConnectionStateHandler:function(e){console.log("default ice connection state handler: ",e)}},fa=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("create peer connection"),da.negotiatingOffer=!1,da.negotiatingAnswer=!1,da.inboundStream=void 0,da.iceCandidates=[],"closed"===da.peerConnection.connectionState){e.next=16;break}return e.prev=6,console.log("create peer connection: closing previous peer connection"),da.peerConnection.close(),e.next=11,pa();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log("error closing peer connection: ",e.t0);case 16:console.log("create peer connection: creating new peer connection"),da.peerConnection=new RTCPeerConnection({iceServers:ua}),da.peerConnection.onicecandidate=function(e){return da.iceCandidateHandler(e.candidate)},da.peerConnection.onnegotiationneeded=function(e){return da.negotiationNeededHandler(e)},da.peerConnection.ontrack=function(e){return da.trackHandler(e)},da.peerConnection.onconnectionstatechange=function(e){return da.connectionStateHandler(da.peerConnection.connectionState)},da.peerConnection.onconnectionstatechange=function(e){console.log("onconnectionstatechange - connectionState: ",da.peerConnection.connectionState)},da.peerConnection.onicegatheringstatechange=function(e){console.log("onicegatheringstatechange - iceGatheringState: ",da.peerConnection.iceGatheringState)},da.peerConnection.oniceconnectionstatechange=function(e){return da.iceConnectionStateHandler(da.peerConnection.iceConnectionState)},da.peerConnection.onsignalingstatechange=function(e){console.log("onsignalingstatechange - signalingState: ",da.peerConnection.signalingState)};case 26:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),ma=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){var n;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("connect media ",t),t.audio||t.video){e.next=4;break}return console.log("connect media: audio and video both false. exiting."),e.abrupt("return");case 4:if(da.userMediaStream){e.next=11;break}return console.log("connect media: getting user media"),e.next=8,navigator.mediaDevices.getUserMedia(Object(A.a)(Object(A.a)({},t),{},{video:!!t.video&&la}));case 8:n=e.sent,da.userMediaClones.push(n),da.userMediaStream=n.clone();case 11:return e.abrupt("return",da.userMediaStream);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pa=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:da.peerConnection.close(),da.userMediaClones.forEach((function(e){e.getTracks().forEach((function(e){return e.stop()}))})),da.userMediaStream&&(da.userMediaStream.getTracks().forEach((function(e){return e.stop()})),da.userMediaStream=void 0),da.inboundStream&&(da.inboundStream.getTracks().forEach((function(e){return e.stop()})),da.inboundStream=void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ga=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var t;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("send media"),da.userMediaStream&&(console.log("send media: adding tracks"),(t=da.userMediaStream).getTracks().forEach((function(e){e.applyConstraints(la),da.peerConnection.addTrack(e,t)})),console.log("send media: tracks added"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ha=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var t;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.peerConnection.createOffer();case 2:return t=e.sent,console.log("createIceOffer: attempting local offer",t),e.prev=4,e.next=7,da.peerConnection.setLocalDescription(t);case 7:console.log("createIceOffer: created: ",da.peerConnection.localDescription),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("createIceOffer: error setting local offer: ",e.t0);case 13:return e.abrupt("return",da.peerConnection.localDescription);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),ba=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var t;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.peerConnection.createOffer();case 2:if(t=e.sent,"stable"===da.peerConnection.signalingState){e.next=5;break}return e.abrupt("return");case 5:if(console.log("negotiateIceOffer: attempting local offer",t),e.prev=6,"stable"!==da.peerConnection.signalingState&&"have-local-offer"!==da.peerConnection.signalingState&&"have-remote-pranswer"!==da.peerConnection.signalingState){e.next=13;break}return e.next=10,da.peerConnection.setLocalDescription(t);case 10:console.log("negotiateIceOffer: created: ",da.peerConnection.localDescription),e.next=14;break;case 13:console.log("negotiateIceOffer: invalid state to set local description: ",da.peerConnection.signalingState);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.log("negotiateIceOffer: error setting local offer: ",e.t0);case 19:return e.abrupt("return",da.peerConnection.localDescription);case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(){return e.apply(this,arguments)}}(),ya=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var t;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("stable"!==da.peerConnection.signalingState&&"have-remote-offer"!==da.peerConnection.signalingState&&"have-local-pranswer"!==da.peerConnection.signalingState){e.next=20;break}return e.next=3,da.peerConnection.createAnswer();case 3:if(t=e.sent,console.log("createIceAnswer: attempting local answer",t),e.prev=5,"stable"!==da.peerConnection.signalingState&&"have-local-pranswer"!==da.peerConnection.signalingState&&"have-remote-offer"!==da.peerConnection.signalingState){e.next=12;break}return e.next=9,da.peerConnection.setLocalDescription(t);case 9:console.log("createIceAnswer: created: ",da.peerConnection.localDescription),e.next=13;break;case 12:console.log("createIceAnswer: invalid state to set local description: ",da.peerConnection.signalingState);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("createIceAnswer: error setting local answer: ",e.t0);case 18:e.next=21;break;case 20:console.log("createIceAnswer: invalid state to create answer: ",da.peerConnection.signalingState);case 21:return e.abrupt("return",da.peerConnection.localDescription);case 22:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}(),va=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("setRemoteDescription: ",da.negotiatingOffer,da.peerConnection.signalingState),e.prev=1,"stable"!==da.peerConnection.signalingState&&"have-local-offer"!==da.peerConnection.signalingState&&"have-remote-offer"!==da.peerConnection.signalingState&&"have-local-pranswer"!==da.peerConnection.signalingState&&"have-remote-pranswer"!==da.peerConnection.signalingState){e.next=7;break}return e.next=5,da.peerConnection.setRemoteDescription(t);case 5:e.next=8;break;case 7:console.log("invalid state to set remote description: ",da.peerConnection.signalingState);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("setRemoteDescription: error setting remote desc: ",e.t0);case 13:da.iceCandidates.forEach((function(e){da.peerConnection.addIceCandidate(e)}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ice candidate adding",t),da.peerConnection.remoteDescription&&da.peerConnection.remoteDescription.type?(da.iceCandidates.forEach((function(e){da.peerConnection.addIceCandidate(e)})),da.peerConnection.addIceCandidate(t)):da.iceCandidates.push(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.INITIATE="INITIATE",e.ACCEPT="ACCEPT",e.END="END"}(Wr||(Wr={})),function(e){e.OFFER="OFFER",e.ANSWER="ANSWER",e.CANDIDATE="CANDIDATE"}(Ur||(Ur={}));var Ca=sa.rtcDialingTimeoutSeconds,Ia={pubnub:void 0,dispatch:void 0,negotingOffer:!1,pendingOutgoingCalls:{},pendingIncomingCalls:{},onCallIncoming:function(e,t){},onCallAccepted:function(e,t){},onCallEnded:function(e,t){},onCallTimeout:function(e,t){},onIceCandidate:function(e,t,n){},onIceOffer:function(e,t,n){},onIceAnswer:function(e,t,n){}},_a={},Oa=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ia.pubnub=t,Ia.dispatch=n,Ia.negotingOffer=!1,Ia.pubnub&&t.removeListener(_a),_a.message=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("message",t),t.message.type===Ft.RtcCall?wa(t.message):t.message.type===Ft.RtcIce&&xa(t.message);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.addListener(_a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wa=function(e){switch(console.log(e),e.callSignalType){case Wr.INITIATE:console.log("call received from peer: ",e.senderId);try{var t=e.senderId+e.startTime;Ia.pendingIncomingCalls[t]={peerId:e.senderId,startTime:e.startTime},setTimeout((function(){var e=Ia.pendingIncomingCalls[t];e&&(delete Ia.pendingIncomingCalls[t],Ia.onCallTimeout(e.peerId,e.startTime))}),1e3*Ca),Ia.onCallIncoming(e.senderId,e.startTime)}catch(c){console.log("call incoming: error on incoming call: ",c)}break;case Wr.ACCEPT:console.log("call accepted by peer: ",e.senderId);try{var n=e.senderId+e.startTime;Ia.pendingOutgoingCalls[n]&&delete Ia.pendingOutgoingCalls[n],Ia.onCallAccepted(e.senderId,e.startTime)}catch(c){console.log("call accepted: error on accepted call: ",c)}break;case Wr.END:console.log("call ended by peer: ",e.senderId);try{var r=e.senderId+e.startTime,a=Ia.pendingIncomingCalls[r],o=Ia.pendingOutgoingCalls[r];a&&delete Ia.pendingIncomingCalls[r],o&&delete Ia.pendingOutgoingCalls[r],Ia.onCallEnded(e.senderId,e.startTime)}catch(c){console.log("call ended: error on ended call: ",c)}}},xa=function(e){switch(e.iceSignalType){case Ur.CANDIDATE:console.log("candidate received from peer",e.candidate);try{e.candidate||null===e.candidate?Ia.onIceCandidate(e.senderId,e.startTime,e.candidate):console.log("candidate empty: ",e)}catch(t){console.log("candidate: error setting ice candidate: ",t)}break;case Ur.OFFER:if(console.log("offer received from peer",e.offer),Ia.negotingOffer)return;try{e.offer?Ia.onIceOffer(e.senderId,e.startTime,e.offer):console.log("offer empty: ",e)}catch(t){console.log("candidate: error setting ice offer: ",t)}break;case Ur.ANSWER:console.log("answer received from peer",e.answer);try{e.answer?Ia.onIceAnswer(e.senderId,e.startTime,e.answer):console.log("answer empty: ",e)}catch(t){console.log("candidate: error setting ice answer: ",t)}}},ja=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("message to pubnub",t.channel,t.message),Ia.dispatch?Ia.dispatch(Object(q.u)(t)):console.log("rtc signaling missing dispatch, unable to dispatch: ",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Na={init:Oa,setHandlers:function(e,t,n,r,a,o,c){console.log("setting rtc signaling handlers"),Ia.onCallIncoming=e,Ia.onCallAccepted=t,Ia.onCallEnded=n,Ia.onCallTimeout=r,Ia.onIceCandidate=a,Ia.onIceOffer=o,Ia.onIceAnswer=c},callInit:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){var a,o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={type:Ft.RtcCall,callSignalType:Wr.INITIATE,startTime:r,senderId:t},ja({channel:n,message:a}),o=n+r,Ia.pendingOutgoingCalls[o]={peerId:n,startTime:r},setTimeout((function(){var e=Ia.pendingOutgoingCalls[o];e&&(delete Ia.pendingOutgoingCalls[o],Ia.onCallTimeout(e.peerId,e.startTime))}),1e3*Ca);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),callAccept:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){var a,o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={type:Ft.RtcCall,callSignalType:Wr.ACCEPT,startTime:r,senderId:t},ja({channel:n,message:a}),o=n+r,Ia.pendingIncomingCalls[o]&&delete Ia.pendingIncomingCalls[o];case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),callEnd:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){var a,o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={type:Ft.RtcCall,callSignalType:Wr.END,startTime:r,senderId:t},ja({channel:n,message:a}),o=n+r,Ia.pendingOutgoingCalls[o]&&delete Ia.pendingOutgoingCalls[o];case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),iceCandidate:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r,a){var o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:Ft.RtcIce,iceSignalType:Ur.CANDIDATE,startTime:r,senderId:t,candidate:a},ja({channel:n,message:o});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),iceOffer:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r,a){var o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:Ft.RtcIce,iceSignalType:Ur.OFFER,startTime:r,senderId:t,offer:a},ja({channel:n,message:o});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),iceAnswer:function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r,a){var o;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:Ft.RtcIce,iceSignalType:Ur.ANSWER,startTime:r,senderId:t,answer:a},ja({channel:n,message:o});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},Ta=Object(L.a)([pn,V,K],(function(e,t,n){var r=e[t]?Object.values(e[t]).filter((function(e){return e.channel===t})).map((function(e){return Object(A.a)(Object(A.a)({},e.message),{},{timetoken:String(e.timetoken),sender:n[e.message.senderId]||(e.message.senderId?{id:e.message.senderId,name:e.message.senderId}:{id:"unknown",name:"unknown"})})})):[];return r.length>0?r[r.length-1]:void 0})),Da=function(){var e=Object(dt.b)(),t=Object(b.b)(),n=Object(r.useState)(!0),o=Object(h.a)(n,2),c=o[0],i=o[1],u=Object(r.useState)(!0),l=Object(h.a)(u,2),d=l[0],m=l[1],p=Object(r.useState)(!1),g=Object(h.a)(p,2),y=g[0],v=g[1],E=Object(r.useState)(!1),C=Object(h.a)(E,2),I=C[0],_=C[1],O=Object(r.useState)(!1),w=Object(h.a)(O,2),x=w[0],j=w[1],N=Object(r.useState)(!1),T=Object(h.a)(N,2),D=T[0],S=T[1],k=Object(b.c)(Fr),z=Object(b.c)(Ta),A=Object(b.c)(oe),L=Object(b.c)(V),R=Object(r.useContext)(s.a),M=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return e.next=4,ne();case 4:return e.next=6,pa();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var t;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("call peer: calling",k.peerUserId),v(!0),e.next=4,M();case 4:return e.next=6,ma({audio:d,video:c});case 6:return t=e.sent,c&&document.querySelector("#myvideo")&&(document.querySelector("#myvideo").srcObject=t),e.next=10,Na.callInit(L,k.peerUserId,k.startTime);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){var n;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("answer call"),S(!0),e.next=4,M();case 4:return e.next=6,ma({audio:d,video:c});case 6:return n=e.sent,c&&document.querySelector("#myvideo")&&(document.querySelector("#myvideo").srcObject=n),t((r=z.sender.id,a=z.startTime,{type:"INCOMING_CALL_ACCEPTED",payload:{userId:r,startTime:a}})),e.next=11,fa();case 11:console.log("answer: sending answer to peer",z.sender.id),Na.callAccept(L,z.sender.id,z.startTime);case 13:case"end":return e.stop()}var r,a}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(Kr.a)(Jr.a.mark((function e(n){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update call status from: ",k.callState),k.callState===nr.CONNECTED||k.callState===nr.ACCEPTED?t(Br(k.peerUserId,k.startTime,(new Date).getTime())):k.callState!==nr.INITIATED&&k.callState!==nr.RECEIVING||(n?k.callState===nr.INITIATED?t(Gr(k.peerUserId,k.startTime,(new Date).getTime())):t(qr(k.peerUserId,k.startTime,(new Date).getTime())):t((r=k.peerUserId,a=k.startTime,o=(new Date).getTime(),{type:"CALL_NOT_ANSWERED",payload:{userId:r,startTime:a,endTime:o}})));case 2:case"end":return e.stop()}var r,a,o}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("end call"),P(!0),console.log("end call: sending",k.peerUserId),e.next=5,Na.callEnd(L,k.peerUserId,k.startTime);case 5:ie();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(Kr.a)(Jr.a.mark((function e(n,r){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("incoming call: receiving call from peer"),j(!0),t(Pr(n,r)),t(Ve());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(Kr.a)(Jr.a.mark((function e(n,r){var a;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("accepted: outgoing call accepted by peer"),_(!0),t(Hr(n,r)),e.next=5,fa();case 5:return e.next=7,ga();case 7:return e.next=9,ha();case 9:if(!(a=e.sent)){e.next=15;break}return e.next=13,Na.iceOffer(L,k.peerUserId,k.startTime,a);case 13:e.next=16;break;case 15:console.log("accepted: unable to create ice offer");case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(Kr.a)(Jr.a.mark((function e(n,r){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ended: outgoing call ended by peer"),k.peerUserId===n&&k.startTime===r&&(k.callType===rr.OUTGOING&&k.callState===nr.INITIATED?t(qr(k.peerUserId,k.startTime,(new Date).getTime())):k.callType===rr.INCOMING&&k.callState===nr.RECEIVING?t(Gr(k.peerUserId,k.startTime,(new Date).getTime())):k.callState!==nr.ACCEPTED&&k.callState!==nr.CONNECTED||t(Br(k.peerUserId,k.startTime,(new Date).getTime())),ie());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.peerUserId===t&&k.startTime===n&&null!==r&&Ea(r);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){var a;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.peerUserId!==t||k.startTime!==n){e.next=17;break}return va(r),e.next=4,ga();case 4:return e.next=6,ya();case 6:if(!(a=e.sent)){e.next=16;break}if(!a){e.next=13;break}return e.next=11,Na.iceAnswer(L,k.peerUserId,k.startTime,a);case 11:e.next=14;break;case 13:console.log("onIceOffer: unable to signal ice answer");case 14:e.next=17;break;case 16:console.log("onIceOffer: unable to create ice answer");case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t,n,r){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.peerUserId===t&&k.startTime===n&&va(r);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.callType===rr.OUTGOING?(console.log("outgoing call timed out"),console.log("dialed",y),console.log("peer ansswered",I),y&&!I&&P()):(j(!1),console.log("incoming call timed out"),console.log("incoming",x),console.log("answered",y),x&&!D&&P());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Na.init(e,t)}),[e,t]);var K,Z=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("#myvideo")&&(document.querySelector("#myvideo").srcObject&&document.querySelector("#myvideo").srcObject.getTracks().forEach((function(e){e.stop()})),document.querySelector("#myvideo").srcObject=void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return e.next=4,Z();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("#remotevideo")&&(document.querySelector("#remotevideo").srcObject&&document.querySelector("#remotevideo").srcObject.getTracks().forEach((function(e){e.stop()})),document.querySelector("#remotevideo").srcObject=void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("#remoteaudio")&&(document.querySelector("#remoteaudio").srcObject&&document.querySelector("#remoteaudio").srcObject.getTracks().forEach((function(e){e.stop()})),document.querySelector("#remoteaudio").srcObject=void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return e.next=4,te();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){var n;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(t);case 2:n=e.sent,document.querySelector("#myvideo")&&(document.querySelector("#myvideo").srcObject=n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(t);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:if(!t.video){e.next=7;break}return e.next=5,re(t);case 5:e.next=14;break;case 7:if(!t.audio){e.next=12;break}return e.next=10,ae(t);case 10:e.next=14;break;case 12:return e.next=14,$();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(Kr.a)(Jr.a.mark((function e(){return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:v(!1),S(!1),j(!1),i(!0),m(!0),ue();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){k.callState===nr.INITIATED&&t(Br(k.peerUserId,k.startTime,(new Date).getTime())),H(),t({type:f.RTC_VIEW_HIDDEN})},ue=function(){document.querySelector("#ring")&&document.querySelector("#ring").pause()};return x&&k.callState===nr.RECEIVING?document.querySelector("#ring")&&document.querySelector("#ring").play():ue(),Na.setHandlers(q,G,B,J,F,Q,Y),K=function(e){console.log("ice candidate handler peer: ",k.peerUserId),null!==e&&Na.iceCandidate(L,k.peerUserId,k.startTime,e)},da.iceCandidateHandler=K,da.peerConnection.onicecandidate=function(e){return da.iceCandidateHandler(e.candidate)},function(e){da.negotiationNeededHandler=e,da.peerConnection.onnegotiationneeded=function(e){return da.negotiationNeededHandler(e)}}(function(){var e=Object(Kr.a)(Jr.a.mark((function e(t){var n;return Jr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("negotiation needed: creating new offer"),e.next=3,ba();case 3:if(!(n=e.sent)){e.next=9;break}return e.next=7,Na.iceOffer(L,k.peerUserId,k.startTime,n);case 7:e.next=10;break;case 9:console.log("negotiation needed: unable to create ice offer");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(e){da.trackHandler=e,da.peerConnection.ontrack=function(e){return da.trackHandler(e)}}((function(e){var t=document.querySelector("#remotevideo");e.track.onunmute=function(){t.srcObject||(document.querySelector("#remotevideo").srcObject=e.streams[0])}})),function(e){da.connectionStateHandler=e,da.peerConnection.onconnectionstatechange=function(e){return da.connectionStateHandler(da.peerConnection.connectionState)}}((function(e){var n,r;"connected"===e&&(console.log("connected: rtc connection is established"),t((n=k.peerUserId,r=k.startTime,{type:"CALL_CONNECTED",payload:{userId:n,startTime:r}})))})),function(e){da.iceConnectionStateHandler=e,da.peerConnection.oniceconnectionstatechange=function(e){return da.iceConnectionStateHandler(da.peerConnection.iceConnectionState)}}((function(e){"disconnected"===e&&(console.log("disconnected: rtc ice connection is no longer stable"),t(Br(k.peerUserId,k.startTime,(new Date).getTime())),ie())})),y||x||k.callState!==nr.INITIATED||W(),Object(r.useEffect)((function(){var e=!1;document.body.addEventListener("touchstart",(function(){if(!e&&document.querySelector("#ring")){e=!0;var t=document.querySelector("#ring");t.play(),t.pause(),t.currentTime=0}})),document.addEventListener("click",(function(){if(!e&&document.querySelector("#ring")){e=!0;var t=document.querySelector("#ring");t.play(),t.pause(),t.currentTime=0}}))}),[]),a.a.createElement(Zr,{displayed:A.Rtc},a.a.createElement(ea,null,a.a.createElement(na,null,"Call"),a.a.createElement($r,{onClick:function(){se()}},a.a.createElement(Xe,{color:R.colors.normalText,title:"close"}))),a.a.createElement(ta,null,a.a.createElement("button",{disabled:k.callState!==nr.INITIATED&&k.callState!==nr.RECEIVING,onClick:function(){ce({audio:d,video:!c}),i(!c)}},"Video (",c?"on":"off",")"),a.a.createElement("button",{disabled:k.callState!==nr.INITIATED&&k.callState!==nr.RECEIVING,onClick:function(){ce({audio:!d,video:c}),m(!d)}},"Audio (",d?"on":"off",")"),(k.callState===nr.INITIATED||k.callState===nr.ACCEPTED||k.callState===nr.RECEIVING||k.callState===nr.CONNECTED)&&a.a.createElement("button",{onClick:H},"End Call"),a.a.createElement(Xr,null,!(k.callState===nr.INITIATED)&&k.callState===nr.RECEIVING&&a.a.createElement("div",null,a.a.createElement("div",null,"\xa0"),a.a.createElement("button",{onClick:U},"Answer")),a.a.createElement(aa,null,a.a.createElement(ca,{id:"remotevideo",autoPlay:!0,playsInline:!0}),a.a.createElement("audio",{id:"remoteaudio",autoPlay:!0})),a.a.createElement(ra,null,a.a.createElement(oa,{id:"myvideo",autoPlay:!0,playsInline:!0,muted:!0}))),a.a.createElement("audio",{id:"ring",src:"/ring.wav",preload:"preload",loop:!0})),a.a.createElement(ia,null,k.callState===nr.INITIATED?"Calling":k.callState===nr.ACCEPTED?"Call Accepted":k.callState===nr.RECEIVING?"Receiving Call":k.callState===nr.CONNECTED?"Call Connected":k.callState===nr.COMPLETED?"Call Completed":k.callState===nr.CANCELED?"Call Canceled":k.callState===nr.DECLINED?"Call Declined":k.callState===nr.NOT_ANSWERED&&k.callType===rr.INCOMING?"Call Missed":k.callState===nr.NOT_ANSWERED&&k.callType===rr.OUTGOING?"Call Not Answered":"Disconnected"))},Sa=function(){return a.a.createElement(X,null,a.a.createElement(Zt,null),a.a.createElement(hr,null),a.a.createElement(Tt,null),a.a.createElement(kr,null),a.a.createElement(Qr,null),a.a.createElement(Da,null))},ka=n(35),za=function(e){return 0!==e.publishKey.length&&0!==e.subscribeKey.length},Aa=s.d.div.withConfig({displayName:"ErrorBannerstyle__ErrorBanner",componentId:"sc-1byxyw9-0"})(["text-align:center;justify-content:center;display:flex;padding:",";background-color:",";color:",";"],(function(e){return e.theme.space[3]}),(function(e){return e.theme.colors.error}),(function(e){return e.theme.colors.activeText})),La=a.a.createElement(Aa,null,a.a.createElement("div",null,"Please run ",a.a.createElement("pre",null,"npm setup"))),Ra=function(){var e=Object(b.c)(P)?a.a.createElement(Sa,null):a.a.createElement(Z,null);return a.a.createElement(g,null,!za(ka)&&La,e)},Ma=["600px","1200px"],Wa={medium:"@media screen and (min-width: ".concat(Ma[0],")"),large:"@media screen and (min-width: ".concat(Ma[1],")"),touch:"@media (hover: none)"},Ua=["0px","11px","13px","15px","20px","16px"],Va={none:Ua[0],small:Ua[1],regular:Ua[2],medium:Ua[3],large:Ua[4],messageTextInput:Ua[5]},Pa=[0,300,400,500,700,900],Ha={none:Pa[0],light:Pa[1],regular:Pa[2],medium:Pa[3],bold:Pa[4],black:Pa[5]},qa={error:"#B63133",success:"#62E905",inactive:"#F5A623",primary:["#8E2DE2","#4A00E0"],neutral:["#FFFFFF","#F8F6FD","#F1EDFD","#9B9B9B","#585858"],avatars:["#F7861C","#35B7DF","#DE2440","#1F68EF","#9F34C3"]},Ga={onPrimary:qa.neutral[0],selectedText:"rgba(0, 0, 0, 0.5)",active:qa.primary[0],activeText:qa.neutral[0],messageText:qa.neutral[4],normalText:qa.neutral[3],importantText:qa.neutral[4],avatarText:qa.neutral[0],borderLight:qa.neutral[2],borderDark:qa.neutral[3]},Ba={primary:"linear-gradient(180deg, ".concat(qa.primary[0]," 0%, ").concat(qa.primary[1]," 100%)"),primaryHover:"rgba(255, 255, 255, 0.1)",primaryActive:"rgba(0, 0, 0, 0.1)",panel:qa.neutral[0],panelHover:qa.neutral[1],content:qa.neutral[1],contentHover:qa.neutral[2],message:qa.neutral[0]},Fa=["0","5px","10px","100vmax"],Qa={square:Fa[0],light:Fa[1],messageEditor:Fa[1],medium:Fa[2],strong:Fa[2],round:Fa[3]},Ya=["0","1px","5px"],Ja=["solid"],Ka=["none","".concat(Ya[1]," ").concat(Ja[0]),"".concat(Ya[2]," ").concat(Ja[0])],Za={none:Ka[0],light:Ka[1],strong:Ka[2]},Xa={breakpoints:Ma,mediaQueries:Wa,fonts:{app:'"Roboto", sans-serif'},fontSizes:Object(A.a)(Object(A.a)({},Ua),Va),fontWeights:Object(A.a)(Object(A.a)({},Pa),Ha),colors:Object(A.a)(Object(A.a)({},qa),Ga),backgrounds:Ba,sizes:["0","36px","56px","85px","260px","290px"],space:["0","10px","12px","14px","16px","21px","24px","32px","40px"],radii:Object(A.a)(Object(A.a)({},Fa),Qa),borderWidths:Ya,borderStyles:Ja,borders:Object(A.a)(Object(A.a)({},Ka),Za),shadows:["0 6px 10px rgba(103, 19, 176, 0.06)","0 4px 30px rgba(0, 0, 0, 0.4)"],custom:{dark:!1,companyName:"PubNub",tagLine:"World-Class APIs for In-App Chat"}},$a=n(73),eo=n.n($a),to=n(74),no=Object(q.g)(!1),ro=Object(de.c)({layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.MENU_VIEW_DISPLAYED:return te(e,m.Menu);case f.MENU_VIEW_HIDDEN:return ne(e,m.Menu);case f.CURRENT_CONVERSATION_VIEW_DISPLAYED:return te(e,m.CurrentConversation);case f.CURRENT_CONVERSATION_VIEW_HIDDEN:return ne(e,m.CurrentConversation);case f.CONVERSATION_MEMBERS_VIEW_DISPLAYED:return te(e,m.ConversationMembers);case f.CONVERSATION_MEMBERS_VIEW_HIDDEN:return ne(e,m.ConversationMembers);case f.JOIN_CONVERSATION_VIEW_DISPLAYED:return te(e,m.JoinConversation);case f.JOIN_CONVERSATION_VIEW_HIDDEN:return ne(e,m.JoinConversation);case f.USER_DETAIL_VIEW_DISPLAYED:return te(e,m.UserDetail);case f.USER_DETAIL_VIEW_HIDDEN:return ne(e,m.UserDetail);case f.RTC_VIEW_DISPLAYED:return te(e,m.Rtc);case f.RTC_VIEW_HIDDEN:return ne(e,m.Rtc)}return e},networkStatus:no,users:J,conversations:fe,joinedConversations:B,drafts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE_DRAFT_UPDATED":var n=Object(A.a)(Object(A.a)({},e.messageDraftById),{},Object(en.a)({},t.payload.conversationId,t.payload.value));return Object(A.a)(Object(A.a)({},e),{},{messageDraftById:n});case"MESSAGE_DRAFT_DISCARDED":var r=e.messageDraftById,a=t.payload.conversationId,o=(r[a],Object(In.a)(r,[a].map(_n.a)));return Object(A.a)(Object(A.a)({},e),{},{messageDraftById:o})}return e},conversationMembers:Se,memberPresence:ke,messages:mn,typingIndicators:function(e,t){switch(t.type){case q.c.SIGNAL_RECEIVED:return t.payload.message.type===dn.ShowTypingIndicator?ar(e,t):e||or;case fn.REMOVE_TYPING_INDICATOR:return cr(e,t.payload.channel,t.payload.userId,t.payload.timetoken);case fn.REMOVE_TYPING_INDICATOR_ALL:return cr(e,t.payload.channel,t.payload.userId);case q.a.MESSAGE_RECEIVED:return cr(e,t.payload.channel,t.payload.message.senderId);default:return e||or}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGIN_IN":return Object(A.a)(Object(A.a)({},e),{},{isLoggingIn:!0});case"LOGIN_SUCCEEDED":return Object(A.a)(Object(A.a)({},e),{},{isLoggingIn:!1,loggedInUserId:t.payload.loggedInUserId});default:return e}},currentConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOCUS_ON_CONVERSATION":return Object(A.a)(Object(A.a)({},e),{},{currentConversationId:t.payload});default:return e}},userDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":return Object(A.a)(Object(A.a)({},e),{},{selectedUserId:t.payload.selectedUserId});default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OUTGOING_CALL_INITIATED":return Object(A.a)(Object(A.a)({},e),{},{currentCall:{peerUserId:t.payload.userId,callType:rr.OUTGOING,callState:nr.INITIATED,startTime:t.payload.startTime}});case"INCOMING_CALL_RECEIVED":if(e.currentCall.callState===nr.CONNECTED){var n={peerUserId:t.payload.userId,callType:rr.INCOMING,callState:nr.NOT_ANSWERED,startTime:t.payload.startTime};return Object(A.a)(Object(A.a)({},e),{},{lastIncomingCall:n,callLog:[].concat(Object($.a)(e.callLog),[n])})}var r={peerUserId:t.payload.userId,callType:rr.INCOMING,callState:nr.RECEIVING,startTime:t.payload.startTime};return Object(A.a)(Object(A.a)({},e),{},{currentCall:r,lastIncomingCall:r});case"INCOMING_CALL_ACCEPTED":if(e.lastIncomingCall.callState===nr.RECEIVING&&e.lastIncomingCall.peerUserId===t.payload.userId&&e.lastIncomingCall.startTime===t.payload.startTime){var a=Object(A.a)(Object(A.a)({},e.lastIncomingCall),{},{callState:nr.ACCEPTED});return Object(A.a)(Object(A.a)({},e),{},{currentCall:a,lastIncomingCall:a})}return e;case"OUTGOING_CALL_ACCEPTED":var o=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.ACCEPTED});return Object(A.a)(Object(A.a)({},e),{},{currentCall:o});case"CALL_DECLINED":if(e.currentCall.peerUserId===t.payload.userId&&e.currentCall.startTime===t.payload.startTime){var c=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.DECLINED,endTime:t.payload.endTime});return Object(A.a)(Object(A.a)({},e),{},{currentCall:c,callLog:[].concat(Object($.a)(e.callLog),[c])})}return e;case"CALL_CANCELED":if(e.currentCall.peerUserId===t.payload.userId&&e.currentCall.startTime===t.payload.startTime){var i=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.CANCELED,endTime:t.payload.endTime});return Object(A.a)(Object(A.a)({},e),{},{currentCall:i,callLog:[].concat(Object($.a)(e.callLog),[i])})}return e;case"CALL_NOT_ANSWERED":if(e.currentCall.peerUserId===t.payload.userId&&e.currentCall.startTime===t.payload.startTime){var s=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.NOT_ANSWERED,endTime:t.payload.endTime});return Object(A.a)(Object(A.a)({},e),{},{currentCall:s,callLog:[].concat(Object($.a)(e.callLog),[s])})}return e;case"CALL_CONNECTED":var u=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.CONNECTED});return Object(A.a)(Object(A.a)({},e),{},{currentCall:u});case"CALL_COMPLETED":if(e.currentCall.peerUserId===t.payload.userId&&e.currentCall.startTime===t.payload.startTime){var l=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:nr.COMPLETED,endTime:t.payload.endTime});return Object(A.a)(Object(A.a)({},e),{},{currentCall:l,callLog:[].concat(Object($.a)(e.callLog),[l])})}return e;default:return e}}}),ao={},oo=de.d,co=Object.assign({},{restore:!0,heartbeatInterval:0},ka),io=new eo.a(co),so=function(e){var t=oo(Object(de.a)(to.a.withExtraArgument(e)));return Object(de.e)(ro,ao,t)}({pubnub:{api:io}}),uo=function(){io.unsubscribeAll()},lo=function(){return Object(r.useEffect)((function(){return io.addListener(Object(q.i)(so.dispatch)),io.addListener(ur(so.dispatch)),uo}),[]),Object(r.useEffect)((function(){window.addEventListener("beforeunload",uo)}),[]),a.a.createElement(s.b,{theme:Xa},a.a.createElement(b.a,{store:so},a.a.createElement(dt.a,{client:io},a.a.createElement(p,null),a.a.createElement(l,null),a.a.createElement(Ra,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(lo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},28:function(e){e.exports=JSON.parse('{"rtcDialingTimeoutSeconds":25,"rtcIceConfig":[{"urls":["stun:ws-turn6-back.xirsys.com"]},{"username":"U7GQ1dJgnmt8pth-V1wisXKOetXuptwY6WaB4mIVGzoGWVWrhZa2AhyBrrYEITGOAAAAAF76w5NwaGFpcm93","credential":"9f3c137e-ba8c-11ea-b759-d6c6c83d462e","urls":["turn:ws-turn6-back.xirsys.com:80?transport=udp","turn:ws-turn6-back.xirsys.com:3478?transport=udp","turn:ws-turn6-back.xirsys.com:80?transport=tcp","turn:ws-turn6-back.xirsys.com:3478?transport=tcp","turns:ws-turn6-back.xirsys.com:443?transport=tcp","turns:ws-turn6-back.xirsys.com:5349?transport=tcp"]}],"rtcIceConfigAlt":[{"urls":"stun:stun.l.google.com:19302"},{"urls":"turn:68.183.24.218:3478","username":"username","credential":"password"}],"rtcVideoConstraints":{"width":1280,"height":720,"aspectRatio":1.777777778,"frameRate":15}}')},35:function(e){e.exports=JSON.parse('{"publishKey":"pub-c-10921688-79ed-4759-b6e2-4388eed57ffe","subscribeKey":"sub-c-bc7c86ac-8ff9-11ea-9dd4-caf89c7998a9"}')},47:function(e){e.exports=JSON.parse('["user_a652eb6cc34b44c4a39b28fcc24d062b","user_d06c7d5ddc1c4c85bd66844198b2ca38","user_a673547880824a0687b3041af36a5de4","user_102a15c8bc394bdc90d1c8eab58b1de9","user_2ada61d287aa42b59d620c474493474f","user_4ec689d24845466e93ee358c40358473","user_83647bfb6bcd412d93b1e57e1b602d3a","user_def709b1adfc4e67b98bb7a820f581b1","user_6ef19fcc68824f9f9e3d908d796f21a3","user_05f4ac447efc478c834e53ba0cb34444","user_a56c20222c484ff8987ec9b69b0c8f5b","user_ee7e4c6cedbf40cdaaed6de7696b9329","user_c1ee1eda28554d0f88560a51862980b3","user_17b13f16a5164ca4b1e4d88ea434f5a1","user_85d35cf84bf5456f8040cc733d9b09c9","user_fbc9a54790b24ee19441260970b171c0","user_0368d27f4d514079bc5cfd5678ec1fe7","user_5181e07992f44e94a1a81ae9a5d25777","user_fd6f86b6942d4940a895f4059cb188d7","user_5500315bf0a34f9b9dfa0e4fffcf49c2","user_30b5b567829e485ab6267c3c78d48ca3","user_4caced7ebd904676a897628662f37d32","user_0202a46151cc43af890caa521c40576e","user_b17878cd35154a258b86b63050963c74","user_61c5af696dde4a9388f95d402767db16","user_0a0579891c7148009ec254f7ae2e6367","user_ed145d8b0f094b83a2d51d428a59d0cb","user_72a0cc784d4543f2b1d9cee9961d7e49","user_149e60f3117d4fb280c992762d3c09e3","user_35dd06f9b2c749cfb22ddb7b938c5c7c","user_00c56e75c0334ff0b248ca4292d20de3","user_d43bfea6e4234f84ab377d664edf2576","user_cf808eb761754c399922e96b02ac8b94","user_31be78e92e4e4218808007047cbdcebb","user_797c9f53bbc541f6b046fa32339bb2dd","user_9a197f447f314f9ead993f12303d8c75","user_03bcea398fd6441c8f982abbdc94ef75","user_98dac32649e7488ea314a96f808e002d","user_cb3460da976442579c8f4785ec687ddf","user_29bea6fb93384c0f80254a5a9af66fe6","user_f5735bcc168445c38978e46969bc0019","user_363d9255193e45f19513f4bfa9901fbe","user_1bc564bcaa4a476e8392c4c8e2b92983","user_2b0a9e355fc64fa2abf5ef92c87a76cb","user_0b253029175b4ebb8b03c4281757406b","user_608169810dc143998c7964485415a5c7","user_732277cad5264ed48172c40f0f008104","user_4190b08bba444ec58beda6637361cfdb","user_18ded324eb4e465984b2971e990ef8c9","user_78c3e3420b59441380eca3928a8a5b70","user_3c4400761cba4b65b77b6cae55fc21eb","user_515fc9a2a1b043c3847a29f29f3b3c2a","user_7261c27b34954ece93ac0d8a15520591","user_55368a92e24e4e26a2e143db53205fd3","user_f32ea4a710104c06ad5858b0e22cfc88","user_2fae5cc33cfb4cc1befdc261d8c81969","user_d84e6dadbdab4b75bfc51e17a9089546","user_7ec3a868038049f2a7c6515fa64814c6","user_2bf0a23078ca4ea09ed6a86c9efa3b14","user_efc5b3ef96ea4bffbde733e249c8cbb3","user_5be59efdf1bd49e18415c7829666c480","user_55f74958eb00441f8171f4f8757b0f24","user_91bfab48a8464589ae2aafb3858a9e7f","user_c1d462c8eba940f9bc76d3d88838bbfb","user_d2669ccf033f46c79b0adda40cf3383c","user_142da3c419804a82a3057cedc86acaa6","user_8e92a37f342b482facd1eebbd782006a","user_53bbe00387004010a8b9ad5f36bdd4a7","user_c1b2080663a94817868eefb6cac8e18e","user_eff1792e14a746b99b1e92950848772c","user_a67530c8d4ac4ab4a27a9e4b129bdda5","user_dce466f2ebf346168bae8c9024cc17f0","user_912210948aa849eda2c3e0c2b58355e6","user_a25f1a913867452594186bf056c9f165","user_6b48d96586784272abaf89bd15f90295","user_a109e9b5d75349c6ab3c0daf5baa2198","user_a7f0471fb9c64a00af7b3029234cff99","user_159709bbbb534b579770539e0c7d5037","user_63ea15931d8541a3bd35e5b1f09087dc","user_6a535a77e2aa4a109373ac6670d6c2a3","user_aa51f0825ce24faa8bf66709c7d454c2","user_e017338080be4aa7898de218458ff2a5","user_2208f461810144cb8994ecc5136cc3ee","user_93e25fbcac7a4a9c9e5b0e8fa75ac673","user_f4905c936732451b85fd82acc4c45bba","user_4205ea2b9cc549048d4b2e9da389c348","user_f04ca61de8ba44af8e50ed5bd37ff822","user_4e2f18aba20640cf922c8bc485941f8e","user_fcde9d330a5d41a8b810de6cfacff64d","user_dfc0406700564f0797038bebeabb617f","user_00505cca5b04460fafd716af48665ca1","user_47557ad75d4047efab1b6577cec3efe7","user_0149372b160544cf981b6284dd2b5e45","user_fd92e551358e4af1b610cb9bafe39494","user_ffea0ad773f3424592e76f5108deaaaa","user_16cc89c2e06c497cb65930f0c4729dce","user_e0e43601f93249c382415521188f0208","user_868e2d4ecf61494ea10140a00abdb0e5","user_fb9ca56c8d3547268f2d589a6fcb1556","user_a204f87d215a409798be9fb207685f44"]')},67:function(e,t,n){e.exports=n.p+"static/media/background.fcad69ea.png"},68:function(e,t,n){e.exports=n.p+"static/media/logo.85dc561e.svg"},69:function(e,t,n){e.exports=n.p+"static/media/screenshot.547f1a66.png"},70:function(e){e.exports=JSON.parse('{"conversationId":"space_ac4e67b98b34b44c4a39466e93e"}')},77:function(e,t,n){e.exports=n(119)}},[[77,1,2]]]);
//# sourceMappingURL=main.a6148389.chunk.js.map