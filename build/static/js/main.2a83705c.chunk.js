(this.webpackJsonppubnubchatrtc=this.webpackJsonppubnubchatrtc||[]).push([[0],{119:function(t,n,r){"use strict";r.r(n);var a=r(0),o=r.n(a),i=r(32),c=r.n(i),s=r(14),u=r(1);function l(){var e=Object(s.a)(["\n body {\n  font-family: ",";\n  font-weight: ",";\n  margin: ",";\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n* {\n  box-sizing: border-box;\n}\nbody,\nhtml,\n#root {\n  height: 100%;\n}\n"]);return l=function(){return e},e}var d=Object(u.c)(l(),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.space[0]}));function m(){var e=Object(s.a)(["\n\n//! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css\nhtml{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}\n//# sourceMappingURL=normalize.min.css.map\n      \n"]);return m=function(){return e},e}var f,p,h=Object(u.c)(m()),g=u.d.div.withConfig({displayName:"style__Wrapper",componentId:"ca4185-0"})(["text-align:left;display:flex;height:100%;flex-direction:column;"]),b=r(9),y=r(5),v=y.b,E=r(67),C=r.n(E),_=u.d.div.withConfig({displayName:"Loginstyle__Wrapper",componentId:"sc-1aqyl9-0"})(["display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;","{background:url(",");background-size:cover;background-position:center center;padding:10% 15%;}"],(function(e){return e.theme.mediaQueries.medium}),C.a),I=u.d.div.withConfig({displayName:"Loginstyle__Body",componentId:"sc-1aqyl9-1"})(["flex-grow:1;display:flex;flex-direction:row;"]),O=u.d.div.withConfig({displayName:"Loginstyle__Promo",componentId:"sc-1aqyl9-2"})(["display:flex;flex-direction:column;justify-content:flex-end;background:linear-gradient( 180deg,rgba(240,42,42,0.670214) 0%,rgba(138,42,225,0.55153) 100% );max-width:360px;border-top-left-radius:",";border-bottom-left-radius:",";display:none;","{display:flex;}"],(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.mediaQueries.large})),x=u.d.h1.withConfig({displayName:"Loginstyle__TagLine",componentId:"sc-1aqyl9-3"})(["color:",";font-size:24px;font-weight:",";margin:0px;text-align:center;padding:20px 50px;"],(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontWeights.light})),w=u.d.div.withConfig({displayName:"Loginstyle__Screenshot",componentId:"sc-1aqyl9-4"})(["display:flex;justify-content:center;"]),N=u.d.div.withConfig({displayName:"Loginstyle__Content",componentId:"sc-1aqyl9-5"})(["background:",";flex-grow:1;display:flex;align-items:center;justify-content:center;border-top-right-radius:",";border-bottom-right-radius:",";border-top-left-radius:",";border-bottom-left-radius:",";background:",";","{border-top-left-radius:",";border-bottom-left-radius:",";}"],(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.backgrounds.content}),(function(e){return e.theme.mediaQueries.large}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.radii.square})),j=u.d.div.withConfig({displayName:"Loginstyle__LoginForm",componentId:"sc-1aqyl9-6"})(["width:300px;display:flex;flex-direction:column;font-size:14px;font-family:",";"],(function(e){return e.theme.fonts.app})),D=u.d.img.withConfig({displayName:"Loginstyle__Logo",componentId:"sc-1aqyl9-7"})(["height:30px;"]),L=u.d.div.withConfig({displayName:"Loginstyle__Label",componentId:"sc-1aqyl9-8"})(["color:",";padding-bottom:",";padding-top:",";"],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.space[6]})),T=u.d.input.withConfig({displayName:"Loginstyle__Field",componentId:"sc-1aqyl9-9"})(["height:42px;color:",";border-radius:",";border:",";padding:",";background:",';&[type="password"]{letter-spacing:8px;font-size:24px;}:read-only:focus{outline:none;}'],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){var t=e.theme;return"0 ".concat(t.space[3])}),(function(e){return e.theme.backgrounds.content})),S=u.d.button.withConfig({displayName:"Loginstyle__Button",componentId:"sc-1aqyl9-10"})(["align-self:center;cursor:pointer;border-radius:",";border:",";margin-top:",";padding:",";width:100%;height:42px;color:",";background:linear-gradient(155deg,#e12a66 0%,#5c0ce1 100%);font-weight:",";&:focus{outline:none;}"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.borders.none}),(function(e){return e.theme.space[8]}),(function(e){var t=e.theme;return"".concat(t.space[3]," ").concat(t.space[0])}),(function(e){return e.theme.colors.activeText}),(function(e){return e.theme.fontWeights.regular})),k=r(68),z=r.n(k),A=r(4),M=r(6),R=r(12),W=r.n(R),U={isLoggingIn:!1},V=function(e){return e.authentication},P=Object(M.a)([V],(function(e){return W()(void 0!==e.loggedInUserId,"getLoggedInUserId should not be used in components of the application that are rendered while there is no logged in user"),e.loggedInUserId})),G=Object(M.a)(V,(function(e){return!!e.loggedInUserId})),H=Object(M.a)(V,(function(e){return e.isLoggingIn})),q=r(7),B=Object(M.a)([function(e){return e.joinedConversations}],(function(e){return e.byId})),F=Object(q.e)(),J=r(46),Q=r(69),Y=r.n(Q),K=Object(q.m)(),Z=Object(M.a)([function(e){return e.users}],(function(e){return e.byId})),$=function(){var e=v(),t=Object(y.c)(H),n=Object(y.c)(G),r=Object(a.useContext)(u.a),i=Object(y.c)(Z),c=Object(a.useState)(""),s=Object(b.a)(c,2),l=s[0],d=s[1],m=i[l],f=function(){if(!t&&!n&&""===l){var r=J[Math.floor(Math.random()*J.length)];d(r),e(function(e){return function(t,n,r){t({type:"LOGGIN_IN"}),r.pubnub.api.setUUID(e);var a=t(Object(q.r)({userId:e})).then((function(){r.pubnub.api.subscribe({channels:[e],withPresence:!0})})).then((function(){return t(Object(q.p)({userId:e,include:{spaceFields:!0,customSpaceFields:!1,customFields:!1,totalCount:!1}}))})).then((function(){var t=B(n())[e].map((function(e){return e.id}));r.pubnub.api.subscribe({channels:t,withPresence:!0})}));return Promise.all([a]).then((function(){t({type:"LOGIN_SUCCEEDED",payload:{loggedInUserId:e}})}))}}(r))}};return n||t||f(),o.a.createElement(_,null,o.a.createElement(I,null,o.a.createElement(O,null,o.a.createElement(x,null,r.custom.tagLine),o.a.createElement(w,null,o.a.createElement("img",{alt:"pubnub chat screenshot",src:Y.a}))),o.a.createElement(N,null,o.a.createElement(j,null,o.a.createElement(D,{alt:"PubNub",src:z.a}),o.a.createElement(L,null,"Username"),o.a.createElement(T,{readOnly:!0,value:m?m.name.toLowerCase().replace(" ","."):""}),o.a.createElement(L,null,"Password"),o.a.createElement(T,{readOnly:!0,type:"password",value:"password123"}),o.a.createElement(S,{onClick:f},t?"Connecting":"Log In")))))},X=u.d.div.withConfig({displayName:"ChatUIstyle__Wrapper",componentId:"sc-1yeb6q1-0"})(["display:flex;height:100%;"]),ee=r(15);!function(e){e.MENU_VIEW_DISPLAYED="pubnub/MENU_VIEW_DISPLAYED",e.MENU_VIEW_HIDDEN="pubnub/MENU_VIEW_HIDDEN",e.CURRENT_CONVERSATION_VIEW_DISPLAYED="pubnub/CURRENT_CONVERSATION_VIEW_DISPLAYED",e.CURRENT_CONVERSATION_VIEW_HIDDEN="pubnub/CURRENT_CONVERSATION_VIEW_HIDDEN",e.CONVERSATION_MEMBERS_VIEW_DISPLAYED="pubnub/CONVERSATION_MEMBERS_VIEW_DISPLAYED",e.CONVERSATION_MEMBERS_VIEW_HIDDEN="pubnub/CONVERSATION_MEMBERS_VIEW_HIDDEN",e.JOIN_CONVERSATION_VIEW_DISPLAYED="pubnub/JOIN_CONVERSATION_VIEW_DISPLAYED",e.JOIN_CONVERSATION_VIEW_HIDDEN="pubnub/JOIN_CONVERSATION_VIEW_HIDDEN",e.USER_DETAIL_VIEW_DISPLAYED="pubnub/USER_DETAIL_VIEW_DISPLAYED",e.USER_DETAIL_VIEW_HIDDEN="pubnub/USER_DETAIL_VIEW_HIDDEN",e.RTC_VIEW_DISPLAYED="pubnub/RTC_VIEW_DISPLAYED",e.RTC_VIEW_HIDDEN="pubnub/RTC_VIEW_HIDDEN"}(f||(f={})),function(e){e[e.Menu=0]="Menu",e[e.CurrentConversation=1]="CurrentConversation",e[e.ConversationMembers=2]="ConversationMembers",e[e.JoinConversation=3]="JoinConversation",e[e.UserDetail=4]="UserDetail",e[e.Rtc=5]="Rtc"}(p||(p={}));var te={views:[p.CurrentConversation]},ne=function(e,t){return Object(A.a)(Object(A.a)({},e),{},{views:[].concat(Object(ee.a)(e.views),[t])})},re=function(e,t){return Object(A.a)(Object(A.a)({},e),{},{views:e.views.filter((function(e){return e!==t}))})},ae=function(e){return e.layout},oe=(Object(M.a)([ae],(function(e){return e.views[0]})),Object(M.a)([ae],(function(e){return e.views}))),ie=Object(M.a)([oe],(function(e){return{Menu:e.includes(p.Menu),ConversationMembers:e.includes(p.ConversationMembers),JoinConversation:e.includes(p.JoinConversation),CurrentConversation:e.includes(p.CurrentConversation),UserDetail:e.includes(p.UserDetail),Rtc:e.includes(p.Rtc)}})),ce=r(70),se=ce.conversationId,ue=function(e){return{type:"FOCUS_ON_CONVERSATION",payload:e}},le={currentConversationId:se},de=Object(M.a)([function(e){return e.currentConversation}],(function(e){return e.currentConversationId})),me=r(11),fe=Object(me.c)({conversations:Object(q.l)(),allConversations:Object(q.k)()}),pe=Object(M.a)([function(e){return e.conversations}],(function(e){return e.conversations.byId})),he=Object(M.a)([function(e){return e.conversations.conversations},function(e){return e.conversations.allConversations}],(function(e,t){return t.spaceIds.map((function(t){return e.byId[t]}))})),ge=function(e){var t=e.title,n=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:20,height:20},o.a.createElement("title",null,t),o.a.createElement("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{stroke:n.colors.onPrimary,cx:9,cy:9,r:9}),o.a.createElement("path",{d:"M5 9h8M9 5v8",stroke:n.colors.onPrimary,strokeLinecap:"round",strokeLinejoin:"round"})))},be=u.d.div.withConfig({displayName:"ConversationItemstyle__Wrapper",componentId:"sc-1fzxd67-0"})(["cursor:pointer;display:flex;justify-content:space-between;height:",";padding:",";font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";background:",";:hover{background:",";}"],(function(e){return e.theme.sizes[2]}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.fonts.app}),(function(e){var t=e.theme;return e.emphasized?t.fontWeights.black:t.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){var t=e.theme;return e.selected?t.backgrounds.primaryActive:"transparent"}),(function(e){var t=e.theme;return e.selected?t.backgrounds.primaryActive:t.backgrounds.primaryHover})),ye=u.d.div.withConfig({displayName:"ConversationItemstyle__Body",componentId:"sc-1fzxd67-1"})(["display:flex;"]),ve=u.d.div.withConfig({displayName:"ConversationItemstyle__Name",componentId:"sc-1fzxd67-2"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin:",";line-height:",";"],(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[6])}),(function(e){return e.theme.sizes[1]})),Ee=u.d.span.withConfig({displayName:"ConversationItemstyle__MessageCount",componentId:"sc-1fzxd67-3"})(["margin:",";:hover{display:none;}"],(function(e){return e.theme.space[3]})),Ce=u.d.div.withConfig({displayName:"ConversationItemstyle__IconWrapper",componentId:"sc-1fzxd67-4"})(["display:flex;align-items:center;"]),_e=u.d.div.withConfig({displayName:"ConversationItemstyle__ConversationIcon",componentId:"sc-1fzxd67-5"})(["border-radius:",";width:",";height:",";line-height:",";font-family:",";font-weight:",";font-size:",";color:",";text-align:center;background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.selectedText}),(function(e){return e.color})),Ie=function(e){var t=e.title,n=(e.selected,Object(a.useContext)(u.a));return o.a.createElement("svg",{width:20,height:16},o.a.createElement("title",null,t),o.a.createElement("g",{fill:n.colors.onPrimary,fillRule:"evenodd"},o.a.createElement("path",{d:"M10.647 4.854L12.793 7H.5a.499.499 0 100 1h12.293l-2.146 2.145a.5.5 0 00.707.707l3-3a.497.497 0 000-.708l-3-3a.5.5 0 10-.707.71z"}),o.a.createElement("path",{d:"M19.001 1.5v12c0 .827-.673 1.5-1.5 1.5h-10c-.827 0-1.5-.673-1.5-1.5v-4a.5.5 0 011 0v4a.5.5 0 00.5.5h10a.5.5 0 00.5-.5v-12a.5.5 0 00-.5-.5h-10a.5.5 0 00-.5.5v4a.5.5 0 01-1 0v-4c0-.827.673-1.5 1.5-1.5h10c.827 0 1.5.673 1.5 1.5"})))};var Oe=function(e,t){var n=t.length;return t[(function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(e)%n+n)%n]};function xe(e){var t=(e.match(/(\([\w\s-:]+\))/)||[])[1]||e,n=window.matchMedia(t),r=Object(a.useState)(n.matches),o=Object(b.a)(r,2),i=o[0],c=o[1];return Object(a.useEffect)((function(){var e=function(){return c(n.matches)};return n.addListener(e),function(){return n.removeListener(e)}}),[n]),i}var we=function(e){var t=e.selected,n=e.id,r=e.name,i=e.onClick,c=e.onLeave,s=e.unreadMessageCount,l=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mouseEnterDelayMS,o=void 0===r?200:r,i=n.mouseLeaveDelayMS,c=void 0===i?0:i,s=Object(a.useState)(!1),u=Object(b.a)(s,2),l=u[0],d=u[1];return[l,{onMouseEnter:function(){clearTimeout(t),e=setTimeout((function(){return d(!0)}),o)},onMouseLeave:function(){clearTimeout(e),t=setTimeout((function(){return d(!1)}),c)}}]}({mouseEnterDelayMS:0}),d=Object(b.a)(l,2),m=d[0],f=d[1],p=n!==se,h=Object(a.useContext)(u.a),g=xe(h.mediaQueries.touch),y=Oe(r,h.colors.avatars);return o.a.createElement(be,Object.assign({},f,{selected:t,emphasized:s>0,onClick:i}),o.a.createElement(ye,null,o.a.createElement(_e,{color:y},"#"),o.a.createElement(ve,null,r)),(m||g)&&p?o.a.createElement(Ce,{onClick:function(e){e.stopPropagation(),c()}},o.a.createElement(Ie,{title:"Leave Conversation",selected:t})):s>0&&o.a.createElement(Ee,null,s))},Ne=u.d.div.withConfig({displayName:"MyConversationsstyle__Wrapper",componentId:"sc-1yz4vv5-0"})(["display:flex;flex-direction:column;overflow:auto;margin:",";margin-top:",";"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[1]})),je=u.d.div.withConfig({displayName:"MyConversationsstyle__ConversationList",componentId:"sc-1yz4vv5-1"})(["overflow-y:auto;overflow-y:overlay;display:flex;flex-direction:column;"]),De=u.d.div.withConfig({displayName:"MyConversationsstyle__Title",componentId:"sc-1yz4vv5-2"})(["display:flex;justify-content:space-between;align-items:center;margin:",";font-size:",";font-weight:",";color:",";"],(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.colors.onPrimary})),Le=u.d.span.withConfig({displayName:"MyConversationsstyle__AddButton",componentId:"sc-1yz4vv5-3"})(["cursor:pointer;font-size:0px;align-self:center;cursor:pointer;"]),Te=Object(M.a)([function(e){return e.conversationMembers}],(function(e){return e.byId})),Se=Object(q.d)(),ke=Object(q.h)(),ze=Object(M.a)([function(e){return e.memberPresence}],(function(e){return e.byId})),Ae=u.d.div.withConfig({displayName:"UserInitialsAvatar__Wrapper",componentId:"sc-1u1npiv-0"})(["vertical-align:middle;border-radius:",";width:","px;height:","px;line-height:","px;font-size:","px;font-family:",";font-weight:",";text-transform:uppercase;text-align:center;color:",";background-color:",";"],(function(e){return e.theme.radii.round}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return Math.round(e.size/3)}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.avatarText}),(function(e){return e.color})),Me=function(e){var t=e.name,n=e.userId,r=e.size,i=(e.muted,e.color),c=Object(a.useContext)(u.a),s=t.match(/\b\w/g)||[],l=Oe(n,c.colors.avatars);return o.a.createElement(Ae,{size:r,color:i||l},s)},Re=function(e){return{type:"SELECT_USER",payload:{selectedUserId:e}}},We={selectedUserId:""},Ue=Object(M.a)((function(e){return e.userDetail}),(function(e){return e.selectedUserId})),Ve=function(){return{type:f.USER_DETAIL_VIEW_DISPLAYED}},Pe=function(){return{type:f.RTC_VIEW_DISPLAYED}},Ge=function(){return{type:f.MENU_VIEW_HIDDEN}},He=function(){return{type:f.JOIN_CONVERSATION_VIEW_HIDDEN}},qe=function(){return{type:f.CONVERSATION_MEMBERS_VIEW_HIDDEN}},Be=u.d.div.withConfig({displayName:"MemberDescriptionstyle__Wrapper",componentId:"sc-1vktazh-0"})(["display:flex;align-items:center;height:",";padding:",";:hover{background:",";}"],(function(e){return e.theme.sizes[2]}),(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[6])}),(function(e){return e.theme.backgrounds.panelHover})),Fe=u.d.div.withConfig({displayName:"MemberDescriptionstyle__PresenceDot",componentId:"sc-1vktazh-1"})(["border-radius:",";width:","px;height:","px;top:-","px;right:-","px;position:absolute;background-color:",";font-size:0px;"],(function(e){return e.theme.radii.round}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/2}),(function(e){return e.size/2}),(function(e){var t=e.theme;return e.presence?t.colors.success:t.colors.inactive})),Je=u.d.div.withConfig({displayName:"MemberDescriptionstyle__Avatar",componentId:"sc-1vktazh-2"})(["width:",";height:",";position:relative;"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]})),Qe=u.d.div.withConfig({displayName:"MemberDescriptionstyle__About",componentId:"sc-1vktazh-3"})(["display:flex;flex-direction:column;justify-content:space-between;padding-left:",";height:",";"],(function(e){return e.theme.space[6]}),(function(e){return e.theme.sizes[1]})),Ye=u.d.div.withConfig({displayName:"MemberDescriptionstyle__UserName",componentId:"sc-1vktazh-4"})(["font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";cursor:pointer;"],(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText})),Ke=u.d.div.withConfig({displayName:"MemberDescriptionstyle__UserTitle",componentId:"sc-1vktazh-5"})(["font-family:",";font-weight:",";font-size:",";color:",";"],(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.normalText})),Ze=function(e){var t=e.user,n=e.you,r=Object(y.b)();return o.a.createElement(Be,null,o.a.createElement(Je,null,o.a.createElement(Me,{size:36,name:t.name,userId:t.id,muted:!t.presence}),t.presence&&o.a.createElement(Fe,{presence:t.presence,size:7})),o.a.createElement(Qe,null,o.a.createElement(Ye,{muted:!t.presence,onClick:function(){r(Re(t.id)),r(Ve())}},t.name,n&&" (you)"),o.a.createElement(Ke,{muted:!t.presence},t.custom.title)))},$e=function(e){var t=e.title,n=e.color;return o.a.createElement("svg",{width:16,height:16},o.a.createElement("title",null,t),o.a.createElement("g",{stroke:n,strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("path",{d:"M1 1l13.2 13.2M14.2 1L1 14.2"})))},Xe=r(13),et=Object(u.d)(Xe.a.section).withConfig({displayName:"ConversationMembersstyle__Wrapper",componentId:"sc-14b0zjt-0"})(["display:none;flex-direction:column;position:fixed;z-index:100;margin-left:",";width:100%;max-width:none;height:100%;background:",";","{position:relative;min-width:",";max-width:",";}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.sizes[5]}),(function(e){return e.theme.sizes[5]})),tt=u.d.div.withConfig({displayName:"ConversationMembersstyle__Controls",componentId:"sc-14b0zjt-1"})(["display:flex;align-items:center;justify-content:flex-end;position:absolute;top:0;min-height:",";padding:",";width:100%;"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[6])})),nt=u.d.div.withConfig({displayName:"ConversationMembersstyle__Header",componentId:"sc-14b0zjt-2"})(["display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;min-height:",";padding:",";padding-bottom:0;color:",";font-size:",";font-weight:",";"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.space[6]}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fontWeights.medium})),rt=u.d.div.withConfig({displayName:"ConversationMembersstyle__IconWrapper",componentId:"sc-14b0zjt-3"})(["display:flex;align-items:center;"]),at=u.d.div.withConfig({displayName:"ConversationMembersstyle__ConversationIcon",componentId:"sc-14b0zjt-4"})(["border-radius:",";width:",";height:",";line-height:",";font-family:",";font-weight:",";font-size:",";color:",";text-align:center;background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.color})),ot=u.d.div.withConfig({displayName:"ConversationMembersstyle__Details",componentId:"sc-14b0zjt-5"})(["height:",";padding-left:",";display:flex;flex-direction:column;justify-content:center;"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.space[6]})),it=u.d.div.withConfig({displayName:"ConversationMembersstyle__Channel",componentId:"sc-14b0zjt-6"})(["font-weight:",";font-size:",";color:",";"],(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText})),ct=u.d.div.withConfig({displayName:"ConversationMembersstyle__Title",componentId:"sc-14b0zjt-7"})(["font-weight:",";font-size:",";color:",";padding:",";"],(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.importantText}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])})),st=u.d.span.withConfig({displayName:"ConversationMembersstyle__CloseIcon",componentId:"sc-14b0zjt-8"})(["cursor:pointer;"]),ut=u.d.span.withConfig({displayName:"ConversationMembersstyle__ScrollableView",componentId:"sc-14b0zjt-9"})(["overflow-y:scroll;"]),lt=(u.d.div.withConfig({displayName:"ConversationMembersstyle__BackIconWrapper",componentId:"sc-14b0zjt-10"})(["cursor:pointer;display:flex;margin-right:",";justify-self:flex-start;","{display:none;}"],(function(e){return e.theme.space[7]}),(function(e){return e.theme.mediaQueries.medium})),function(e,t){return{open:{x:e?"0px":"0%",display:"flex"},closed:{x:e?t:"-100%",transitionEnd:{display:"none"}}}}),dt=r(19),mt=function(e){var t=e.title,n=e.active,r=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:20,height:15},o.a.createElement("title",null,t),o.a.createElement("g",{fill:n?r.colors.active:r.colors.normalText,fillRule:"evenodd"},o.a.createElement("path",{d:"M7 13.503a.5.5 0 00.5.497h11a.5.5 0 00.5-.497c-.001-.035-.032-.895-.739-1.734C17.287 10.612 15.468 10 13 10s-4.287.612-5.261 1.768c-.707.84-.738 1.699-.739 1.734M18.5 15h-11c-.827 0-1.5-.673-1.5-1.5 0-.048.011-1.19.924-2.315.525-.646 1.241-1.158 2.128-1.522C10.123 9.223 11.452 9 13 9s2.876.223 3.948.662c.887.364 1.603.876 2.128 1.522.914 1.125.924 2.267.924 2.315 0 .827-.673 1.5-1.5 1.5M13 1c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 7c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4M4.5 15h-3C.673 15 0 14.327 0 13.5c0-.037.008-.927.663-1.8.378-.505.894-.904 1.533-1.188.764-.34 1.708-.512 2.805-.512.179 0 .356.005.527.014a.5.5 0 01-.053.999 9.1 9.1 0 00-.473-.012c-3.894 0-3.997 2.379-4 2.503a.5.5 0 00.5.497h3a.5.5 0 010 1L4.5 15zM5 4c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2m0 5C3.346 9 2 7.654 2 6s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3"})))},ft=u.d.div.withConfig({displayName:"ConversationOccupancystyle__Wrapper",componentId:"sc-1trbjq4-0"})(["display:flex;align-items:center;align-self:flex-start;cursor:pointer;flex-direction:column-reverse;margin-left:",";color:",";font-family:",";font-weight:",";font-size:",";","{flex-direction:row;}"],(function(e){return e.theme.space[6]}),(function(e){var t=e.theme;return e.highlighted?t.colors.active:t.colors.normalText}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.light}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.mediaQueries.medium})),pt=u.d.section.withConfig({displayName:"ConversationOccupancystyle__OccupancyNumber",componentId:"sc-1trbjq4-1"})(["cursor:pointer;margin-right:",";margin-top:",";","{margin-right:",";margin-top:",";}em{font-style:normal;font-family:",";font-weight:",";}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[3]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.black})),ht=u.d.span.withConfig({displayName:"ConversationOccupancystyle__IconWrapper",componentId:"sc-1trbjq4-2"})(["cursor:pointer;"]),gt=Object(M.a)([de,Te,ze],(function(e,t,n){var r=t[e],a=n[e];return{joinedCount:r?r.length:0,presentCount:a?a.occupancy:0}})),bt=function(){var e=Object(y.c)(gt),t=e.joinedCount,n=e.presentCount,r=Object(y.c)(ie).ConversationMembers,a=Object(y.b)();return o.a.createElement(ft,{highlighted:r,onClick:function(){a(r?qe():{type:f.CONVERSATION_MEMBERS_VIEW_DISPLAYED})}},o.a.createElement(pt,null,o.a.createElement("em",null,n)," | ",t),o.a.createElement(ht,null,o.a.createElement(mt,{title:r?"Hide members list":"Show convsersation members",active:r})))},yt=u.d.section.withConfig({displayName:"Headerstyle__Wrapper",componentId:"atjq96-0"})(["display:flex;flex-direction:column;width:100%;min-height:",";justify-content:space-between;background:",";padding:",";padding-bottom:0px;","{background:transparent;}"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.backgrounds.panel}),(function(e){var t=e.theme;return"".concat(t.space[7]," ").concat(t.space[6])}),(function(e){return e.theme.mediaQueries.medium})),vt=u.d.div.withConfig({displayName:"Headerstyle__BackIconWrapper",componentId:"atjq96-1"})(["cursor:pointer;display:flex;margin-right:",";","{display:none;}"],(function(e){return e.theme.space[7]}),(function(e){return e.theme.mediaQueries.medium})),Et=u.d.div.withConfig({displayName:"Headerstyle__Body",componentId:"atjq96-2"})(["display:flex;align-items:center;justify-content:space-between;height:",";width:100%;"],(function(e){return e.theme.sizes[1]})),Ct=u.d.div.withConfig({displayName:"Headerstyle__Border",componentId:"atjq96-3"})(["display:none;border-bottom:",";","{display:inherit;}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[2])}),(function(e){return e.theme.mediaQueries.medium})),_t=u.d.div.withConfig({displayName:"Headerstyle__Information",componentId:"atjq96-4"})(["display:flex;flex-direction:column;height:100%;"]),It=u.d.div.withConfig({displayName:"Headerstyle__Name",componentId:"atjq96-5"})(["flex-grow:1;color:",";font-size:",";font-family:",";font-weight:",";text-transform:capitalize;"],(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Ot=u.d.div.withConfig({displayName:"Headerstyle__Description",componentId:"atjq96-6"})(["flex-grow:1;color:",";font-size:",";font-family:",";font-weight:",";text-transform:capitalize;"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular})),xt=function(e){var t=e.title,n=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:12,height:22},o.a.createElement("title",null,t),o.a.createElement("path",{d:"M3.621 11l7.94-7.94A1.5 1.5 0 009.439.94l-9 9a1.5 1.5 0 000 2.12l9 9a1.5 1.5 0 002.122-2.12L3.62 11z",fill:n.colors.active,fillRule:"nonzero"}))},wt=Object(M.a)([pe,de],(function(e,t){return Object(A.a)({},e[t])})),Nt=function(){var e=Object(y.c)(wt),t=Object(y.b)();return o.a.createElement(yt,null,o.a.createElement(Et,null,o.a.createElement(vt,{onClick:function(){t({type:f.MENU_VIEW_DISPLAYED})}},o.a.createElement(xt,{title:"back"})),o.a.createElement(_t,null,o.a.createElement(It,null,e.name),o.a.createElement(Ot,null,e.description)),o.a.createElement(bt,null)),o.a.createElement(Ct,null))},jt=Object(M.a)([Z,de,Te,ze],(function(e,t,n,r){var a=r[t];return n[t]?n[t].map((function(t){return Object(A.a)(Object(A.a)({},e[t.id]),{},{presence:!!a&&a.occupants.filter((function(e){return e.uuid===t.id})).length>0})})):[]})),Dt=function(){var e=Object(y.c)(P),t=Object(y.c)(jt),n=Object(y.c)(de),r=Object(y.b)(),i=Object(dt.b)(),c=Object(y.c)(ie),s=Object(a.useContext)(u.a),l=xe(s.mediaQueries.medium),d=Object(y.c)(wt),m=Oe(d.name,s.colors.avatars);return Object(a.useEffect)((function(){0===t.length&&(r(Object(q.o)({spaceId:n,include:{userFields:!0,customUserFields:!0,totalCount:!1}})),r(Object(q.n)({channels:[n]})))}),[t,n,i,r]),o.a.createElement(et,{animate:c.ConversationMembers?"open":"closed",variants:lt(l,s.sizes[4]),transition:{ease:"linear",duration:.15}},o.a.createElement(tt,null,o.a.createElement(st,{onClick:function(){r(qe())}},o.a.createElement($e,{color:s.colors.normalText,title:"close members list"}))),o.a.createElement(nt,null,o.a.createElement(rt,null,o.a.createElement(at,{color:m},"#"),o.a.createElement(ot,null,o.a.createElement(it,null,d.name)))),o.a.createElement(ct,null,"Members"),o.a.createElement(ut,null,function(e){return e.sort((function(e,t){return e.presence===t.presence?0:e.presence?-1:1}))}(t).map((function(t){return o.a.createElement(Ze,{user:t,key:t.id,you:t.id===e})}))))},Lt=Object(M.a)([pe,P,B],(function(e,t,n){return n[t]?n[t].map((function(t){return{id:t.id,name:e[t.id].name}})):[]})),Tt=function(){var e=Object(y.c)(P),t=Object(y.c)(pe),n=Object(y.c)(Lt),r=Object(y.c)(de),a=Object(y.c)(jt),i=Object(y.b)();return void 0===t?o.a.createElement("div",null,"Loading..."):o.a.createElement(Ne,null,o.a.createElement(De,null,"Conversations",o.a.createElement(Le,{onClick:function(){i(Object(q.q)()),i({type:f.JOIN_CONVERSATION_VIEW_DISPLAYED})}},o.a.createElement(ge,{title:"Join conversation"}))),o.a.createElement(je,null,n.map((function(t){return o.a.createElement(we,{id:t.id,name:t.name,onLeave:function(){var n,r;i((n=e,r=t.id,function(e,t,a){return r===se?Promise.resolve():e(Object(q.t)({userId:n,spaces:[{id:r}]})).then((function(){a.pubnub.api.unsubscribe({channels:[r]}),e(ue(se))}))}))},selected:t.id===r,key:t.id,unreadMessageCount:0,onClick:function(){i(ue(t.id)),i({type:f.CURRENT_CONVERSATION_VIEW_DISPLAYED}),i(Ge()),0===a.length&&i(Object(q.o)({spaceId:t.id,include:{userFields:!0,customUserFields:!0,totalCount:!1}}))}})}))))},St=Object(u.d)(Xe.a.section).withConfig({displayName:"Menustyle__Wrapper",componentId:"sc-165ibz1-0"})(["flex-direction:column;z-index:100;width:100%;max-width:none;background:",";","{min-width:",";max-width:",";}"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.sizes[4]}),(function(e){return e.theme.sizes[4]})),kt=u.d.div.withConfig({displayName:"Menustyle__Controls",componentId:"sc-165ibz1-1"})(["display:flex;align-items:center;justify-content:flex-end;position:absolute;top:0;min-height:",";padding:",";width:100%;"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[6])})),zt=u.d.span.withConfig({displayName:"Menustyle__CloseIcon",componentId:"sc-165ibz1-2"})(["cursor:pointer;","{display:none;}"],(function(e){return e.theme.mediaQueries.medium})),At=(u.d.img.withConfig({displayName:"Menustyle__Img",componentId:"sc-165ibz1-3"})(["align-self:flex-end;margin-top:auto;max-width:100%;"]),function(e,t){return{open:{x:"0%",display:"flex"},closed:{x:e?"-".concat(t):"-100%",transitionEnd:{display:"none"}}}}),Mt=function(){return o.a.createElement("svg",{height:"100%",viewBox:"0 0 60 60"},o.a.createElement("g",{id:"Team-Chat",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.a.createElement("rect",{id:"Rectangle",fill:"#DE2440",x:0,y:0,width:60,height:60,rx:10}),o.a.createElement("path",{d:"M17.8154297,40 L17.8154297,31.0058594 L21.8730469,31.0058594 C23.9726562,31.0058594 25.6108398,30.5493164 26.7875977,29.6362305 C27.9643555,28.7231445 28.5527344,27.2265625 28.5527344,25.1464844 C28.5527344,23.2128906 28.003418,21.8041992 26.9047852,20.9204102 C25.8061523,20.0366211 24.0556641,19.5947266 21.6533203,19.5947266 L21.6533203,19.5947266 L14.6074219,19.5947266 L14.6074219,40 L17.8154297,40 Z M21.2431641,28.5742188 L17.8154297,28.5742188 L17.8154297,22.0263672 L21.2431641,22.0263672 C22.6591797,22.0263672 23.6821289,22.2558594 24.3120117,22.7148438 C24.9418945,23.1738281 25.2568359,23.984375 25.2568359,25.1464844 C25.2568359,26.4648438 24.9272461,27.3657227 24.2680664,27.8491211 C23.6088867,28.3325195 22.6005859,28.5742188 21.2431641,28.5742188 L21.2431641,28.5742188 Z M35.0859375,40 L35.0859375,27.2558594 C35.3691406,27.1484375 35.8671875,27.0043945 36.5800781,26.8237305 C37.2929688,26.6430664 38.0791016,26.5527344 38.9384766,26.5527344 C40.2763672,26.5527344 41.2260742,26.8798828 41.7875977,27.5341797 C42.3491211,28.1884766 42.6298828,29.2236328 42.6298828,30.6396484 L42.6298828,30.6396484 L42.6298828,40 L45.75,40 L45.75,29.3212891 C45.75,27.6025391 45.1689453,26.3330078 44.0068359,25.5126953 C42.8447266,24.6923828 41.1845703,24.2822266 39.0263672,24.2822266 C38.2451172,24.2822266 37.4736328,24.3359375 36.7119141,24.4433594 C35.9501953,24.5507812 35.2495117,24.675293 34.6098633,24.8168945 C33.9702148,24.9584961 33.4208984,25.0976562 32.9619141,25.234375 L32.9619141,25.234375 L31.9804688,25.5419922 L31.9804688,40 L35.0859375,40 Z",id:"Pn",fill:"#FFFFFF",fillRule:"nonzero"})))},Rt=function(e){var t=e.title,n=e.active,r=e.size,i=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:r,height:r},o.a.createElement("title",null,t),o.a.createElement("circle",{cx:r/2,cy:r/2,r:r/2,fill:n?i.colors.success:i.colors.inactive,fillRule:"evenodd"}))},Wt=u.d.span.withConfig({displayName:"NetworkStatusstyle__Wrapper",componentId:"sc-4dza69-0"})(["height:","px;width:","px;display:flex;"],(function(e){return e.size}),(function(e){return e.size})),Ut=function(e){var t=e.size,n=Object(y.c)((function(e){return e.networkStatus.isConnected}));return o.a.createElement(Wt,{size:t},o.a.createElement(Rt,{size:t,title:n?"connected":"not connected",active:n}))},Vt=u.d.div.withConfig({displayName:"MyUserDetailsstyle__Wrapper",componentId:"sc-9uhamr-0"})(["display:flex;align-items:center;padding-bottom:0px;text-transform:capitalize;"]),Pt=u.d.div.withConfig({displayName:"MyUserDetailsstyle__UserName",componentId:"sc-9uhamr-1"})(["font-size:",";font-family:",";font-weight:",";color:",";padding-right:",";"],(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.space[1]})),Gt=function(){var e=Object(y.c)(P),t=Object(y.c)(Z)[e];return void 0===t?o.a.createElement("div",null,"Loading..."):o.a.createElement(Vt,null,o.a.createElement(Pt,null,t.name),o.a.createElement(Ut,{size:7}))};function Ht(){var e=Object(s.a)(["\n  color: ",";\n  font-size: ",";\n  font-family: ",";\n  font-weight: ",";\n"]);return Ht=function(){return e},e}function qt(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: ",";\n  min-height: ",";\n  justify-content: space-between;\n"]);return qt=function(){return e},e}function Bt(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  height: ",";\n  width: 100%;\n  padding: ",";\n  padding-bottom: 0px;\n"]);return Bt=function(){return e},e}var Ft,Jt=u.d.div(Bt(),(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.space[6]})),Qt=u.d.div(qt(),(function(e){return e.theme.space[4]}),(function(e){return e.theme.sizes[1]})),Yt=u.d.span(Ht(),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Kt=function(){var e=Object(a.useContext)(u.a);return o.a.createElement(Jt,null,o.a.createElement(Mt,null),o.a.createElement(Qt,null,o.a.createElement(Yt,null,e.custom.companyName),o.a.createElement(Gt,null)))},Zt=function(){var e=Object(a.useRef)(null),t=Object(y.c)(ie),n=Object(a.useContext)(u.a),r=xe(n.mediaQueries.medium),i=Object(y.b)();return o.a.createElement(St,{ref:e,animate:t.Menu||r?"open":"closed",variants:At(r,n.sizes[4])},o.a.createElement(kt,null,o.a.createElement(zt,{onClick:function(){return i(Ge())}},o.a.createElement($e,{color:n.colors.onPrimary,title:"close conversations"}))),o.a.createElement(Kt,null),o.a.createElement(Tt,null))},$t=Object(u.d)(Xe.a.section).withConfig({displayName:"CurrentConversationstyle__Wrapper",componentId:"sc-1a1khwv-0"})(["display:flex;flex-direction:column;position:fixed;z-index:0;margin:",";width:100%;height:100%;background:",";border:",";","{position:static;}"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.content}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.mediaQueries.medium})),Xt=(u.d.div.withConfig({displayName:"CurrentConversationstyle__Body",componentId:"sc-1a1khwv-1"})(["display:flex;flex-direction:column;margin:",";margin-top:",";height:100%;"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[0]})),{open:{display:"flex"},closed:{transitionEnd:{display:"none"}}}),en=r(18),tn=u.d.div.withConfig({displayName:"MessageListItemstyle__Wrapper",componentId:"ndpiy0-0"})(["display:flex;flex-direction:row;flex-shrink:0;padding:",";","{padding:",";}:hover{background-color:",";}:first-child{margin-top:auto;}:last-child{padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[5])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[6])}),(function(e){return e.theme.backgrounds.contentHover}),(function(e){return e.theme.space[4]})),nn=u.d.div.withConfig({displayName:"MessageListItemstyle__Body",componentId:"ndpiy0-1"})(["display:flex;flex-direction:column;margin-left:",";"],(function(e){return e.theme.space[5]})),rn=u.d.div.withConfig({displayName:"MessageListItemstyle__Header",componentId:"ndpiy0-2"})(["margin:",";margin-bottom:",";"],(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[1]})),an=(u.d.div.withConfig({displayName:"MessageListItemstyle__Content",componentId:"ndpiy0-3"})(["white-space:pre-wrap;width:fit-content;padding:",";font-size:",";font-family:",";font-weight:",";border-radius:",";border-top-left-radius:",";text-align:left;background:",";color:",";","{font-size:",";}"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.backgrounds.message}),(function(e){return e.theme.colors.messageText}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.fontSizes.regular})),u.d.div.withConfig({displayName:"MessageListItemstyle__Avatar",componentId:"ndpiy0-4"})(["width:",";height:",";"],(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}))),on=u.d.span.withConfig({displayName:"MessageListItemstyle__SenderName",componentId:"ndpiy0-5"})(["font-size:",";font-family:",";font-weight:",";text-transform:capitalize;color:",";cursor:",";&:hover{text-decoration:",";}"],(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.colors.importantText}),(function(e){e.theme;return e.showDetails?"pointer":"default"}),(function(e){e.theme;return e.showDetails?"underline":"default"})),cn=u.d.span.withConfig({displayName:"MessageListItemstyle__TimeSent",componentId:"ndpiy0-6"})(["font-size:",";font-family:",";font-weight:",";margin-left:",";color:",";"],(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.light}),(function(e){return e.theme.space[3]}),(function(e){return e.theme.colors.importantText})),sn=u.d.div.withConfig({displayName:"TextMessageDisplaystyle__Content",componentId:"sc-1ljf31d-0"})(["white-space:pre-wrap;border-radius:",";border-top-left-radius:",";padding:",";width:fit-content;line-height:1.5;font-size:",";font-family:",";font-weight:",";text-align:left;background:",";box-shadow:",";color:",";"],(function(e){return e.theme.radii.strong}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.space[4]}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.backgrounds.message}),(function(e){return e.theme.shadows[0]}),(function(e){return e.theme.colors.messageText})),un=function(e){var t=e.message;return o.a.createElement(sn,null,t.text)};!function(e){e.Text="text",e.Rtc="rtc"}(Ft||(Ft={}));var ln,dn,mn=Object(q.f)(),fn=Object(M.a)([function(e){return e.messages}],(function(e){return e.byId})),pn=function(e){var t=e.message;switch(t.type){case Ft.Text:return o.a.createElement(un,{message:t});default:W()(!1,'No component available for displaying message of type "'.concat(t.type,'"'))}},hn=function(e){var t=e.messageFragment,n=e.avatar,r=Object(y.b)(),a=t.sender,i=Object(y.c)(Z),c=!1;if(t.sender&&t.sender.id){var s=i[t.sender.id];c=void 0!==s}return o.a.createElement(tn,null,o.a.createElement(an,null,n),o.a.createElement(nn,null,o.a.createElement(rn,null,o.a.createElement(on,{showDetails:c,onClick:function(){c&&(r(Re(t.sender.id)),r(Ve()))}},a.name),o.a.createElement(cn,null,function(e){var t=new Date(parseInt(e)/1e4),n=t.getMinutes();return"".concat(t.getHours(),":").concat(n>9?n:"0"+n)}(t.timetoken))),o.a.createElement(pn,{message:t.message})))},gn=u.d.div.withConfig({displayName:"MessageListstyle__Wrapper",componentId:"w5jskt-0"})(["display:flex;flex-grow:1;flex-direction:column;overflow-y:scroll;height:100%;"]),bn=function(){var e=Object(y.c)(P),t=function(e){return{sender:{id:"PUBNUB-BOT",name:"PubNub Bot"},timetoken:"15735897955841496",message:{type:Ft.Text,senderId:"PUBNUB-BOT",text:"Welcome to Team Chat. \ud83d\udc4b\ud83d\udc4b \nWe logged you in as ".concat((t=e,t.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),". \nSend a message now to start interacting with other users in the app. \u2b07\ufe0f")}};var t}(Object(y.c)(Z)[e].name);return o.a.createElement(hn,{messageFragment:t,key:t.timetoken,avatar:o.a.createElement(Me,{size:36,name:"P N",userId:t.sender.id,color:"#DE2440"})})},yn=Object(M.a)([fn,de,Z],(function(e,t,n){return e[t]?Object.values(e[t]).filter((function(e){return e.channel===t})).map((function(e){return Object(A.a)(Object(A.a)({},e),{},{timetoken:String(e.timetoken),sender:n[e.message.senderId]||(e.message.senderId?{id:e.message.senderId,name:e.message.senderId}:{id:"unknown",name:"unknown"})})})):[]})),vn=function(){var e=Object(y.c)(de),t=Object(a.useState)({}),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(a.useCallback)((function(e){var t=r[e];t&&u.current.scrollTo(0,t)}),[e]),s=Object(y.c)(yn),u=Object(a.useRef)(document.createElement("div")),l=u.current,d=Object(a.useCallback)((function(){return l.scrollTop=l.scrollHeight-l.clientHeight}),[l]),m=l.scrollHeight-l.clientHeight===l.scrollTop;return Object(a.useEffect)((function(){m&&d()}),[s.length,m,d]),Object(a.useEffect)((function(){c(e)}),[c,e]),o.a.createElement(gn,{ref:u,onScroll:function(t){var n=t.target.scrollTop;0!==n&&function(t){i(Object(A.a)(Object(A.a)({},r),{},Object(en.a)({},e,t)))}(n)}},o.a.createElement(bn,null),s.map((function(e){return o.a.createElement(hn,{messageFragment:e,key:e.timetoken,avatar:o.a.createElement(Me,{size:36,name:e.sender.name,userId:e.sender.id})})})))},En=r(76),Cn=r(75),_n={messageDraftById:{}},In=Object(M.a)([function(e){return e.drafts}],(function(e){return e.messageDraftById})),On=function(e){return function(t,n){var r=n();return t(Object(q.v)({channel:de(r),message:{type:e}}))}},xn=(r(50),function(e,t){return e&&e.current&&e.current.contains(t.target)}),wn=function(e,t){var n=Object(a.useCallback)((function(n){if("length"in e){if(r=function(e){return xn(e,n)},e.reduce((function(e,t){return e||r(t)}),!1))return}else if(xn(e,n))return;var r;t()}),[t,e]);return Object(a.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[n]),e},Nn=r(22),jn=function(e){var t=e.title,n=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:18,height:18},o.a.createElement("title",null,t),o.a.createElement("g",{fill:n.colors.importantText,fillRule:"evenodd"},o.a.createElement("path",{d:"M9 .947C4.56.947.947 4.56.947 9c0 4.441 3.613 8.053 8.053 8.053 4.44 0 8.053-3.612 8.053-8.053C17.053 4.56 13.44.947 9 .947M9 18a8.943 8.943 0 01-6.364-2.636A8.937 8.937 0 010 9.001c0-2.404.936-4.664 2.636-6.364A8.939 8.939 0 019 0a8.94 8.94 0 016.364 2.637A8.94 8.94 0 0118 9a8.94 8.94 0 01-2.636 6.363A8.942 8.942 0 019 18"}),o.a.createElement("path",{d:"M13.957 6.632h-3.282a1.877 1.877 0 01-.217-1.32l.003-.01c.04-.199.112-.389.215-.565h3.282c.167.287.253.61.253.947 0 .337-.087.66-.253.948zm-6.631 0H4.043a1.877 1.877 0 01-.253-.948c0-.336.087-.661.253-.947h3.283c.102.176.174.366.215.564l.003.012a1.886 1.886 0 01-.217 1.319h-.001zm7.263-2.654a.473.473 0 00-.379-.19h-3.789a.475.475 0 00-.379.19 2.833 2.833 0 00-.406.758h-1.27a2.841 2.841 0 00-.408-.759.473.473 0 00-.38-.19H3.79a.475.475 0 00-.379.19 2.817 2.817 0 00-.568 1.706c0 .622.197 1.211.568 1.706.09.12.23.19.38.19h3.789c.149 0 .289-.07.379-.19a2.816 2.816 0 00.568-1.705h.948c0 .62.197 1.21.568 1.706.09.12.23.19.379.19h3.79c.148 0 .288-.07.378-.19a2.816 2.816 0 00.569-1.705c0-.62-.197-1.21-.569-1.706v-.001zM9 15.158a6.162 6.162 0 01-6.074-5.133.474.474 0 01.935-.157 5.192 5.192 0 005.138 4.342c.916 0 1.817-.241 2.605-.698a.474.474 0 01.475.82A6.158 6.158 0 019 15.156v.002z"})))},Dn=u.d.div.withConfig({displayName:"EmojiInputstyle__Wrapper",componentId:"sc-2q6xsd-0"})(["align-self:flex-end;"]),Ln=u.d.div.withConfig({displayName:"EmojiInputstyle__Dialog",componentId:"sc-2q6xsd-1"})(["position:absolute;bottom:0;right:0;"]),Tn=u.d.div.withConfig({displayName:"EmojiInputstyle__EmojiButton",componentId:"sc-2q6xsd-2"})(["cursor:pointer;svg{vertical-align:top;}"]),Sn=function(e){var t=e.value,n=e.onSelection,r=Object(a.useState)(!1),i=Object(b.a)(r,2),c=i[0],s=i[1],l=Object(a.useRef)(null),d=Object(a.useContext)(u.a),m=Object(a.useCallback)((function(){s(!1)}),[s]);wn([l],m);return o.a.createElement(Dn,{ref:l},o.a.createElement(Ln,null,c&&o.a.createElement(Nn.a,{emoji:"",title:"",native:!0,onSelect:function(e){"native"in e&&(n("".concat(t).concat(e.native)),m())},darkMode:d.custom.dark,color:d.colors.active})),o.a.createElement(Tn,{onClick:function(){s(!c)}},o.a.createElement(jn,{title:"Open emoji selector"})))},kn=u.d.div.withConfig({displayName:"EmojiSuggestionstyle__Popup",componentId:"sc-31hpud-0"})(["position:relative;"]),zn=u.d.section.withConfig({displayName:"EmojiSuggestionstyle__Suggestions",componentId:"sc-31hpud-1"})(["position:absolute;bottom:0;overflow-y:scroll;z-index:100;max-height:",";border:",";border-radius:",";color:",";"],(function(e){return e.theme.sizes[4]}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.colors.importantText})),An=u.d.div.withConfig({displayName:"EmojiSuggestionstyle__Heading",componentId:"sc-31hpud-2"})(["border-top-left-radius:",";border-top-right-radius:",";border-bottom:",";padding:",";font-size:",";background:",";"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderLight)}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.backgrounds.panel})),Mn=u.d.span.withConfig({displayName:"EmojiSuggestionstyle__EmojiSearchTerm",componentId:"sc-31hpud-3"})(["font-weight:",";"],(function(e){return e.theme.fontWeights.bold})),Rn=u.d.div.withConfig({displayName:"EmojiSuggestionstyle__Results",componentId:"sc-31hpud-4"})(["display:flex;flex-direction:row;flex-wrap:wrap;border-bottom-left-radius:",";border-bottom-right-radius:",";padding:",";background:",";","{flex-direction:column;flex-wrap:nowrap;}"],(function(e){return e.theme.radii.light}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium})),Wn=u.d.span.withConfig({displayName:"EmojiSuggestionstyle__Result",componentId:"sc-31hpud-5"})(["cursor:pointer;flex-grow:0;border-radius:",";padding:",";font-size:",";&:hover{background-color:",";color:",";}","{padding:",";flex-grow:1;}"],(function(e){return e.theme.radii.light}),(function(e){var t=e.theme;return"".concat(t.space[1]," ").concat(t.space[2])}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.colors.active}),(function(e){return e.theme.colors.activeText}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[2]})),Un=u.d.span.withConfig({displayName:"EmojiSuggestionstyle__Emoji",componentId:"sc-31hpud-6"})(["font-size:",";"],(function(e){return e.theme.fontSizes.regular})),Vn=u.d.span.withConfig({displayName:"EmojiSuggestionstyle__Colons",componentId:"sc-31hpud-7"})(["padding-right:0.5em;font-size:",";"],(function(e){return e.theme.fontSizes.small})),Pn=function(e){var t=e.value,n=e.onSelection,r=Object(a.useRef)(null),i=xe(Object(a.useContext)(u.a).mediaQueries.medium),c=!1,s=function(e){var t="",n=e.match(/:([a-z_]+)(:)?/);if(n)if(void 0!==n[2]){var r=Nn.b.emojis[n[1]];if(r&&"native"in r)e=e.replace(n[0],r.native),t="";else{var a=Nn.b.search(n[1]);a[0]&&"native"in a[0]&&(e=e.replace(n[0],a[0].native)),t=""}}else n[1].length>1?t=n[1]:n[1]&&(t="");return t}(t),l=function(e){return Nn.b.search(e)}(s);return c=""!==s&&l.length>0,wn([r],(function(){c=!1})),o.a.createElement(kn,null,c&&o.a.createElement(zn,{ref:r},o.a.createElement(An,null,"Suggestions for ",o.a.createElement(Mn,null,s)),o.a.createElement(Rn,null,l.slice(0,i?35:7).map((function(e){return o.a.createElement(Wn,{key:e.id,onClick:function(){return function(e,r){if("native"in r){var a=t.replace(":".concat(e),r.native);n(a)}}(s,e)}},o.a.createElement(Un,null,"native"in e&&e.native),o.a.createElement(Vn,null,e.colons))})))))},Gn=u.d.div.withConfig({displayName:"TextMessageEditorstyle__Wrapper",componentId:"sc-1n194zj-0"})(["flex-grow:1;"]),Hn=u.d.div.withConfig({displayName:"TextMessageEditorstyle__Container",componentId:"sc-1n194zj-1"})(["display:flex;align-items:center;height:auto;"]),qn=u.d.textarea.withConfig({displayName:"TextMessageEditorstyle__TextArea",componentId:"sc-1n194zj-2"})(["flex-grow:1;resize:none;overflow:auto;border:",";max-height:",";padding:",";font-size:",";font-family:",";font-weight:",";color:",";background:",";&::placeholder{color:",";}&:focus{outline:none;}"],(function(e){return e.theme.borders.none}),(function(e){return e.theme.sizes[4]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.fontSizes.messageTextInput}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.backgrounds.content}),(function(e){return e.theme.colors.normalText})),Bn=u.d.div.withConfig({displayName:"TextMessageEditorstyle__SendButton",componentId:"sc-1n194zj-3"})(["align-self:flex-end;display:none;padding:",";margin:",";margin-left:",";border-radius:",";background-color:",";","{display:flex;}"],(function(e){return e.theme.space[1]}),(function(e){var t=e.theme;return"-".concat(t.space[1])}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.radii.light}),(function(e){return e.theme.colors.primary[0]}),(function(e){return e.theme.mediaQueries.touch})),Fn=function(e){switch(e.type){case Ft.Text:return""!==e.text;default:W()(!1,'Cannot determin if message of type "'.concat(e.type,'" has been modified.'))}},Jn=function(e){var t=e.title,n=Object(a.useContext)(u.a);return o.a.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18"},o.a.createElement("title",null,t),o.a.createElement("path",{fill:"none",stroke:n.colors.onPrimary,strokeMiterlimit:10,d:"M.53,13.46V11.31c0-.74.29-1.1,1-1.15,2.17-.17,4.33-.31,6.5-.46l1.16-.11a.68.68,0,0,0,.67-.67.63.63,0,0,0-.55-.73c-1-.1-2-.16-3-.24L1.45,7.59a.84.84,0,0,1-.88-.82,40.83,40.83,0,0,1,0-5.07,1.36,1.36,0,0,1,2.07-1c2.5,1.26,5,2.54,7.48,3.82l6.14,3.14c.52.26,1,.59,1,1.23s-.45,1-1,1.26Q9.53,13.57,2.8,17A1.46,1.46,0,0,1,.53,15.64C.52,14.91.53,14.19.53,13.46Z"}))},Qn=function(e){setTimeout((function(){e.style.cssText="height:auto; padding:0",e.style.cssText="height:"+e.scrollHeight+"px"}),0)},Yn=function(e,t){return e.text===t?e:{type:Ft.Text,senderId:e.senderId,text:t}},Kn=function(e){var t=e.message,n=e.sendDraft,r=e.updateDraft,i=xe(Object(a.useContext)(u.a).mediaQueries.touch),c=t.text,s=Object(a.useRef)(document.createElement("textarea")),l=function(e){r(Yn(t,e)),s.current.focus()};return Object(a.useEffect)((function(){Qn(s.current)}),[s]),o.a.createElement(Gn,null,o.a.createElement(Pn,{value:c,onSelection:l}),o.a.createElement(Hn,null,o.a.createElement(qn,{ref:s,rows:1,value:c,onChange:function(e){r(Yn(t,e.target.value))},onKeyPress:function(e){if("Enter"===e.key&&!e.shiftKey&&!i){var r=Yn(t,c);Fn(r)&&n(r),e.preventDefault()}Qn(e.target)},placeholder:"Type Message"}),o.a.createElement(Sn,{value:c,onSelection:l}),o.a.createElement(Bn,{onClick:function(){return Fn(t)&&n(t)}},o.a.createElement(Jn,{title:"Send Message"}))))},Zn=u.d.div.withConfig({displayName:"MessageEditorstyle__Wrapper",componentId:"zjr6z-0"})(["display:flex;align-items:flex-end;position:relative;bottom:0;border-radius:",";border:",";padding:",";"],(function(e){return e.theme.radii.messageEditor}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.borderDark)}),(function(e){return e.theme.space[2]})),$n=function(e){var t=e.message,n=e.sendDraft,r=e.updateDraft;switch(t.type){case Ft.Text:return o.a.createElement(Zn,null,o.a.createElement(Kn,{message:t,sendDraft:n,updateDraft:r}));default:W()(!1,'No editor available for draft message of type "'.concat(t.type,'"'))}},Xn=u.d.div.withConfig({displayName:"MessageInputstyle__Wrapper",componentId:"sc-18oi0lf-0"})(["left:",";right:",";bottom:",";margin:",";margin-top:",";margin-bottom:",";"],(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[5]}),(function(e){return e.theme.space[6]}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[3]}));!function(e){e.ShowTypingIndicator="ti_show",e.HideTypingIndicator="ti_hide"}(ln||(ln={})),function(e){e.REMOVE_TYPING_INDICATOR="REMOVE_TYPING_INDICATOR",e.REMOVE_TYPING_INDICATOR_ALL="REMOVE_TYPING_INDICATOR_ALL"}(dn||(dn={}));var er,tr=Object(q.j)(),nr={byId:{}},rr=function(e,t,n,r){var a={byId:Object(A.a)({},e.byId)};return a.byId[t]&&(a.byId[t]=a.byId[t].filter((function(e){return r?!(e.publisher===n&&e.timetoken===r):!(e.publisher===n)}))),a},ar=Object(M.a)([function(e){return e.typingIndicators}],(function(e){return e.byId})),or=function(e){return{type:dn.REMOVE_TYPING_INDICATOR_ALL,payload:e}},ir=function(e){return{signal:function(t){t.message.type===ln.ShowTypingIndicator?setTimeout((function(){e(function(e){return{type:dn.REMOVE_TYPING_INDICATOR,payload:e}}({userId:t.publisher,channel:t.channel,timetoken:t.timetoken}))}),1e4):t.message.type===ln.HideTypingIndicator&&e(or({userId:t.publisher,channel:t.channel}))},presence:function(t){t.action!==q.b.LEAVE&&t.action!==q.b.TIMEOUT||e(or({userId:t.uuid,channel:t.channel}))}}},cr={},sr=Object(M.a)([In,de],(function(e,t){return e[t]})),ur=function(){var e=Object(y.c)(de),t=Object(y.c)(P),n=Object(y.c)(sr),r={type:Ft.Text,senderId:t,text:""},a=n||r,i=Object(y.b)();return o.a.createElement(Xn,null,o.a.createElement($n,{message:a,sendDraft:function(t){i(function(e){return function(t,n){var r=n();return t(Object(q.u)({channel:de(r),message:e}))}}(t)),i(function(e){return function(t){return t({type:"MESSAGE_DRAFT_DISCARDED",payload:{conversationId:e}})}}(e)),cr[e]=!1},updateDraft:function(t){i(function(e,t){return function(n){return n({type:"MESSAGE_DRAFT_UPDATED",payload:{conversationId:e,value:t}})}}(e,t)),t.text.length>0?cr[e]||(cr[e]=!0,i(On(ln.ShowTypingIndicator)),setTimeout((function(){cr[e]=!1}),9e3)):cr[e]&&(cr[e]=!1,i(On(ln.HideTypingIndicator)))}}))},lr=u.d.div.withConfig({displayName:"TypingIndicatorDisplaystyle__Wrapper",componentId:"sc-1s4xbtn-0"})(["padding-left:",";padding-bottom:",";font-size:",";font-family:",";font-weight:",";color:",";"],(function(e){return e.theme.space[6]}),(function(e){return e.theme.space[1]}),(function(e){return e.theme.fontSizes.small}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.colors.importantText})),dr=Object(M.a)([ar,de,Z,P],(function(e,t,n,r){return e[t]?Object.values(Object.values(e[t]||[]).filter((function(e){return e.channel===t&&e.publisher!==r})).reduce((function(e,t){return e[t.publisher]=t,e}),{})).filter((function(e){return Date.now()-e.timetoken/1e4<1e4})).map((function(e){return Object(A.a)(Object(A.a)({},e),{},{timetoken:String(e.timetoken),sender:n[e.publisher||""]||(e.publisher?{id:e.publisher,name:e.publisher}:{id:"unknown",name:"unknown"})})})):[]})),mr=function(){var e=Object(y.c)(dr);return 0===e.length?o.a.createElement(lr,null,"\xa0"):1===e.length?o.a.createElement(lr,null,e[0].sender.name," is typing ..."):o.a.createElement(lr,null,"Multiple users typing ...")},fr=function(){var e=Object(y.c)(ie);return o.a.createElement($t,{animate:e.CurrentConversation?"open":"closed",variants:Xt},o.a.createElement(Nt,null),o.a.createElement(vn,null),o.a.createElement(ur,null),o.a.createElement(mr,null))},pr=u.d.div.withConfig({displayName:"ConversationDescriptionstyle__Wrapper",componentId:"sc-1roh2qq-0"})(["cursor:pointer;display:flex;justify-content:center;flex-direction:column;min-height:",";font-family:",";font-weight:",";font-size:",";text-transform:capitalize;color:",";:hover{background:",";}"],(function(e){return e.theme.sizes[3]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.regular}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.importantText}),(function(e){return e.theme.backgrounds.contentHover})),hr=u.d.div.withConfig({displayName:"ConversationDescriptionstyle__Body",componentId:"sc-1roh2qq-1"})(["display:flex;max-height:",";padding:",";"],(function(e){return e.theme.sizes[1]}),(function(e){var t=e.theme;return"".concat(t.space[0]," ").concat(t.space[1])})),gr=u.d.div.withConfig({displayName:"ConversationDescriptionstyle__Name",componentId:"sc-1roh2qq-2"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"]),br=u.d.div.withConfig({displayName:"ConversationDescriptionstyle__Description",componentId:"sc-1roh2qq-3"})(["color:",";"],(function(e){return e.theme.colors.normalText})),yr=u.d.div.withConfig({displayName:"ConversationDescriptionstyle__Content",componentId:"sc-1roh2qq-4"})(["display:flex;flex-direction:column;padding-left:",";justify-content:space-between;"],(function(e){return e.theme.space[5]})),vr=(u.d.div.withConfig({displayName:"ConversationDescriptionstyle__IconWrapper",componentId:"sc-1roh2qq-5"})(["padding:",";"],(function(e){var t=e.theme;return"".concat(t.space[4]," ").concat(t.space[0])})),u.d.div.withConfig({displayName:"ConversationDescriptionstyle__ConversationIcon",componentId:"sc-1roh2qq-6"})(["border-radius:",";width:",";height:",";line-height:",";text-align:center;font-family:",";font-weight:",";font-size:",";color:",";background:",";"],(function(e){return e.theme.radii.medium}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.sizes[1]}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium}),(function(e){return e.theme.fontSizes.regular}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.color}))),Er=function(e){var t=e.conversation,n=e.onClick,r=Object(a.useContext)(u.a),i=Oe(t.name,r.colors.avatars);return o.a.createElement(pr,{onClick:n},o.a.createElement(hr,null,o.a.createElement(vr,{color:i},"#"),o.a.createElement(yr,null,o.a.createElement(gr,null,t.name),o.a.createElement(br,null,t.description))))},Cr=u.d.section.withConfig({displayName:"JoinConversationDialogstyle__ScrollView",componentId:"sc-1t63ow4-0"})(["text-align:left;overflow-y:scroll;> div{border-top:",";border-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])})),_r=u.d.div.withConfig({displayName:"JoinConversationDialogstyle__CloseButton",componentId:"sc-1t63ow4-1"})(["cursor:pointer;color:",";","{}"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.mediaQueries.medium})),Ir=u.d.div.withConfig({displayName:"JoinConversationDialogstyle__Header",componentId:"sc-1t63ow4-2"})(["display:flex;justify-content:space-between;padding:",";","{padding:",";padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[8]," ").concat(t.space[3])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[8]})),Or=u.d.div.withConfig({displayName:"JoinConversationDialogstyle__Title",componentId:"sc-1t63ow4-3"})(["font-size:",";font-weight:",";text-align:left;color:",";"],(function(e){return e.theme.fontSizes.large}),(function(e){return e.theme.fontWeights.bold}),(function(e){return e.theme.colors.importantText})),xr=u.d.div.withConfig({displayName:"Modal__Overlay",componentId:"j583yf-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;display:",";z-index:200;width:100%;height:100%;background:",";","{padding:10% 15%;background-color:rgba(0,0,0,0.5);}","{padding:10% 25%;}"],(function(e){return e.displayed?"flex":"none"}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.mediaQueries.large})),wr=Object(u.d)(Xe.a.section).withConfig({displayName:"Modal",componentId:"j583yf-1"})(["z-index:300;box-shadow:",";border-radius:",";width:100%;height:100%;padding:",";text-align:center;flex-direction:column;overflow:auto;background:",";","{border-radius:",";padding:",";}"],(function(e){return e.theme.shadows[1]}),(function(e){return e.theme.radii.square}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.backgrounds.panel}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.radii.strong}),(function(e){return e.theme.space[8]})),Nr=function(e){return{open:{y:"0%",display:"flex"},closed:{y:e?"-200%":"50%",transitionEnd:{display:"none"}}}},jr=Object(M.a)([he,P,B],(function(e,t,n){return e.filter((function(e){return!n[t].map((function(e){return e.id})).includes(e.id)}))})),Dr=function(){var e=Object(y.c)(jr),t=Object(y.c)(ie),n=Object(y.c)(P),r=Object(y.b)(),i=Object(a.useContext)(u.a),c=xe(i.mediaQueries.medium);return o.a.createElement(xr,{displayed:t.JoinConversation},o.a.createElement(wr,{animate:t.JoinConversation?"open":"closed",variants:Nr(c)},o.a.createElement(Ir,null,o.a.createElement(Or,null,"Join a Conversation"),o.a.createElement(_r,{onClick:function(){r(He())}},o.a.createElement($e,{color:i.colors.normalText,title:"close"}))),o.a.createElement(Cr,null,e.map((function(e){return o.a.createElement(Er,{key:"conversationDescription-".concat(e.id),onClick:function(){var t=e.id;r(function(e,t){return function(n,r,a){return n(Object(q.s)({userId:e,spaces:[{id:t}]})).then((function(){a.pubnub.api.subscribe({channels:[t],withPresence:!0}),n(ue(t))}))}}(n,t)),r(He())},conversation:e})})))))},Lr=u.d.span.withConfig({displayName:"UserDetailDialogstyle__UserName",componentId:"sc-1a556pd-0"})(["padding-right:",";"],(function(e){return e.theme.space[1]})),Tr=(u.d.section.withConfig({displayName:"UserDetailDialogstyle__ScrollView",componentId:"sc-1a556pd-1"})(["text-align:left;overflow-y:scroll;> div{border-top:",";border-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])}),(function(e){var t=e.theme;return"".concat(t.borders.light," ").concat(t.colors.neutral[1])})),u.d.div.withConfig({displayName:"UserDetailDialogstyle__CloseButton",componentId:"sc-1a556pd-2"})(["cursor:pointer;color:",";","{}"],(function(e){return e.theme.colors.normalText}),(function(e){return e.theme.mediaQueries.medium}))),Sr=u.d.div.withConfig({displayName:"UserDetailDialogstyle__Header",componentId:"sc-1a556pd-3"})(["display:flex;justify-content:space-between;padding:",";","{padding:",";padding-bottom:",";}"],(function(e){var t=e.theme;return"".concat(t.space[8]," ").concat(t.space[3])}),(function(e){return e.theme.mediaQueries.medium}),(function(e){return e.theme.space[0]}),(function(e){return e.theme.space[8]})),kr=u.d.div.withConfig({displayName:"UserDetailDialogstyle__Title",componentId:"sc-1a556pd-4"})(["padding:10px;display:flex;align-items:center;background:",";color:",";font-size:",";font-family:",";font-weight:",";text-align:left;"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),zr=u.d.div.withConfig({displayName:"UserDetailDialogstyle__Call",componentId:"sc-1a556pd-5"})(["cursor:pointer;color:",";background:",";border-radius:5px;border:1px solid #9b9b9b;padding:12px;"],(function(e){var t=e.theme;return e.isConnected?t.colors.primary[0]:t.colors.neutral[3]}),(function(e){var t=e.theme;return e.isConnected?t.colors.neutral[1]:t.colors.neutral[4]}));!function(e){e.NONE="NONE",e.DIALING="DIALING",e.RECEIVING_CALL="RECEIVING_CALL",e.ACCEPTED="ACCEPTED",e.MISSED_CALL="MISSED_CALL",e.CALL_NOT_ANSWERED="CALL_NOT_ANSWERED",e.OUTGOING_CALL_REJECTED="OUTGOING_CALL_REJECTED",e.INCOMING_CALL_REJECTED="INCOMING_CALL_REJECTED",e.OUTGOING_CALL_CONNECTED="OUTGOING_CALL_CONNECTED",e.INCOMING_CALL_CONNECTED="INCOMING_CALL_CONNECTED",e.OUTGOING_CALL_COMPLETED="OUTGOING_CALL_COMPLETED",e.INCOMING_CALL_COMPLETED="INCOMING_CALL_COMPLETED"}(er||(er={}));var Ar={currentCall:{callState:er.NONE,peerUserId:"",startTime:0},lastIncomingCall:{callState:er.NONE,peerUserId:"",startTime:0},callLog:[]},Mr=function(e){return{type:"CALL_CONNECTED",payload:{status:e}}},Rr=function(e,t){return{type:"CALL_COMPLETED",payload:{status:e,endTime:t}}},Wr=function(e){return e.rtc},Ur=Object(M.a)(Wr,(function(e){return e.currentCall})),Vr=Object(M.a)(Wr,(function(e){return e.lastIncomingCall})),Pr=function(){var e=Object(y.b)(),t=Object(y.c)(ie),n=Object(a.useContext)(u.a),r=xe(n.mediaQueries.medium),i=Object(y.c)(P),c=Object(y.c)(Ue),s=Object(y.c)(Z),l=Object(y.c)(de),d=Object(y.c)(ze),m=s[c],p=m?m.name:"",h=d[l],g=h&&h.occupants.filter((function(e){return e.uuid===c})).length>0;return o.a.createElement(xr,{displayed:t.UserDetail},o.a.createElement(wr,{animate:t.UserDetail?"open":"closed",variants:Nr(r)},o.a.createElement(Sr,null,o.a.createElement(kr,null,o.a.createElement(Lr,null,p),g&&o.a.createElement(Rt,{size:7,title:g?"connected":"not connected",active:g})),o.a.createElement(Tr,{onClick:function(){e({type:f.USER_DETAIL_VIEW_HIDDEN})}},o.a.createElement($e,{color:n.colors.normalText,title:"close"}))),i!==c&&o.a.createElement(zr,{isConnected:g,onClick:function(){var t,n;e((t=m.id,n=(new Date).getTime(),{type:"CALL_SIGNAL_SENT",payload:{userId:t,startTime:n}})),e(Pe())}},"Initiate a call",g||" ("+p+" may not be online)"),i===c&&o.a.createElement("div",null,"My Profile")))},Gr=r(8),Hr=r.n(Gr),qr=r(10),Br=u.d.div.withConfig({displayName:"RtcDisplaystyle__Wrapper",componentId:"wa7rhr-0"})(["z-index:1000;position:fixed;background:black;color:white;line-height:normal;display:",";flex-direction:column;"],(function(e){e.theme;return e.displayed?"flex":"none"})),Fr=u.d.div.withConfig({displayName:"RtcDisplaystyle__VideoWrapper",componentId:"wa7rhr-1"})(["resize:both;overflow:auto;width:100%;height:100%;& video{margin:-2px;padding:2px;width:100%;height:100%;}"]),Jr=u.d.div.withConfig({displayName:"RtcDisplaystyle__CloseButton",componentId:"wa7rhr-2"})(["margin-top:2px;margin-right:2px;cursor:pointer;color:",";"],(function(e){return e.theme.colors.normalText})),Qr=u.d.div.withConfig({displayName:"RtcDisplaystyle__Header",componentId:"wa7rhr-3"})(["display:flex;justify-content:space-between;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:",";"],(function(e){return e.theme.colors.neutral[3]})),Yr=u.d.div.withConfig({displayName:"RtcDisplaystyle__Body",componentId:"wa7rhr-4"})([""]),Kr=u.d.div.withConfig({displayName:"RtcDisplaystyle__Title",componentId:"wa7rhr-5"})(["padding-left:10px;padding-right:10px;display:flex;align-items:center;background:",";color:",";font-size:",";font-family:",";font-weight:",";text-align:left;"],(function(e){return e.theme.backgrounds.primary}),(function(e){return e.theme.colors.onPrimary}),(function(e){return e.theme.fontSizes.medium}),(function(e){return e.theme.fonts.app}),(function(e){return e.theme.fontWeights.medium})),Zr=r(47),$r={peerConnection:void 0},Xr=Zr.rtcIceConfig,ea=(Zr.rtcDialingTimeoutSeconds,{peerConnection:new RTCPeerConnection,inboundStream:void 0,negotingOffer:!1}),ta=Object(M.a)([fn,P,Z],(function(e,t,n){var r=e[t]?Object.values(e[t]).filter((function(e){return e.channel===t})).map((function(e){return Object(A.a)(Object(A.a)({},e.message),{},{timetoken:String(e.timetoken),sender:n[e.message.senderId]||(e.message.senderId?{id:e.message.senderId,name:e.message.senderId}:{id:"unknown",name:"unknown"})})})):[];return r.length>0?r[r.length-1]:void 0})),na={},ra=function(){var t=Object(dt.b)(),n=Object(a.useState)(!0),r=Object(b.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(!1),l=Object(b.a)(s,2),d=l[0],m=l[1],p=Object(a.useState)(!1),h=Object(b.a)(p,2),g=h[0],v=h[1],E=Object(a.useState)(!1),C=Object(b.a)(E,2),_=(C[0],C[1]),I=Object(a.useState)(!1),O=Object(b.a)(I,2),x=O[0],w=O[1],N=Object(y.b)(),j=Object(y.c)(Ur),D=Object(y.c)(Vr),L=Object(y.c)(ta),T=Object(y.c)(ie),S=Object(y.c)(P),k=Object(a.useContext)(u.a);t.removeListener(na),t.addListener(na),na.message=function(){var e=Object(qr.a)(Hr.a.mark((function e(n){var r;return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ea.peerConnection||"closed"===ea.peerConnection.connectionState||!n.message.candidate){e.next=10;break}return console.log("candidate received from peer",n.message.candidate),e.prev=2,e.next=5,ea.peerConnection.addIceCandidate(n.message.candidate);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("condidate: error setting ice candidate: ",e.t0);case 10:if(!n.message.offer||"offer"!==n.message.offer.type||!ea.negotingOffer&&"stable"===ea.peerConnection.signalingState){e.next=35;break}return console.log("offer received from peer",n.message.offer),e.prev=12,e.next=15,ea.peerConnection.setRemoteDescription(n.message.offer);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log("offer: error setting remote desc: ",e.t1);case 20:return e.next=22,z();case 22:return e.next=24,ea.peerConnection.createAnswer();case 24:return r=e.sent,e.prev=25,e.next=28,ea.peerConnection.setLocalDescription(r);case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(25),console.log("offer: error setting local desc: ",e.t2);case 33:console.log("offer: sending answer ",ea.peerConnection.localDescription),t.publish({channel:j.peerUserId,message:{answer:ea.peerConnection.localDescription}});case 35:if(!n.message.answer||"answer"!==n.message.answer.type){e.next=45;break}return console.log("answer: answer received from peer",n.message.answer),e.prev=37,e.next=40,ea.peerConnection.setRemoteDescription(n.message.answer);case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(37),console.log("answer: error setting remote desc: ",e.t3);case 45:case"end":return e.stop()}}),e,null,[[2,7],[12,17],[25,30],[37,42]])})));return function(t){return e.apply(this,arguments)}}();var z=function(){var e=Object(qr.a)(Hr.a.mark((function e(){var t;return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:d,video:i});case 2:t=e.sent,console.log("connect media: adding tracks"),t.getTracks().forEach((function(e){return ea.peerConnection.addTrack(e,t)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var n=Object(qr.a)(Hr.a.mark((function n(){return Hr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:ea.peerConnection=(r=Xr,$r.peerConnection=new RTCPeerConnection({bundlePolicy:"max-compat",rtcpMuxPolicy:"negotiate",iceServers:r}),$r.peerConnection.onicegatheringstatechange=function(e){console.log("onicegatheringstatechange",e)},$r.peerConnection.oniceconnectionstatechange=function(e){console.log("oniceconnectionstatechange",e)},$r.peerConnection.onsignalingstatechange=function(e){console.log("onsignalingstatechange",e)},$r.peerConnection),ea.inboundStream=void 0,ea.peerConnection.onicecandidate=function(){var n=Object(qr.a)(Hr.a.mark((function n(r){return Hr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.candidate){n.next=12;break}return console.log("candidate sent to peer"),console.log("candidate: sending candidate ",r),console.log("candidate: ice candidate length ",r.candidate&&r.candidate.candidate&&r.candidate.candidate.length),n.prev=4,n.next=7,t.publish({channel:j.peerUserId,message:{candidate:r.candidate}});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.log("error sending ice candidate to peer",n.t0);case 12:case"end":return n.stop()}}),n,null,[[4,9]])})));return function(e){return n.apply(this,arguments)}}(),ea.peerConnection.ontrack=function(e){e.streams&&e.streams[0]?document.querySelector("#remotevideo").srcObject=e.streams[0]:(ea.inboundStream||(ea.inboundStream=new MediaStream,document.querySelector("#remotevideo").srcObject=ea.inboundStream),ea.inboundStream.addTrack(e.track))},ea.peerConnection.onconnectionstatechange=function(){var e=Object(qr.a)(Hr.a.mark((function e(t){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onconnectionstatechange",ea.peerConnection.connectionState);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ea.peerConnection.onnegotiationneeded=Object(qr.a)(Hr.a.mark((function e(){var n;return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("negotiation: on negotiation needed"),e.prev=1,ea.negotingOffer=!0,e.next=5,z();case 5:return e.next=7,ea.peerConnection.createOffer();case 7:return n=e.sent,console.log("negotiation: attempting local offer",n),e.prev=9,e.next=12,ea.peerConnection.setLocalDescription(n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("negotiation: error setting local desc: ",e.t0);case 17:return console.log("negotiation: sending offer",ea.peerConnection.localDescription),console.log("negotiation: sending local offer to peer"),e.prev=19,e.next=22,t.publish({channel:j.peerUserId,message:{offer:ea.peerConnection.localDescription}});case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(19),console.log("error sending offer from negotiation needed",e.t1);case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(1),console.log("error in negotiation needed",e.t2);case 32:return e.prev=32,ea.negotingOffer=!1,e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[1,29,32,35],[9,14],[19,24]])})));case 6:case"end":return n.stop()}var r}),n)})));return function(){return n.apply(this,arguments)}}(),R=function(){document.querySelector("#myvideo").srcObject&&document.querySelector("#myvideo").srcObject.getTracks().forEach((function(e){e.stop()})),document.querySelector("#myvideo").srcObject=void 0,document.querySelector("#remotevideo").srcObject&&document.querySelector("#remotevideo").srcObject.getTracks().forEach((function(e){e.stop()})),document.querySelector("#remotevideo").srcObject=void 0,c(!1),m(!1)},W=function(){var e=Object(qr.a)(Hr.a.mark((function e(t){var n;return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(Object(A.a)(Object(A.a)({},t),{},{audio:!1}));case 2:n=e.sent,document.querySelector("#myvideo").srcObject=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(qr.a)(Hr.a.mark((function e(t){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){e.video?W(e):e.audio?U(e):R()},G=function(){var e=Object(qr.a)(Hr.a.mark((function e(){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("answer call"),N((t=L.sender.id,n=L.startTime,{type:"CALL_ACCEPTED",payload:{userId:t,startTime:n}})),N(Mr(er.INCOMING_CALL_CONNECTED)),e.next=5,M();case 5:console.log("answer: sending answer",L.sender.id),N(Object(q.u)({channel:L.sender.id,message:{type:Ft.Rtc,callState:er.OUTGOING_CALL_CONNECTED,startTime:L.startTime,senderId:S}}));case 7:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){V({audio:d,video:i});var e=function(){var e=Object(qr.a)(Hr.a.mark((function e(){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("calling "+j.peerUserId),v(!0),console.log("calluser: calling",j.peerUserId),N(Object(q.u)({channel:j.peerUserId,message:{type:Ft.Rtc,callState:er.DIALING,startTime:j.startTime,senderId:S}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(qr.a)(Hr.a.mark((function e(){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("receiving"),N((t=L.sender.id,n=L.startTime,{type:"CALL_SIGNAL_RECEIVED",payload:{userId:t,startTime:n}})),N(Pe());case 3:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(qr.a)(Hr.a.mark((function e(){var n,r;return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("accepted: outgoing call accepted"),w(!0),N(Mr(er.OUTGOING_CALL_CONNECTED)),M(),e.next=6,z();case 6:return e.next=8,ea.peerConnection.createOffer();case 8:return r=e.sent,console.log("accepted: attempting local offer",r),e.prev=10,e.next=13,ea.peerConnection.setLocalDescription(r);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("accepted: error setting local desc: ",e.t0);case 18:console.log("accepted: offer length",null===(n=ea.peerConnection.localDescription)||void 0===n?void 0:n.toJSON().length),console.log("accepted: sending offer ",ea.peerConnection.localDescription),console.log("accepted: sending local offer to peer"),t.publish({channel:j.peerUserId,message:{offer:ea.peerConnection.localDescription}});case 22:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(qr.a)(Hr.a.mark((function e(t,n){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("peer ended"),v(!1),N(Rr(t,n)),H(),ea.peerConnection&&ea.peerConnection.close();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();g||j.callState!==er.DIALING?!L||D.callState!==er.NONE&&D.startTime===L.startTime||L.type!==Ft.Rtc||L.callState!==er.DIALING?g&&!x&&L&&L.startTime===j.startTime&&L.type===Ft.Rtc&&L.callState===er.OUTGOING_CALL_CONNECTED?r():j.callState!==er.OUTGOING_CALL_CONNECTED&&j.callState!==er.INCOMING_CALL_CONNECTED||!L||L.startTime!==j.startTime||L.type!==Ft.Rtc||L.callState!==er.OUTGOING_CALL_COMPLETED&&L.callState!==er.INCOMING_CALL_COMPLETED||a(L.callState,(new Date).getTime()):n():e()}));var H=function(){R(),N({type:f.RTC_VIEW_HIDDEN}),v(!1),_(!1),w(!1),c(!0),m(!1),ea.inboundStream=void 0,ea.negotingOffer=!1},B=function(){return j.callState===er.DIALING};return o.a.createElement(Br,{displayed:T.Rtc},o.a.createElement(Qr,null,o.a.createElement(Kr,null,"Call"),o.a.createElement(Jr,{onClick:function(){H()}},o.a.createElement($e,{color:k.colors.normalText,title:"close"}))),o.a.createElement(Yr,null,o.a.createElement("button",{onClick:function(){V({audio:d,video:!i}),c(!i)}},"Video (",i?"on":"off",")"),o.a.createElement("button",{onClick:function(){V({audio:!d,video:i}),m(!d)}},"Audio (",d?"on":"off",")"),(j.callState===er.OUTGOING_CALL_CONNECTED||j.callState===er.INCOMING_CALL_CONNECTED)&&o.a.createElement("button",{onClick:function(){console.log("end call"),console.log("end call: sending end",j.peerUserId),N(Object(q.u)({channel:j.peerUserId,message:{type:Ft.Rtc,callState:g?er.INCOMING_CALL_COMPLETED:er.OUTGOING_CALL_COMPLETED,startTime:j.startTime,senderId:S}})),N(Rr(g?er.OUTGOING_CALL_COMPLETED:er.INCOMING_CALL_COMPLETED,(new Date).getTime())),H()}},"Connected (click to end call)"),o.a.createElement(Fr,null,B()&&o.a.createElement("div",null,"Dialing ..."),!B()&&j.callState!==er.OUTGOING_CALL_CONNECTED&&j.callState!==er.INCOMING_CALL_CONNECTED&&D.callState===er.RECEIVING_CALL&&o.a.createElement("div",null,"Receiving Call ...",o.a.createElement("button",{onClick:G},"Answer")),D.callState!==er.RECEIVING_CALL&&(j.callState===er.OUTGOING_CALL_COMPLETED||j.callState===er.INCOMING_CALL_COMPLETED)&&o.a.createElement("div",null,"Call Completed"),o.a.createElement("div",null,"RemoteVideo"),o.a.createElement("video",{id:"remotevideo",autoPlay:!0,playsInline:!0}),o.a.createElement("audio",{id:"remoteaudio",autoPlay:!0}),o.a.createElement("div",null,"LocalVideo"),o.a.createElement("video",{style:{width:"25%"},id:"myvideo",autoPlay:!0,playsInline:!0}))))},aa=function(){return o.a.createElement(X,null,o.a.createElement(Zt,null),o.a.createElement(fr,null),o.a.createElement(Dt,null),o.a.createElement(Dr,null),o.a.createElement(Pr,null),o.a.createElement(ra,null))},oa=r(34),ia=function(e){return 0!==e.publishKey.length&&0!==e.subscribeKey.length},ca=u.d.div.withConfig({displayName:"ErrorBannerstyle__ErrorBanner",componentId:"sc-1byxyw9-0"})(["text-align:center;justify-content:center;display:flex;padding:",";background-color:",";color:",";"],(function(e){return e.theme.space[3]}),(function(e){return e.theme.colors.error}),(function(e){return e.theme.colors.activeText})),sa=o.a.createElement(ca,null,o.a.createElement("div",null,"Please run ",o.a.createElement("pre",null,"npm setup"))),ua=function(){var e=Object(y.c)(G)?o.a.createElement(aa,null):o.a.createElement($,null);return o.a.createElement(g,null,!ia(oa)&&sa,e)},la=["600px","1200px"],da={medium:"@media screen and (min-width: ".concat(la[0],")"),large:"@media screen and (min-width: ".concat(la[1],")"),touch:"@media (hover: none)"},ma=["0px","11px","13px","15px","20px","16px"],fa={none:ma[0],small:ma[1],regular:ma[2],medium:ma[3],large:ma[4],messageTextInput:ma[5]},pa=[0,300,400,500,700,900],ha={none:pa[0],light:pa[1],regular:pa[2],medium:pa[3],bold:pa[4],black:pa[5]},ga={error:"#B63133",success:"#62E905",inactive:"#F5A623",primary:["#8E2DE2","#4A00E0"],neutral:["#FFFFFF","#F8F6FD","#F1EDFD","#9B9B9B","#585858"],avatars:["#F7861C","#35B7DF","#DE2440","#1F68EF","#9F34C3"]},ba={onPrimary:ga.neutral[0],selectedText:"rgba(0, 0, 0, 0.5)",active:ga.primary[0],activeText:ga.neutral[0],messageText:ga.neutral[4],normalText:ga.neutral[3],importantText:ga.neutral[4],avatarText:ga.neutral[0],borderLight:ga.neutral[2],borderDark:ga.neutral[3]},ya={primary:"linear-gradient(180deg, ".concat(ga.primary[0]," 0%, ").concat(ga.primary[1]," 100%)"),primaryHover:"rgba(255, 255, 255, 0.1)",primaryActive:"rgba(0, 0, 0, 0.1)",panel:ga.neutral[0],panelHover:ga.neutral[1],content:ga.neutral[1],contentHover:ga.neutral[2],message:ga.neutral[0]},va=["0","5px","10px","100vmax"],Ea={square:va[0],light:va[1],messageEditor:va[1],medium:va[2],strong:va[2],round:va[3]},Ca=["0","1px","5px"],_a=["solid"],Ia=["none","".concat(Ca[1]," ").concat(_a[0]),"".concat(Ca[2]," ").concat(_a[0])],Oa={none:Ia[0],light:Ia[1],strong:Ia[2]},xa={breakpoints:la,mediaQueries:da,fonts:{app:'"Roboto", sans-serif'},fontSizes:Object(A.a)(Object(A.a)({},ma),fa),fontWeights:Object(A.a)(Object(A.a)({},pa),ha),colors:Object(A.a)(Object(A.a)({},ga),ba),backgrounds:ya,sizes:["0","36px","56px","85px","260px","290px"],space:["0","10px","12px","14px","16px","21px","24px","32px","40px"],radii:Object(A.a)(Object(A.a)({},va),Ea),borderWidths:Ca,borderStyles:_a,borders:Object(A.a)(Object(A.a)({},Ia),Oa),shadows:["0 6px 10px rgba(103, 19, 176, 0.06)","0 4px 30px rgba(0, 0, 0, 0.4)"],custom:{dark:!1,companyName:"PubNub",tagLine:"World-Class APIs for In-App Chat"}},wa=r(73),Na=r.n(wa),ja=r(74),Da=Object(q.g)(!1),La=Object(me.c)({layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.MENU_VIEW_DISPLAYED:return ne(e,p.Menu);case f.MENU_VIEW_HIDDEN:return re(e,p.Menu);case f.CURRENT_CONVERSATION_VIEW_DISPLAYED:return ne(e,p.CurrentConversation);case f.CURRENT_CONVERSATION_VIEW_HIDDEN:return re(e,p.CurrentConversation);case f.CONVERSATION_MEMBERS_VIEW_DISPLAYED:return ne(e,p.ConversationMembers);case f.CONVERSATION_MEMBERS_VIEW_HIDDEN:return re(e,p.ConversationMembers);case f.JOIN_CONVERSATION_VIEW_DISPLAYED:return ne(e,p.JoinConversation);case f.JOIN_CONVERSATION_VIEW_HIDDEN:return re(e,p.JoinConversation);case f.USER_DETAIL_VIEW_DISPLAYED:return ne(e,p.UserDetail);case f.USER_DETAIL_VIEW_HIDDEN:return re(e,p.UserDetail);case f.RTC_VIEW_DISPLAYED:return ne(e,p.Rtc);case f.RTC_VIEW_HIDDEN:return re(e,p.Rtc)}return e},networkStatus:Da,users:K,conversations:fe,joinedConversations:F,drafts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE_DRAFT_UPDATED":var n=Object(A.a)(Object(A.a)({},e.messageDraftById),{},Object(en.a)({},t.payload.conversationId,t.payload.value));return Object(A.a)(Object(A.a)({},e),{},{messageDraftById:n});case"MESSAGE_DRAFT_DISCARDED":var r=e.messageDraftById,a=t.payload.conversationId,o=(r[a],Object(En.a)(r,[a].map(Cn.a)));return Object(A.a)(Object(A.a)({},e),{},{messageDraftById:o})}return e},conversationMembers:Se,memberPresence:ke,messages:mn,typingIndicators:function(e,t){switch(t.type){case q.c.SIGNAL_RECEIVED:return t.payload.message.type===ln.ShowTypingIndicator?tr(e,t):e||nr;case dn.REMOVE_TYPING_INDICATOR:return rr(e,t.payload.channel,t.payload.userId,t.payload.timetoken);case dn.REMOVE_TYPING_INDICATOR_ALL:return rr(e,t.payload.channel,t.payload.userId);case q.a.MESSAGE_RECEIVED:return rr(e,t.payload.channel,t.payload.message.senderId);default:return e||nr}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGIN_IN":return Object(A.a)(Object(A.a)({},e),{},{isLoggingIn:!0});case"LOGIN_SUCCEEDED":return Object(A.a)(Object(A.a)({},e),{},{isLoggingIn:!1,loggedInUserId:t.payload.loggedInUserId});default:return e}},currentConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOCUS_ON_CONVERSATION":return Object(A.a)(Object(A.a)({},e),{},{currentConversationId:t.payload});default:return e}},userDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":return Object(A.a)(Object(A.a)({},e),{},{selectedUserId:t.payload.selectedUserId});default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALL_SIGNAL_SENT":return Object(A.a)(Object(A.a)({},e),{},{currentCall:{peerUserId:t.payload.userId,callState:er.DIALING,startTime:t.payload.startTime}});case"CALL_SIGNAL_RECEIVED":if(e.currentCall.callState===er.OUTGOING_CALL_CONNECTED||e.currentCall.callState===er.INCOMING_CALL_CONNECTED){var n={peerUserId:t.payload.userId,callState:er.RECEIVING_CALL,startTime:t.payload.startTime,missed:!0};return Object(A.a)(Object(A.a)({},e),{},{lastIncomingCall:n,callLog:[].concat(Object(ee.a)(e.callLog),[n])})}var r={peerUserId:t.payload.userId,callState:er.RECEIVING_CALL,startTime:t.payload.startTime};return Object(A.a)(Object(A.a)({},e),{},{lastIncomingCall:r});case"CALL_ACCEPTED":var a=Object(A.a)(Object(A.a)({},e.lastIncomingCall),{},{startTime:t.payload.startTime,callState:er.ACCEPTED});return Object(A.a)(Object(A.a)({},e),{},{currentCall:a});case"CALL_REJECTED":var o=Object(A.a)(Object(A.a)({},e.currentCall),{},{endTime:t.payload.endTime,callState:t.payload.status,rejected:!0});return Object(A.a)(Object(A.a)({},e),{},{currentCall:o,callLog:[].concat(Object(ee.a)(e.callLog),[o])});case"CALL_MISSED":var i=Object(A.a)(Object(A.a)({},e.currentCall),{},{endTime:t.payload.endTime,callState:er.MISSED_CALL,missed:!0});return Object(A.a)(Object(A.a)({},e),{},{currentCall:i,callLog:[].concat(Object(ee.a)(e.callLog),[i])});case"CALL_NOT_ANSWERED":var c=Object(A.a)(Object(A.a)({},e.currentCall),{},{endTime:t.payload.endTime,callState:er.CALL_NOT_ANSWERED,notAnswered:!0});return Object(A.a)(Object(A.a)({},e),{},{currentCall:c,callLog:[].concat(Object(ee.a)(e.callLog),[c])});case"CALL_CONNECTED":var s=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:t.payload.status});return Object(A.a)(Object(A.a)({},e),{},{currentCall:s});case"CALL_COMPLETED":var u=Object(A.a)(Object(A.a)({},e.currentCall),{},{callState:t.payload.status,completed:!0});return Object(A.a)(Object(A.a)({},e),{},{currentCall:u,callLog:[].concat(Object(ee.a)(e.callLog),[u])});default:return e}}}),Ta={},Sa=me.d,ka=Object.assign({},{restore:!0,heartbeatInterval:0},oa),za=new Na.a(ka),Aa=function(e){var t=Sa(Object(me.a)(ja.a.withExtraArgument(e)));return Object(me.e)(La,Ta,t)}({pubnub:{api:za}}),Ma=function(){za.unsubscribeAll()},Ra=function(){return Object(a.useEffect)((function(){return za.addListener(Object(q.i)(Aa.dispatch)),za.addListener(ir(Aa.dispatch)),Ma}),[]),Object(a.useEffect)((function(){window.addEventListener("beforeunload",Ma)}),[]),o.a.createElement(u.b,{theme:xa},o.a.createElement(y.a,{store:Aa},o.a.createElement(dt.a,{client:za},o.a.createElement(h,null),o.a.createElement(d,null),o.a.createElement(ua,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(Ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},34:function(e){e.exports=JSON.parse('{"publishKey":"pub-c-10921688-79ed-4759-b6e2-4388eed57ffe","subscribeKey":"sub-c-bc7c86ac-8ff9-11ea-9dd4-caf89c7998a9"}')},46:function(e){e.exports=JSON.parse('["user_a652eb6cc34b44c4a39b28fcc24d062b","user_d06c7d5ddc1c4c85bd66844198b2ca38","user_a673547880824a0687b3041af36a5de4","user_102a15c8bc394bdc90d1c8eab58b1de9","user_2ada61d287aa42b59d620c474493474f","user_4ec689d24845466e93ee358c40358473","user_83647bfb6bcd412d93b1e57e1b602d3a","user_def709b1adfc4e67b98bb7a820f581b1","user_6ef19fcc68824f9f9e3d908d796f21a3","user_05f4ac447efc478c834e53ba0cb34444","user_a56c20222c484ff8987ec9b69b0c8f5b","user_ee7e4c6cedbf40cdaaed6de7696b9329","user_c1ee1eda28554d0f88560a51862980b3","user_17b13f16a5164ca4b1e4d88ea434f5a1","user_85d35cf84bf5456f8040cc733d9b09c9","user_fbc9a54790b24ee19441260970b171c0","user_0368d27f4d514079bc5cfd5678ec1fe7","user_5181e07992f44e94a1a81ae9a5d25777","user_fd6f86b6942d4940a895f4059cb188d7","user_5500315bf0a34f9b9dfa0e4fffcf49c2","user_30b5b567829e485ab6267c3c78d48ca3","user_4caced7ebd904676a897628662f37d32","user_0202a46151cc43af890caa521c40576e","user_b17878cd35154a258b86b63050963c74","user_61c5af696dde4a9388f95d402767db16","user_0a0579891c7148009ec254f7ae2e6367","user_ed145d8b0f094b83a2d51d428a59d0cb","user_72a0cc784d4543f2b1d9cee9961d7e49","user_149e60f3117d4fb280c992762d3c09e3","user_35dd06f9b2c749cfb22ddb7b938c5c7c","user_00c56e75c0334ff0b248ca4292d20de3","user_d43bfea6e4234f84ab377d664edf2576","user_cf808eb761754c399922e96b02ac8b94","user_31be78e92e4e4218808007047cbdcebb","user_797c9f53bbc541f6b046fa32339bb2dd","user_9a197f447f314f9ead993f12303d8c75","user_03bcea398fd6441c8f982abbdc94ef75","user_98dac32649e7488ea314a96f808e002d","user_cb3460da976442579c8f4785ec687ddf","user_29bea6fb93384c0f80254a5a9af66fe6","user_f5735bcc168445c38978e46969bc0019","user_363d9255193e45f19513f4bfa9901fbe","user_1bc564bcaa4a476e8392c4c8e2b92983","user_2b0a9e355fc64fa2abf5ef92c87a76cb","user_0b253029175b4ebb8b03c4281757406b","user_608169810dc143998c7964485415a5c7","user_732277cad5264ed48172c40f0f008104","user_4190b08bba444ec58beda6637361cfdb","user_18ded324eb4e465984b2971e990ef8c9","user_78c3e3420b59441380eca3928a8a5b70","user_3c4400761cba4b65b77b6cae55fc21eb","user_515fc9a2a1b043c3847a29f29f3b3c2a","user_7261c27b34954ece93ac0d8a15520591","user_55368a92e24e4e26a2e143db53205fd3","user_f32ea4a710104c06ad5858b0e22cfc88","user_2fae5cc33cfb4cc1befdc261d8c81969","user_d84e6dadbdab4b75bfc51e17a9089546","user_7ec3a868038049f2a7c6515fa64814c6","user_2bf0a23078ca4ea09ed6a86c9efa3b14","user_efc5b3ef96ea4bffbde733e249c8cbb3","user_5be59efdf1bd49e18415c7829666c480","user_55f74958eb00441f8171f4f8757b0f24","user_91bfab48a8464589ae2aafb3858a9e7f","user_c1d462c8eba940f9bc76d3d88838bbfb","user_d2669ccf033f46c79b0adda40cf3383c","user_142da3c419804a82a3057cedc86acaa6","user_8e92a37f342b482facd1eebbd782006a","user_53bbe00387004010a8b9ad5f36bdd4a7","user_c1b2080663a94817868eefb6cac8e18e","user_eff1792e14a746b99b1e92950848772c","user_a67530c8d4ac4ab4a27a9e4b129bdda5","user_dce466f2ebf346168bae8c9024cc17f0","user_912210948aa849eda2c3e0c2b58355e6","user_a25f1a913867452594186bf056c9f165","user_6b48d96586784272abaf89bd15f90295","user_a109e9b5d75349c6ab3c0daf5baa2198","user_a7f0471fb9c64a00af7b3029234cff99","user_159709bbbb534b579770539e0c7d5037","user_63ea15931d8541a3bd35e5b1f09087dc","user_6a535a77e2aa4a109373ac6670d6c2a3","user_aa51f0825ce24faa8bf66709c7d454c2","user_e017338080be4aa7898de218458ff2a5","user_2208f461810144cb8994ecc5136cc3ee","user_93e25fbcac7a4a9c9e5b0e8fa75ac673","user_f4905c936732451b85fd82acc4c45bba","user_4205ea2b9cc549048d4b2e9da389c348","user_f04ca61de8ba44af8e50ed5bd37ff822","user_4e2f18aba20640cf922c8bc485941f8e","user_fcde9d330a5d41a8b810de6cfacff64d","user_dfc0406700564f0797038bebeabb617f","user_00505cca5b04460fafd716af48665ca1","user_47557ad75d4047efab1b6577cec3efe7","user_0149372b160544cf981b6284dd2b5e45","user_fd92e551358e4af1b610cb9bafe39494","user_ffea0ad773f3424592e76f5108deaaaa","user_16cc89c2e06c497cb65930f0c4729dce","user_e0e43601f93249c382415521188f0208","user_868e2d4ecf61494ea10140a00abdb0e5","user_fb9ca56c8d3547268f2d589a6fcb1556","user_a204f87d215a409798be9fb207685f44"]')},47:function(e){e.exports=JSON.parse('{"rtcDialingTimeoutSeconds":6,"rtcIceConfig":[{"urls":"turn:68.183.24.218:3478","username":"username","credential":"password"}],"rtcIceConfigAlt":[{"urls":"stun:stun.l.google.com:19302"},{"urls":"stun:stun1.l.google.com:19302"},{"urls":"stun:stun2.l.google.com:19302"},{"urls":"stun:stun3.l.google.com:19302"},{"urls":"stun:stun4.l.google.com:19302"},{"urls":"turn:68.183.24.218:3478","username":"username","credential":"password"}]}')},67:function(e,t,n){e.exports=n.p+"static/media/background.fcad69ea.png"},68:function(e,t,n){e.exports=n.p+"static/media/logo.85dc561e.svg"},69:function(e,t,n){e.exports=n.p+"static/media/screenshot.547f1a66.png"},70:function(e){e.exports=JSON.parse('{"conversationId":"space_ac4e67b98b34b44c4a39466e93e"}')},77:function(e,t,n){e.exports=n(119)}},[[77,1,2]]]);
//# sourceMappingURL=main.2a83705c.chunk.js.map